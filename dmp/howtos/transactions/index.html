<!doctype html>
<html lang="fr" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.104.2" />
<meta name="robots" content="index, follow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Transactions supportées | DevBox-Santé</title>
<meta name="description" content="Contient un exemple d&#39;utilisation de l&#39;API java et curl des différentes transactions supportées.
">
<meta property="og:title" content="Transactions supportées" />
<meta property="og:description" content="Contient un exemple d&#39;utilisation de l&#39;API java et curl des différentes transactions supportées.
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/dmp/howtos/transactions/" /><meta property="article:section" content="dmp" />

<meta property="article:modified_time" content="2023-05-10T09:57:32+02:00" /><meta property="og:site_name" content="DevBox-Santé" />

<meta itemprop="name" content="Transactions supportées">
<meta itemprop="description" content="Contient un exemple d&#39;utilisation de l&#39;API java et curl des différentes transactions supportées.
">
<meta itemprop="dateModified" content="2023-05-10T09:57:32+02:00" />
<meta itemprop="wordCount" content="2247">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Transactions supportées"/>
<meta name="twitter:description" content="Contient un exemple d&#39;utilisation de l&#39;API java et curl des différentes transactions supportées.
"/>




<link rel="preload" href="/scss/main.min.9f0a2161d80a195a6248b609ca0dbf542572bf374abeeea73f4afa094e9b8cf6.css" as="style">
<link href="/scss/main.min.9f0a2161d80a195a6248b609ca0dbf542572bf374abeeea73f4afa094e9b8cf6.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK"
  crossorigin="anonymous"></script>
<link rel="stylesheet" href="/css/devbox-sante.css" type="text/css">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-39129192-3"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'UA-39129192-3');
}
</script>
  </head>
  <body class="td-page">
    <header>
      <nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg id="Composant_16_14" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 132.5 118.9" style="enable-background:new 0 0 132.5 118.9"><style>.st0{fill:url(#SVGID_1_)}.st1{fill:#fff}.st2{fill:url(#SVGID_2_)}.st3{fill:url(#SVGID_3_)}.st4{fill:#d34a3c}.st5{fill:none;stroke:#fff;stroke-width:6}</style><g id="Rectangle_69" transform="translate(65.996 38.892)"><linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="-44.4861" y1="64.4079" x2="-45.1313" y2="65.2243" gradientTransform="matrix(66.506 0 0 -66.507 3013.5039 4344.1382)"><stop offset="0" style="stop-color:#7613E0"/><stop offset="1" style="stop-color:#9F57ED"/></linearGradient><path class="st0" d="M23.3 3.8h19.9c10.7.0 19.4 8.7 19.4 19.4v19.9c0 10.7-8.7 19.4-19.4 19.4H23.3c-10.7.0-19.4-8.7-19.4-19.4V23.2C3.9 12.5 12.6 3.8 23.3 3.8z"/><g><path class="st1" d="M44.5 66.5H22c-12.1.0-22-9.9-22-22V22C0 9.9 9.9.0 22 0h22.5c12.1.0 22 9.9 22 22v22.5c0 12.1-9.9 22-22 22zM22 6C13.2 6 6 13.2 6 22v22.5c0 8.8 7.2 16 16 16h22.5c8.8.0 16-7.2 16-16V22c0-8.8-7.2-16-16-16H22z"/></g></g><g id="Rectangle_70" transform="translate(110.109) rotate(90)"><linearGradient id="SVGID_2_" gradientUnits="userSpaceOnUse" x1="103.5653" y1="89.1427" x2="104.2366" y2="89.9162" gradientTransform="matrix(0 -66.506 -66.507 0 5940.3726 6895.6235)"><stop offset="0" style="stop-color:#67ED9A"/><stop offset="1" style="stop-color:#4AC87A"/></linearGradient><path class="st2" d="M23 1.5h21.5c11.6.0 21 9.4 21 21V44c0 11.6-9.4 21-21 21H23C11.4 65 2 55.6 2 44V22.5c0-11.6 9.4-21 21-21z"/><g><path class="st1" d="M66.5 22v22.5c0 12.1-9.9 22-22 22H22c-12.1.0-22-9.9-22-22V22C0 9.9 9.9.0 22 0h22.5c12.1.0 22 9.9 22 22zM6 44.5c0 8.8 7.2 16 16 16h22.5c8.8.0 16-7.2 16-16V22c0-8.8-7.2-16-16-16H22C13.2 6 6 13.2 6 22V44.5z"/></g></g><g id="Rectangle_71" transform="translate(88.714 52.366) rotate(90)"><linearGradient id="SVGID_3_" gradientUnits="userSpaceOnUse" x1="50.3774" y1="67.1362" x2="49.7677" y2="66.2039" gradientTransform="matrix(0 -66.506 -66.507 0 4517.4551 3412.9705)"><stop offset="0" style="stop-color:#FFA800"/><stop offset="1" style="stop-color:#FFC24D"/></linearGradient><path class="st3" d="M22.8 2.3h21c11.3.0 20.5 9.2 20.5 20.5v21c0 11.3-9.2 20.5-20.5 20.5h-21c-11.3.0-20.5-9.2-20.5-20.5v-21C2.3 11.4 11.4 2.3 22.8 2.3z"/><g><path class="st1" d="M66.5 22v22.5c0 12.1-9.9 22-22 22H22c-12.1.0-22-9.9-22-22V22C0 9.9 9.9.0 22 0h22.5c12.1.0 22 9.9 22 22zM6 44.5c0 8.8 7.2 16 16 16h22.5c8.8.0 16-7.2 16-16V22c0-8.8-7.2-16-16-16H22C13.2 6 6 13.2 6 22V44.5z"/></g></g><g id="Rectangle_72" transform="translate(66.506 13.481) rotate(90)"><g><path class="st4" d="M23 1.5h21.5c11.6.0 21 9.4 21 21V44c0 11.6-9.4 21-21 21H23C11.4 65 2 55.6 2 44V22.5c0-11.6 9.4-21 21-21z"/></g><path class="st5" d="M22 3h22.5c10.5.0 19 8.5 19 19v22.5c0 10.5-8.5 19-19 19H22c-10.5.0-19-8.5-19-19V22C3 11.5 11.5 3 22 3z"/></g></svg></span><span class="navbar-brand__name">DevBox-Santé</span></a>
  <div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
    <ul class="navbar-nav mt-2 mt-lg-0">
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link active" href="/dmp/"><i class='icon iconNav icon-dmp'></i><span class="active">DMP</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="/insi/"><i class='icon iconNav icon-ins'></i><span>INSi</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="/ms-sante/"><i class='icon iconNav icon-mssante'></i><span>MSS</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="/cps/"><i class='icon iconNav icon-cps-puce'></i><span>CPS</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="/vitale/"><i class='icon iconNav icon-sesam-puce'></i><span>Vitale</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="/apcv/"><i class='icon iconNav icon-apcv'></i><span>ApCV</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="/annuaire/"><i class='icon iconNav icon-directory'></i><span>Annuaire</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="/installer/"><i class='icon icon-devbox'></i><span>Installation</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="/blog/"><i class='fa fa-blog'></i><span>Blog</span></a>
      </li>
      </ul>
  </div>
  <div class="navbar-nav d-none d-lg-block">
    
  </div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            
<div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="collapse td-sidebar-nav foldable-nav" id="td-section-nav">
    <ul class="td-sidebar-nav__section pr-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-dmp-li">
  <a href="/dmp/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-dmp"><span class="">DMP</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-dmpembedded-li">
  <input type="checkbox" id="m-dmpembedded-check"/>
  <label for="m-dmpembedded-check"><a href="/dmp/embedded/" title="Embedded : Premier Pas" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-dmpembedded"><span class="">Java API</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-dmprest-li">
  <input type="checkbox" id="m-dmprest-check"/>
  <label for="m-dmprest-check"><a href="/dmp/rest/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-dmprest"><span class="">REST Proxy</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-dmpauthentifications-li">
  <input type="checkbox" id="m-dmpauthentifications-check"/>
  <label for="m-dmpauthentifications-check"><a href="/dmp/authentifications/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-dmpauthentifications"><span class="">Authentifications</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-dmpauthentificationsindirecte-li">
  <input type="checkbox" id="m-dmpauthentificationsindirecte-check"/>
  <label for="m-dmpauthentificationsindirecte-check"><a href="/dmp/authentifications/indirecte/" title="Authentification Indirecte (via certificat serveur)" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-dmpauthentificationsindirecte"><span class="">Indirecte</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-dmpauthentificationsdirecte-li">
  <input type="checkbox" id="m-dmpauthentificationsdirecte-check"/>
  <label for="m-dmpauthentificationsdirecte-check"><a href="/dmp/authentifications/directe/" title="Authentification Directe (via carte CPx)" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-dmpauthentificationsdirecte"><span class="">Directe</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-dmpauthentificationscps_agent-li">
  <input type="checkbox" id="m-dmpauthentificationscps_agent-check"/>
  <label for="m-dmpauthentificationscps_agent-check"><a href="/dmp/authentifications/cps_agent/" title="Authentification Directe via le CPS Agent" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-dmpauthentificationscps_agent"><span class="">Directe via CPS Agent</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-dmpauthentificationsolaqin_taas-li">
  <input type="checkbox" id="m-dmpauthentificationsolaqin_taas-check"/>
  <label for="m-dmpauthentificationsolaqin_taas-check"><a href="/dmp/authentifications/olaqin_taas/" title="Authentification Directe via OLAQIN TAAS (Terminal As A Service)" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-dmpauthentificationsolaqin_taas"><span class="">Directe via OLAQIN TAAS</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-dmpauthentificationsprosantc3a9connect-li">
  <input type="checkbox" id="m-dmpauthentificationsprosantc3a9connect-check"/>
  <label for="m-dmpauthentificationsprosantc3a9connect-check"><a href="/dmp/authentifications/prosant%C3%A9connect/" title="Authentification ProSantéConnect" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-dmpauthentificationsprosantc3a9connect"><span class="">ProSanteConnect</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-dmpcda-li">
  <input type="checkbox" id="m-dmpcda-check"/>
  <label for="m-dmpcda-check"><a href="/dmp/cda/" title="Structuration des documents" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-dmpcda"><span class="">CDA</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-dmpcdastructurationminimale-li">
  <input type="checkbox" id="m-dmpcdastructurationminimale-check"/>
  <label for="m-dmpcdastructurationminimale-check"><a href="/dmp/cda/structurationminimale/" title="Volet CDA structuration minimale" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-dmpcdastructurationminimale"><span class="">CDA-minimal</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-dmpcdacrbiologie-li">
  <input type="checkbox" id="m-dmpcdacrbiologie-check"/>
  <label for="m-dmpcdacrbiologie-check"><a href="/dmp/cda/crbiologie/" title="Volet Compte rendu d&#39;examens de biologie" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-dmpcdacrbiologie"><span class="">CDA Biologie</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-dmpcdavaccination-li">
  <input type="checkbox" id="m-dmpcdavaccination-check"/>
  <label for="m-dmpcdavaccination-check"><a href="/dmp/cda/vaccination/" title="Vaccinations : Note et Historiques" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-dmpcdavaccination"><span class="">CDA-Vaccinations</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-dmpcdawrapped-li">
  <input type="checkbox" id="m-dmpcdawrapped-check"/>
  <label for="m-dmpcdawrapped-check"><a href="/dmp/cda/wrapped/" title="Votre volet CDA" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-dmpcdawrapped"><span class="">CDA-wrapped</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-dmpcdaautopresentable-li">
  <input type="checkbox" id="m-dmpcdaautopresentable-check"/>
  <label for="m-dmpcdaautopresentable-check"><a href="/dmp/cda/autopresentable/" title="CDA autoprésentable" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-dmpcdaautopresentable"><span class="">CDA-autopresentable</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-dmpconfiguration-li">
  <input type="checkbox" id="m-dmpconfiguration-check"/>
  <label for="m-dmpconfiguration-check"><a href="/dmp/configuration/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-dmpconfiguration"><span class="">Configuration</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-dmphowtos-li">
  <input type="checkbox" id="m-dmphowtos-check" checked/>
  <label for="m-dmphowtos-check"><a href="/dmp/howtos/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-dmphowtos"><span class="">Howtos</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-dmphowtosintegrateurchecklist-li">
  <input type="checkbox" id="m-dmphowtosintegrateurchecklist-check"/>
  <label for="m-dmphowtosintegrateurchecklist-check"><a href="/dmp/howtos/integrateurchecklist/" title="Intégrateurs checklist" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-dmphowtosintegrateurchecklist"><span class="">Intégrateurs Checklist</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-dmphowtostransactions-li">
  <input type="checkbox" id="m-dmphowtostransactions-check" checked/>
  <label for="m-dmphowtostransactions-check"><a href="/dmp/howtos/transactions/" title="Transactions supportées" class="align-left pl-0  active td-sidebar-link td-sidebar-link__page" id="m-dmphowtostransactions"><span class="td-sidebar-nav-active-item">Toutes les transactions</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-dmphowtoshomologation-li">
  <input type="checkbox" id="m-dmphowtoshomologation-check"/>
  <label for="m-dmphowtoshomologation-check"><a href="/dmp/howtos/homologation/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-dmphowtoshomologation"><span class="">Homologation</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-dmphowtoshomologationphase_1-li">
  <input type="checkbox" id="m-dmphowtoshomologationphase_1-check"/>
  <label for="m-dmphowtoshomologationphase_1-check"><a href="/dmp/howtos/homologation/phase_1/" title="Homologation Phase 1 Prérequis" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-dmphowtoshomologationphase_1"><span class="">Phase 1</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-dmphowtoshomologationdeprecated-li">
  <input type="checkbox" id="m-dmphowtoshomologationdeprecated-check"/>
  <label for="m-dmphowtoshomologationdeprecated-check"><a href="/dmp/howtos/homologation/deprecated/" title="[Deprecated] Ancienne procédure" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-dmphowtoshomologationdeprecated"><span class="">Ancienne procédure</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-dmphowtosgestioncertificat-li">
  <input type="checkbox" id="m-dmphowtosgestioncertificat-check"/>
  <label for="m-dmphowtosgestioncertificat-check"><a href="/dmp/howtos/gestioncertificat/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-dmphowtosgestioncertificat"><span class="">Gestion des certificats</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-dmphowtosschematron-li">
  <input type="checkbox" id="m-dmphowtosschematron-check"/>
  <label for="m-dmphowtosschematron-check"><a href="/dmp/howtos/schematron/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-dmphowtosschematron"><span class="">Schematron</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-dmphowtosenvironnements-li">
  <input type="checkbox" id="m-dmphowtosenvironnements-check"/>
  <label for="m-dmphowtosenvironnements-check"><a href="/dmp/howtos/environnements/" title="Différents environnements du DMP" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-dmphowtosenvironnements"><span class="">Différents environnements</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-dmphowtosmigrations-li">
  <input type="checkbox" id="m-dmphowtosmigrations-check"/>
  <label for="m-dmphowtosmigrations-check"><a href="/dmp/howtos/migrations/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-dmphowtosmigrations"><span class="">Migrations</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-dmphowtosmigrations47_50-li">
  <input type="checkbox" id="m-dmphowtosmigrations47_50-check"/>
  <label for="m-dmphowtosmigrations47_50-check"><a href="/dmp/howtos/migrations/4.7_5.0/" title="Migration 4.7 vers la 5.0" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-dmphowtosmigrations47_50"><span class="">4.7_5.0</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-dmphowtosdemo-stellair-li">
  <input type="checkbox" id="m-dmphowtosdemo-stellair-check"/>
  <label for="m-dmphowtosdemo-stellair-check"><a href="/dmp/howtos/demo-stellair/" title="Démo Stellair" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-dmphowtosdemo-stellair"><span class="">Authent. Olaqin TAAS</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-dmphowtosuniqueidgenerator-li">
  <input type="checkbox" id="m-dmphowtosuniqueidgenerator-check"/>
  <label for="m-dmphowtosuniqueidgenerator-check"><a href="/dmp/howtos/uniqueidgenerator/" title="UniqueIdGenerator" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-dmphowtosuniqueidgenerator"><span class="">Génération des UniqueId</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-dmphowtosidentifiantcomposant-li">
  <input type="checkbox" id="m-dmphowtosidentifiantcomposant-check"/>
  <label for="m-dmphowtosidentifiantcomposant-check"><a href="/dmp/howtos/identifiantcomposant/" title="CNDA : Fiche d&#39;identité du composant DMP" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-dmphowtosidentifiantcomposant"><span class="">CNDA identité DMP</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-dmphowtosfaq-li">
  <input type="checkbox" id="m-dmphowtosfaq-check"/>
  <label for="m-dmphowtosfaq-check"><a href="/dmp/howtos/faq/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-dmphowtosfaq"><span class="">FAQ</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-dmparchitecture-li">
  <input type="checkbox" id="m-dmparchitecture-check"/>
  <label for="m-dmparchitecture-check"><a href="/dmp/architecture/" title="Architecture interne des différents composants" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-dmparchitecture"><span class="">Architecture interne</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-dmpversions-li">
  <input type="checkbox" id="m-dmpversions-check"/>
  <label for="m-dmpversions-check"><a href="/dmp/versions/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-dmpversions"><span class="">Versions</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-dmpui-li">
  <input type="checkbox" id="m-dmpui-check"/>
  <label for="m-dmpui-check"><a href="/dmp/ui/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-dmpui"><span class="">DMP UI</span></a></label>
  
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            
<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
<a id="print" href="/dmp/howtos/_print/"><i class="fa-solid fa-print fa-fw"></i> Imprimer la section entière</a>

</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#mode-dauthentification">Mode d&rsquo;authentification</a>
      <ul>
        <li><a href="#directe-depus-version-31">Directe (depus version 3.1)</a></li>
        <li><a href="#indirecte-depuis-version-10">Indirecte (depuis version 1.0)</a></li>
      </ul>
    </li>
    <li><a href="#récupération-des-différents-paramètres-du-dmp">Récupération des différents paramètres du DMP</a>
      <ul>
        <li><a href="#getparametres-depuis-version-30">getParametres() (depuis version 3.0)</a></li>
        <li><a href="#getcodesfor-depuis-version-10">getCodesFor() (depuis version 1.0)</a></li>
        <li><a href="#gettypesindexedbyclasscode-depuis-version-45">getTypesIndexedByClassCode() (depuis version 4.5)</a></li>
      </ul>
    </li>
    <li><a href="#transactions-didentification-du-patient">Transactions d&rsquo;identification du patient</a>
      <ul>
        <li><a href="#td02--test-dexistence-du-dmp-dun-patient-et-vérification-de-lautorisation-daccès--depuis-version-10">TD0.2 : test d&rsquo;existence du DMP d&rsquo;un patient et vérification de l&rsquo;autorisation d&rsquo;accès  (depuis version 1.0)</a></li>
        <li><a href="#td03--modifier-lautorisation-daccès-etou-le-statut-médecin-traitant-dmp-ou-passer-en-mode-daccès--bris-de-glace--depuis-version-20">TD0.3 : modifier l&rsquo;autorisation d&rsquo;accès et/ou le statut médecin traitant DMP ou passer en mode d&rsquo;accès « bris de glace » (depuis version 2.0)</a></li>
        <li><a href="#td04--lister-les-dmp-autorisés-depuis-version-50">TD0.4 : lister les DMP autorisés (depuis version 5.0)</a></li>
        <li><a href="#td05">TD0.5</a></li>
      </ul>
    </li>
    <li><a href="#alimentation">Alimentation</a>
      <ul>
        <li><a href="#td21--alimenter-le-dmp-dun-patient-avec-des-documents-depuis-version-10">TD2.1 : alimenter le DMP d&rsquo;un patient avec des documents (depuis version 1.0)</a></li>
        <li><a href="#td31--depuis-version-32">TD3.1 : (depuis version 3.2)</a></li>
        <li><a href="#td31b--rechercher-lidentifiant-technique-dun-document-depuis-version-30">TD3.1b : rechercher l&rsquo;identifiant technique d&rsquo;un document (depuis version 3.0)</a></li>
        <li><a href="#remplacement">Remplacement</a></li>
        <li><a href="#td33c--supprimer-un-document-depuis-version-10">TD33c : Supprimer un document (depuis version 1.0)</a></li>
      </ul>
    </li>
    <li><a href="#gestion-du-bris-de-glace">Gestion du Bris de Glace</a></li>
    <li><a href="#gestion-de-la-connexion-secrète">Gestion de la connexion secrète</a></li>
  </ul>
</nav>
      </div>
    
            

	
		



  
  

	
		



  
  

	

          </aside>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="/dmp/">DMP</a>
  </li>
  <li class="breadcrumb-item">
    <a href="/dmp/howtos/">Howtos</a>
  </li>
  <li class="breadcrumb-item active" aria-current="page">
    <a href="/dmp/howtos/transactions/" aria-disabled="true" class="btn-link disabled">Toutes les transactions</a>
  </li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>Transactions supportées</h1>
	<div class="lead">Contient un exemple d&rsquo;utilisation de l&rsquo;API java et curl des différentes transactions supportées.</div>
	<header class="article-meta">
		

  
    


  
    


  

		
	</header>    
	

<div class="pageinfo pageinfo-primary">
<p><strong>Attention :</strong></p>
<p>Suivre cette documentation ne vous dispense pas de lire attentivement le guide d&rsquo;intégration &ldquo;Service DMP intégré aux LPS&rdquo; (SEL-MP-037) dans la version du package cible.
Ce document est disponible sur l&rsquo;espace industriel de Sesam-Vitale : <a href="https://industriels.sesam-vitale.fr/group/dmp-compatibilite">https://industriels.sesam-vitale.fr/group/dmp-compatibilite</a></p>

</div>

<p>Toutes transactions vers le DMP se fait en précisant un <code>DMPCContext</code> et une requête spécifique en argument d&rsquo;une méthode du <code>DMPCClient</code>.</p>
<p>Le <code>DMPCContext</code> contient les informations permettant de définir :</p>
<ul>
<li>L&rsquo;auteur de la transaction,</li>
<li>Le code de confidentialité de la transaction (connexion secrète, invisible aux représentants légaux du patient)</li>
</ul>
<p>À ce <code>DMPCContext</code> est associé un autre argument dépendant de la transaction réalisée.</p>
<h2 id="mode-dauthentification">Mode d&rsquo;authentification</h2>
<h3 id="directe-depus-version-31">Directe (depus version 3.1)</h3>
<p>En authentification directe, l&rsquo;utilisateur personnel de santé est authentifié par sa carte CPS/CPE, ces informations sont récupérées lors de la lecture de la carte CPS.</p>
<h3 id="indirecte-depuis-version-10">Indirecte (depuis version 1.0)</h3>
<p>En authentification indirecte, seule la structure de santé (par son certificat serveur) est authentifiée.</p>
<p>L&rsquo;auteur de la requête, c&rsquo;est à dire le personnel de santé utilisateur (<code>DMPCPersonnelSante</code>), doit donc être authentifié localement.
Le système de la structure de santé doit être en mesure d&rsquo;authentifié ses utilisateurs. Cet identifiant local au système doit être spécifié dans <code>DMPCPersonnelSante.internalId</code> même si le rpps est connu.</p>
<p>Exemple Java :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">DMPCContext</span> <span style="color:#000">context</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">DMPCContext</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#000">DMPCPersonnelSante</span> <span style="color:#000">ps</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">DMPCPersonnelSante</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#000">ps</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setInternalId</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;1234567890&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">ps</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setNom</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Forêt&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">ps</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setPrenom</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Laurent&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">ps</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setRole</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;10&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span> <span style="color:#8f5902;font-style:italic">// Médecin  dans la nomenclature DMPCCode.JeuxValeursDMP.SUBJECT_ROLE      
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">ps</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setSpecialite</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;G15_10/SM30&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span> <span style="color:#8f5902;font-style:italic">// G15_10/SM30 Néphrologie  dans la nomenclature DMPCCode.JeuxValeursDMP.AUTHOR_SPECIALITY
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">ps</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setSecteurActivite</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;SA01&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>  <span style="color:#8f5902;font-style:italic">// Etablissement public de santé dans la nomenclature DMPCCode.JeuxValeursDMP.HEALTH_CARE_FACILITY_TYPE_CODE
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">ps</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getStructureSante</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">setNom</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;DEVCOOP Bureau de Léognan&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setAuthor</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">ps</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span></code></pre></div><p>Exemple curl :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#a40000">curl</span> <span style="color:#a40000">--request</span> <span style="color:#a40000">POST</span> <span style="color:#a40000">&#39;/dmp/tdxxxx&#39;</span> <span style="color:#a40000">\</span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">--data-raw</span> <span style="color:#a40000">&#39;</span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;context&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;author&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;internalId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;123456&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;nom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Durand&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;prenom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Pierre&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;role&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;10&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;secteurActivite&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;SA43&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;specialite&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;G15_10/SM28&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;structureSante&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;nom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Devcoop Bureau de Léognan&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;modeAcces&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;acces&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;NORMAL&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;request&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a40000">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span><span style="color:#a40000">&#39;</span>
</span></span></code></pre></div><h2 id="récupération-des-différents-paramètres-du-dmp">Récupération des différents paramètres du DMP</h2>
<h3 id="getparametres-depuis-version-30">getParametres() (depuis version 3.0)</h3>
<p>Afin de pouvoir récupérer le paramètrage du DMP qui permet de répondre à un certain nombre d&rsquo;exigences notamment les fonctions-gestion-mineurs (EX_GEN-1550). Il faut accéder à la méthode <code>getParametres</code></p>
<p>Exemple :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>  <span style="color:#000">DMPCParametres</span> <span style="color:#000">parametres</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">dmpcClient</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getParametres</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">parametres</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">isFonctionsGestionMineurs</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span> <span style="color:#000">agePatient</span> <span style="color:#ce5c00;font-weight:bold">&lt;</span> <span style="color:#000">parametres</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getAgeMajorite</span><span style="color:#ce5c00;font-weight:bold">())</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8f5902;font-style:italic">// Attention EX_GEN-1550
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#ce5c00;font-weight:bold">}</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">parametres</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">isProduction</span><span style="color:#ce5c00;font-weight:bold">())</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8f5902;font-style:italic">// Attention l&#39;environnement est celui de production, 
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(!</span><span style="color:#000">parametres</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">isCumulInvisiblePatientMasquePs</span><span style="color:#ce5c00;font-weight:bold">())</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>   <span style="color:#8f5902;font-style:italic">// Attention EX_2.1-1050
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>Exemple curl :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#a40000">curl</span> <span style="color:#a40000">-X</span> <span style="color:#a40000">GET</span> <span style="color:#4e9a06">&#34;/dmp/parametres&#34;</span> 
</span></span></code></pre></div><h3 id="getcodesfor-depuis-version-10">getCodesFor() (depuis version 1.0)</h3>
<p>Méthode permettant d&rsquo;accéder aux différents jeux de valeurs imposés par le Guide d&rsquo;intégration.</p>
<p>notamment :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">enum</span> <span style="color:#000">JeuxValeursDMP</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">QUALITE_REPRESENTANT_LEGAL</span><span style="color:#ce5c00;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">AUTHOR_SPECIALITY</span><span style="color:#ce5c00;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">CLASS_CODE</span><span style="color:#ce5c00;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">CONFIDENTIALITY_CODE</span><span style="color:#ce5c00;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">CONTENT_TYPE_CODE</span><span style="color:#ce5c00;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">FORMAT_CODE</span><span style="color:#ce5c00;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">HEALTH_CARE_FACILITY_TYPE_CODE</span><span style="color:#ce5c00;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">PRACTICE_SETTING_CODE</span><span style="color:#ce5c00;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">SUBJECT_ROLE</span><span style="color:#ce5c00;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">TYPE_CODE</span><span style="color:#ce5c00;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">RESTRICTION_AUDIENCE_VIHF</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>Exemple Java :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#000">List</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">allPersonnelDeSanteSpecialities</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCodesFor</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">JeuxValeursDMP</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">AUTHOR_SPECIALITY</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">List</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">allPossibleFormatCodesForADocument</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCodesFor</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">JeuxValeursDMP</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">FORMAT_CODE</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span></code></pre></div><p>Exemple curl :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#a40000">curl</span> <span style="color:#a40000">-X</span> <span style="color:#a40000">GET</span> <span style="color:#4e9a06">&#34;/dmp/nomenclatures?jeuxValeurs=AUTHOR_SPECIALTY&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">curl</span> <span style="color:#a40000">-X</span> <span style="color:#a40000">GET</span> <span style="color:#4e9a06">&#34;/dmp/nomenclatures?jeuxValeurs=FORMAT_CODE&#34;</span>
</span></span></code></pre></div><h3 id="gettypesindexedbyclasscode-depuis-version-45">getTypesIndexedByClassCode() (depuis version 4.5)</h3>
<p>Méthode permettant d&rsquo;indexer tous les types par leur classCodes.</p>
<p>Exemple Java :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>   <span style="color:#000">Map</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">String</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">List</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">&gt;&gt;</span>  <span style="color:#000">allTypesIndexedByClassCode</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getTypesIndexedByClassCode</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>   <span style="color:#000">String</span> <span style="color:#000">compteRenduClassCode</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;10&#34;</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#000">List</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">allCompteRenduTypes</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">allTypesIndexedByClassCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">get</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">compteRenduClassCode</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span></code></pre></div><p>Exemple curl :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#a40000">curl</span> <span style="color:#a40000">-X</span> <span style="color:#a40000">GET</span> <span style="color:#4e9a06">&#34;/dmp/nomenclatures/typesByClassCode&#34;</span>
</span></span></code></pre></div><h2 id="transactions-didentification-du-patient">Transactions d&rsquo;identification du patient</h2>
<h3 id="td02--test-dexistence-du-dmp-dun-patient-et-vérification-de-lautorisation-daccès--depuis-version-10">TD0.2 : test d&rsquo;existence du DMP d&rsquo;un patient et vérification de l&rsquo;autorisation d&rsquo;accès  (depuis version 1.0)</h3>
<p>Cette transaction permet de tester l&rsquo;existence d&rsquo;un DMP et de vérifier les autorisations d&rsquo;accès ainsi que de récupérer les informations concernant la création du compte patient.</p>
<p>De là peut en découler des actions de créations de DMP, de création de compte internet, ou bien encore de connaître la raison d&rsquo;une interdiction d&rsquo;accès</p>
<p>Exemple Java :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">TD02Response</span> <span style="color:#000">response</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">td02Exist</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">TD02Request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">matriculeINS</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Identifiant</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">valeur</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;277076322082910&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">identifiantSysteme</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Oids</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">ANS_1_2_250_1_213</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">_1_4_10_INS_NIR_TEST</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">val</span><span style="color:#ce5c00;font-weight:bold">())</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">())</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getAutorisation</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">equals</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">EXPIRE</span><span style="color:#ce5c00;font-weight:bold">))</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8f5902;font-style:italic">// prévoir une client.td03AddAuthorization()
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#ce5c00;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getAutorisation</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">equals</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">INTERDIT</span><span style="color:#ce5c00;font-weight:bold">))</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8f5902;font-style:italic">// le PS ne peut accéder au DMP
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#000">String</span> <span style="color:#000">raison</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getRaison</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getAutorisation</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">equals</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">NON_EXISTE</span><span style="color:#ce5c00;font-weight:bold">))</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8f5902;font-style:italic">// prévoir une client.td03AddAuthorization()
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#ce5c00;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getAutorisation</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">equals</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">VALIDE</span><span style="color:#ce5c00;font-weight:bold">))</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(!</span><span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCompteInternetOuvert</span><span style="color:#ce5c00;font-weight:bold">())</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8f5902;font-style:italic">// prévour une client.td15aCreerAccesInternetPatient()
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8f5902;font-style:italic">// contient les informations patient stockées dans leDMP
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#000">DMPCPatient</span> <span style="color:#000">dmpPatient</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getPatient</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getRole</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">equals</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCRole</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">MEDECIN_TRAITANT</span><span style="color:#ce5c00;font-weight:bold">))</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8f5902;font-style:italic">// le PS author est le médecint traitant
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#ce5c00;font-weight:bold">}</span> 
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>Exemple curl :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#a40000">curl</span>  <span style="color:#a40000">--request</span> <span style="color:#a40000">POST</span> <span style="color:#a40000">&#39;/dmp/td</span><span style="color:#0000cf;font-weight:bold">02</span><span style="color:#a40000">Exist&#39;</span> <span style="color:#a40000">\</span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">--data-raw</span> <span style="color:#a40000">&#39;</span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;context&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span><span style="color:#a40000">...</span><span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;request&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;matriculeINS&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;279035121518989&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;identifiantSysteme&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1.2.250.1.213.1.4.10&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span><span style="color:#a40000">&#39;</span>
</span></span></code></pre></div><h3 id="td03--modifier-lautorisation-daccès-etou-le-statut-médecin-traitant-dmp-ou-passer-en-mode-daccès--bris-de-glace--depuis-version-20">TD0.3 : modifier l&rsquo;autorisation d&rsquo;accès et/ou le statut médecin traitant DMP ou passer en mode d&rsquo;accès « bris de glace » (depuis version 2.0)</h3>
<p>Le LPS permet à l&rsquo;utilisateur les actions suivantes.</p>
<ul>
<li>Ajouter une autorisation d&rsquo;accès au DMP du patient ou passer en mode d&rsquo;accès « bris de glace ». Cf. DMP_0.3a.</li>
<li>Supprimer une autorisation d&rsquo;accès au DMP du patient. Cf. DMP_0.3b.</li>
<li>Modifier le statut médecin traitant DMP. Cf. DMP_0.3c.</li>
</ul>
<p>Exemple :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">td03AddAuthorization</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">TD03Request</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">patient</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getMatriculeINS</span><span style="color:#ce5c00;font-weight:bold">(),</span> <span style="color:#000">DMPCRole</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">STANDARD</span><span style="color:#ce5c00;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">td03RemoveAuthorization</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">TD03Request</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">patient</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getMatriculeINS</span><span style="color:#ce5c00;font-weight:bold">(),</span> <span style="color:#000">DMPCRole</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">STANDARD</span><span style="color:#ce5c00;font-weight:bold">));</span>
</span></span></code></pre></div><p>Exemple curl :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#a40000">curl</span>  <span style="color:#a40000">--request</span> <span style="color:#a40000">PUT</span> <span style="color:#a40000">&#39;/dmp/td</span><span style="color:#0000cf;font-weight:bold">03</span><span style="color:#a40000">AddAuthorization&#39;</span> <span style="color:#a40000">\</span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">--data-raw</span> <span style="color:#a40000">&#39;</span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;context&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span><span style="color:#a40000">...</span>  <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;request&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;matriculeINS&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;279035121518989&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;identifiantSysteme&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1.2.250.1.213.1.4.10&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;role&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;STANDARD&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span><span style="color:#a40000">&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">url</span> <span style="color:#a40000">--request</span> <span style="color:#a40000">PUT</span> <span style="color:#a40000">&#39;/dmp/td</span><span style="color:#0000cf;font-weight:bold">03</span><span style="color:#a40000">RemoveAuthorization&#39;</span> <span style="color:#a40000">\</span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">--data-raw</span> <span style="color:#a40000">&#39;</span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;context&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span><span style="color:#a40000">...</span><span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;request&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;matriculeINS&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;279035121518989&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;identifiantSysteme&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1.2.250.1.213.1.4.10&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;role&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;STANDARD&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span><span style="color:#a40000">&#39;</span>
</span></span></code></pre></div><h3 id="td04--lister-les-dmp-autorisés-depuis-version-50">TD0.4 : lister les DMP autorisés (depuis version 5.0)</h3>
<p>Les deux usages sont les suivants :</p>
<ol>
<li>
<p>Elle permet de récupérer la liste des nouveaux DMP autorisés pour l’acteur de santé (avec les INS de patient et les traits d’identités). Outre les habituelles informations d’authentification, il est possible de paramétrer en entrée une date à partir de laquelle la recherche est effectuée. Par exemple : (date du jour - 3 jours) ou (date du jour - 1 semaine). L’éditeur peut mettre en oeuvre dans le LPS un appel planifié régulièrement à cette transaction (par exemple tous les 3 jours ou toutes les semaines). Exemple : Cette transaction peut être utile dans le cas d’un logiciel du SIH ne recueillant pas directement l’autorisation du patient.
NB : l’autorisation d’accès est facultative pour alimenter le DMP avec des documents et pour supprimer des documents si le LPS implémente le profil Alimentation.</p>
</li>
<li>
<p>Cette transaction permet de récupérer la liste des patients pour lesquels un nouveau document a été ajouté dans son DMP depuis une date donnée. Le retour est le même, seul le paramétrage en entrée est différent.</p>
</li>
</ol>
<p>Exemple Java : </p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// cas 1
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">var</span> <span style="color:#000">response</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">td04ListDMPActifs</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">TD04Request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">from</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">clock</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getLocal</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">minusYears</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">1</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">searchType</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">TD04Request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">PatientSearchType</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">LAST_AUTORIZATION</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// cas 2 
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">var</span> <span style="color:#000">response</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">td04ListDMPActifs</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">TD04Request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">from</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">clock</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getLocal</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">minusYears</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">1</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">searchType</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">TD04Request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">PatientSearchType</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">LAST_DOC</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>                <span style="color:#ce5c00;font-weight:bold">);</span>
</span></span></code></pre></div><p>Exemple curl :</p>
<p>// cas 2</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#a40000">curl</span> <span style="color:#a40000">--location</span> <span style="color:#a40000">--request</span> <span style="color:#a40000">PUT</span> <span style="color:#a40000">&#39;http:</span><span style="color:#8f5902;font-style:italic">//localhost:8080/dmp/td04ListDMPActifs&#39; \
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#a40000">--header</span> <span style="color:#a40000">&#39;Content-Type:</span> <span style="color:#a40000">application/json&#39;</span> <span style="color:#a40000">\</span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">--data-raw</span> <span style="color:#a40000">&#39;</span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;context&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;author&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{},</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;modeAcces&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;acces&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;NORMAL&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;request&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;from&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2021-08-12T15:16:10Z&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;searchType&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;LAST_DOC&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span><span style="color:#a40000">&#39;</span>
</span></span></code></pre></div><h3 id="td05">TD0.5</h3>
<p>Non requis pour le DMP</p>
<h2 id="alimentation">Alimentation</h2>
<p>Le profil alimentation du DMP se fait au travers de transaction XDS (<a href="https://wiki.ihe.net/index.php/Cross-Enterprise_Document_Sharing">https://wiki.ihe.net/index.php/Cross-Enterprise_Document_Sharing</a>) supportée par le serveur DMP ainsi que par la DevBox-Santé DMP.</p>
<p>Les transactions XDS permettent de soumettre des documents au format CDA (<a href="https://www.hl7.org/implement/standards/product_brief.cfm?product_id=7">https://www.hl7.org/implement/standards/product_brief.cfm?product_id=7</a>) supporté également par le DMP et la DevBox-Santé DMP.</p>
<p>La DevBox-Santé DMP présente un modèle simplifé des informations demandées et s&rsquo;occupe de la cohérence des métadonnées des transactions XDS d&rsquo;avec les métadonnées <a href="../CDA/structurationMinimale.html">des documents CDA</a> )</p>
<h3 id="td21--alimenter-le-dmp-dun-patient-avec-des-documents-depuis-version-10">TD2.1 : alimenter le DMP d&rsquo;un patient avec des documents (depuis version 1.0)</h3>
<p>Cette fonctionnalité permet d&rsquo;alimenter le DMP d&rsquo;un patient avec un ou plusieurs nouveaux documents :</p>
<ul>
<li>décrits sous la forme de documents CDA et de métadonnées XDS,</li>
<li>et transmis au système DMP sous la forme d&rsquo;un lot de soumission XDS signé (XAdES).</li>
</ul>
<p>La cinématique générale est la suivante.
Le PS constitue le ou les document(s) dans le LPS .
Le LPS :</p>
<ul>
<li>construit le ou les document(s)
<ul>
<li>construit le document au format CDA ==&gt; action réalisée par la DevBox-Santé DMP</li>
<li>alimente les métadonnées XDS  ==&gt; action réalisée par la DevBox-Santé DMP</li>
</ul>
</li>
<li>constitue un lot de soumission XDS et signe ce lot (XAdES) ==&gt; action réalisée par la DevBox-Santé DMP</li>
<li>soumet le lot de documents au système DMP  ==&gt; action réalisée par la DevBox-Santé DMP</li>
</ul>
<p>Le LPS intégrateur de la DevBox-Santé DMP doit seulement fournir les valeurs des différentes métadonnées liées aux documents et à la soumission par l&rsquo;intermédiaire d&rsquo;un modèle simplifié :</p>
<h4 id="en-java-">En java :</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">final</span> <span style="color:#000">ZonedDateTime</span> <span style="color:#000">maintenant</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">timeManager</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getLocal</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">//   création du document
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">InputStream</span> <span style="color:#000">input</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getClass</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">getClassLoader</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">getResourceAsStream</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;1.pdf&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">byte</span><span style="color:#ce5c00;font-weight:bold">[]</span> <span style="color:#000">content</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#204a87;font-weight:bold">byte</span><span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#000">input</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">available</span><span style="color:#ce5c00;font-weight:bold">()];</span>
</span></span><span style="display:flex;"><span><span style="color:#000">ByteStreams</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">readFully</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">input</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">content</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">DMPCDocument</span> <span style="color:#000">document</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">DMPCDocument</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">patient</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">patient</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">classCodeCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCodesFor</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">JeuxValeursDMP</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">CLASS_CODE</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">get</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">0</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">confidentialityCodes</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">List</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">of</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">findCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">JeuxValeursDMP</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">CONFIDENTIALITY_CODE</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;N&#34;</span><span style="color:#ce5c00;font-weight:bold">)))</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">comments</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Commentaire du Document&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">events</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">List</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">of</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;B18&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;2.16.840.1.113883.6.3&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;Hépatite virale chronique&#34;</span><span style="color:#ce5c00;font-weight:bold">)))</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">practiceSettingCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">findCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">JeuxValeursDMP</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">PRACTICE_SETTING_CODE</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;AMBULATOIRE&#34;</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">serviceStartDateTime</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">maintenant</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">minusHours</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">3</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">serviceStopDateTime</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">maintenant</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">minusHours</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">2</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">title</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Titre du Document&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">typeCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">findCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">JeuxValeursDMP</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">TYPE_CODE</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;11488-4&#34;</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">creationDateTime</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">maintenant</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">formatCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">findCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">JeuxValeursDMP</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">FORMAT_CODE</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;urn:ihe:iti:xds-sd:pdf:2008&#34;</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">content</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">content</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">//    création de la soumission
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">DMPCSoumission</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">DMPCDocument</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">soumission</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">DMPCSoumission</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">documents</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">List</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">of</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">title</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Soumission du document&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">comments</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Commentaire de la soumission&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">patient</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">patient</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">contentType</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;04&#34;</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">//   envoi de la soumission
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">TD21Response</span> <span style="color:#000">td21Response</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">td21SubmitDocuments</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">TD21Request</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">soumission</span><span style="color:#ce5c00;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span><span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Soumission enregistré avec l&#39;uuid :&#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">td21Response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getSoumission</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">getUuid</span><span style="color:#ce5c00;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">td21Response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getSoumission</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">getDocuments</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">forEach</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">submitted</span> <span style="color:#ce5c00;font-weight:bold">-&gt;</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">DMPCDocument</span> <span style="color:#000">submittedDocument</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCDocument</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#000">submitted</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">String</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">format</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Contenant le document ayant pour uniqueId : %s et uuid : %s&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">submittedDocument</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getUniqueId</span><span style="color:#ce5c00;font-weight:bold">(),</span> <span style="color:#000">submittedDocument</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getEntryUuid</span><span style="color:#ce5c00;font-weight:bold">()));</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">});</span>
</span></span></code></pre></div><p>Pour une soumission de plusieurs documents, il suffit d&rsquo;ajouter les documents à la soumission :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">submission</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">addDocument</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">document1</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">submission</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">addDocument</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">document2</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span></code></pre></div><h4 id="en-rest-">En REST :</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#a40000">curl</span> <span style="color:#a40000">--location</span> <span style="color:#a40000">--request</span> <span style="color:#a40000">POST</span> <span style="color:#a40000">&#39;http:</span><span style="color:#8f5902;font-style:italic">//localhost:9999/dmp/td21SubmitDocuments&#39; \
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#a40000">--data-raw</span> <span style="color:#a40000">&#39;</span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;context&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a40000">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;request&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;submission&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;title&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Titre de la soumission&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;comments&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Soumission via Postman&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;contentType&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;04&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;patient&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;matriculeINS&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;279035121518989&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;identifiantSysteme&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1.2.250.1.213.1.4.10&#34;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;internalId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;67890&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;prenom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;DOMINIQUE&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;nomUsuel&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;pat-trois&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;dateDeNaissance&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;19790328&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;ordreDeNaissance&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;sexe&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;F&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;documents&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;auteurs&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[],</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;classCode&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;11&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;comments&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Document soumis via Postman&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;confidentialities&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#4e9a06">&#34;N&#34;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;content&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;UmFwcGVsIGNsaW5pcXVlIDogSWwgcydhZ2l0IGQndW4gaG9tbWUgZGUgNTMgYW5zLCAKcHLDqXNlbnRhbnQgdW4gbmFldnVzIGRlIGxhIGZhY2UgaW50ZXJuZSBkZSBsYSBjdWlzc2UgZ2F1Y2hlIGRlIDcgbW0gZGUgZ3JhbmQgYXhlIGVudmlyb24uIApEw6ljaXNpb24gZCdleMOpcsOoc2Ugc291cyBhbmVzdGjDqXNpZSBsb2NhbGUuIAoKSW50ZXJ2ZW50aW9uIDogRVhFUkVTRSBEJ1VOIE5BRVZVUyBERSBMQSBDVUlTU0UgR0FVQ0hFIApTb3VzIGFuZXN0aMOpc2llIGxvY2FsZSDDoCBsYSBYeWxvY2HDr25lIMOgIDEgJSBub24gYWRyw6luYWxpbsOpZS4gCgpJbmNpc2lvbiBjZW50csOpZSBzdXIgbGEgbMOpc2lvbiBwZXJtZXR0YW50IGwnZXjDqXLDqHNlIGR1IG5hZXZ1cyBkYW5zIHNhIHRvdGFsaXTDqS4gCkZlcm1ldHVyZSBjdXRhbsOpZSBlbiB1biBwbGFuIGRlIEZsZXhvY3JpbiAzLzAuICAKCkVYQU1FTiBISVNUT0xPR0lPVUUgVW5lIGzDqXNpb24gcG9seXBvw69kZSBkZSAxIHggMCw3IGNtIGEgw6l0w6kgY29tbXVuaXF1w6llLiAKT24gcmV0cm91dmUgYXUgcGxhbiBoaXN0b2xvZ2lxdWUgdW5lIGzDqXNpb24gdW4gcGV1IHZlcnJ1cXVldXNlLCAKY29tcG9ydGFudCB1bmUgcHJvbGlmw6lyYXRpb24gY2VsbHVsYWlyZSBuYWV2aXF1ZSDDqXBhcmduYW50IGwnw6lwaWTDqW1pZSwgCnNvdXMgZm9ybWUgZGUgdGjDqHF1ZXMgZW4gc3VyZmFjZSwgYXZlYyBxdWVscXVlcyBkw6lww7R0cyBkZSBtw6lsYW5pbmUsIAphc3NvY2nDqWUgw6AgdW4gZ3JhZGllbnQgZGUgbWF0dXJhdGlvbiB0csOocyBuZXQgdmVycyBsYSBwcm9mb25kZXVyLiAKCk9uIG5lIHJldHJvdXZlIHBhcyBkJ2F0eXBpZSBudWNsw6lvY3l0b3BsYXNtaXF1ZS4gCgpDT05DTFVTSU9OIE5BRVZVUyBERVJNSVFVRSBERVZFTE9QUEUgU1VSIFVOIE1PREUgRVhPUEhZVElRVUUgLiAKTEVTIExJTUlURVMgRCdFWEVSRVNFIFNPTlQgU0FJTkVTLiA=&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;creationTime&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;20200928120000&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;events&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;code&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;H33&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;codingScheme&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2.16.840.1.113883.6.3&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;displayName&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Décollement et déchirement de la rétine&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;format&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;urn:ihe:iti:xds-sd:text:2008&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;legalAuthenticator&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;internalId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;123456&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;nom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;MED-CS RPPS0029614&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;prenom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;ANNE&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;role&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;10&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;secteurActivite&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;SA05&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;specialite&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;G15_10/SM26&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;structureSante&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;nom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;CENTRE DE SANTE RPPS15683&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;idNational&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;10B0156832&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;patient&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;matriculeINS&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;279035121518989&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;identifiantSysteme&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1.2.250.1.213.1.4.10&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;prenom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;DOMINIQUE&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;nomUsuel&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;pat-trois&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;internalId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;67890&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;dateDeNaissance&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;19790328&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;ordreDeNaissance&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;sexe&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;F&#34;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;practiceSetting&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;AMBULATOIRE&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;serviceStartTime&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;20200928080000&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;serviceStopTime&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;20200928080000&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;title&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Titre du document&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;type&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;11488-4&#34;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h3 id="td31--depuis-version-32">TD3.1 : (depuis version 3.2)</h3>
<p>Il est possible de faire des recherches de document ainsi que des recherches des documentation</p>
<h3 id="td31b--rechercher-lidentifiant-technique-dun-document-depuis-version-30">TD3.1b : rechercher l&rsquo;identifiant technique d&rsquo;un document (depuis version 3.0)</h3>
<p>Cette fonctionnalité permet, aux LPS qui n&rsquo;implémentent pas DMP_3.1a, de rechercher l&rsquo;identifiant technique d&rsquo;un document (dans le système DMP) à partir de l&rsquo;identifiant local au LPS de ce document.
Le LPS peut ensuite supprimer (DMP_3.3c), archiver (DMP_3.3d) ou remplacer un document dans le DMP du patient (DMP_2.1/2.2b).</p>
<h4 id="en-java--1">En java :</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">String</span> <span style="color:#000">previousDocumentUniqueId</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#ce5c00;font-weight:bold">...;</span> <span style="color:#8f5902;font-style:italic">// uniqueId d&#39;un document envoyé précédemment dans le DMP 
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">TD31bRequest</span> <span style="color:#000">td31bRequest</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">TD31bRequest</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#000">td31bRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setDocumentUniqueId</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">previousDocumentUniqueId</span><span style="color:#ce5c00;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span><span style="color:#000">td31bRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setIns</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">patient</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getIns</span><span style="color:#ce5c00;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span><span style="color:#000">TD31bResponse</span> <span style="color:#000">response</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">td31bGetDocumentEntry</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">td31bRequest</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// uuid du document courant stocké dans le DMP
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">String</span> <span style="color:#000">documentCurrentUuid</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getDocumentUuid</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// permet le remplacement de document avec une td21submit document ou encore une td33cUnpublished.
</span></span></span></code></pre></div><h4 id="en-rest--1">En REST :</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#a40000">curl</span> <span style="color:#a40000">--location</span> <span style="color:#a40000">--request</span> <span style="color:#a40000">POST</span> <span style="color:#a40000">&#39;http:</span><span style="color:#8f5902;font-style:italic">//localhost:9999/dmp/td31bGetDocumentEntry&#39; \
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#a40000">--data-raw</span> <span style="color:#a40000">&#39;</span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;context&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a40000">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;request&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;matriculeINS&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;279035121518989&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;identifiantSysteme&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1.2.250.1.213.1.4.10&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;documentUniqueId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1.2.250.1.287.1.1669713300686.1.16709290066422&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span><span style="color:#a40000">&#39;</span>
</span></span></code></pre></div><p>La réponse est : </p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;documentUuid&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;ff38b3da-3ded-4b90-b30e-744a4dc907d8&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h3 id="remplacement">Remplacement</h3>
<p>Le remplacement est possible suite à la recherche TD3.1b. Il suffit de préciser l&rsquo;<code>entryUUID</code> et le <code>uniqueId</code> du document à remplacer.</p>
<p>Exemple de remplacement de document après recherche dans le DMP :</p>
<h4 id="en-java--2">En java :</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// récupération du uuid du document courant dans le DMP
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">TD31bRequest</span> <span style="color:#000">td31bRequest</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">TD31bRequest</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#000">td31bRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setDocumentUniqueId</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">uniqueIdDuDocumentAremplacer</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">td31bRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setIns</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">patient</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getIns</span><span style="color:#ce5c00;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span><span style="color:#000">TD31bResponse</span> <span style="color:#000">td31bresponse</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">td31bGetDocumentEntry</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">td31bRequest</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// création de la soummission pour le remplacement
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">DMPCSubmission</span> <span style="color:#000">submissionRemplace</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#ce5c00;font-weight:bold">...;</span>
</span></span><span style="display:flex;"><span><span style="color:#000">DMPCDocument</span> <span style="color:#000">documentRemplace</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#ce5c00;font-weight:bold">...;</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// ajout des informations de remplacement dans le document qui remplace
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">documentRemplace</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setReplacementOf</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">td31bresponse</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getDocumentUuid</span><span style="color:#ce5c00;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span><span style="color:#000">documentRemplace</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setReplacementOfUniqueId</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">documentE</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getUniqueId</span><span style="color:#ce5c00;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span><span style="color:#000">submissionRemplace</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setTitle</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;remplacement du document E&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// envoie de la soummission
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">td21SubmitDocuments</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">TD21Request</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">submissionRemplaceE</span><span style="color:#ce5c00;font-weight:bold">));</span>
</span></span></code></pre></div><h4 id="en-rest">En REST</h4>
<p>il suffit de renseigner les champs replacementOf, et replacementOfUniqueId dans le document qui remplace :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#a40000">curl</span> <span style="color:#a40000">--location</span> <span style="color:#a40000">--request</span> <span style="color:#a40000">POST</span> <span style="color:#a40000">&#39;http:</span><span style="color:#8f5902;font-style:italic">//localhost:9999/dmp/td21SubmitDocuments&#39; \
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#a40000">--data-raw</span> <span style="color:#a40000">&#39;</span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;context&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a40000">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;request&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;submission&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>           <span style="color:#a40000">...</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;documents&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#a40000">...</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;replacementOf&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;ff38b3da-3ded-4b90-b30e-744a4dc907d8&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;replacementOfUniqueId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1.2.250.1.287.1.1669713300686.1.16709290066422&#34;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h3 id="td33c--supprimer-un-document-depuis-version-10">TD33c : Supprimer un document (depuis version 1.0)</h3>
<p>Cette fonctionnalité permet à l&rsquo;utilisateur de supprimer un document dans le DMP d&rsquo;un patient.
La cinématique générale est la suivante :</p>
<ul>
<li>L&rsquo;utilisateur indique qu&rsquo;il souhaite supprimer le document sélectionné.</li>
<li>L&rsquo;utilisateur confirme l&rsquo;action demandée.</li>
<li>Le LPS envoie une requête de mise à jour des attributs d&rsquo;un document au système DMP</li>
</ul>
<p>Exemple :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">TD33CRequest</span> <span style="color:#000">td33cRequest</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">TD33CRequest</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#000">td33cRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setDocumentUuid</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">uniqueIdDuDocumentASupprimer</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">td33cRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setIns</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">patient</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getIns</span><span style="color:#ce5c00;font-weight:bold">());</span> 
</span></span><span style="display:flex;"><span><span style="color:#000">td33cRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setContentType</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">contentTypeDuDocumentASupprimer</span><span style="color:#ce5c00;font-weight:bold">);</span> <span style="color:#8f5902;font-style:italic">// le contentType est le même que pour une soumission de document.
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">td33cUnpublished</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">td33cRequest</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span></code></pre></div><h2 id="gestion-du-bris-de-glace">Gestion du Bris de Glace</h2>
<p>Lorsque l&rsquo;utilisateur a besoin de consulter le DMP d&rsquo;un patient en cas d&rsquo;urgence, sans avoir la possibilité de lui demander son autorisation, au lieu de se déclarer autorisé à accéder au dossier par le patient, il dispose de la possibilité d&rsquo;accéder au dossier en mode « bris de glace ».</p>
<p>Dans l&rsquo;api cela se traduit par une modification du Contexte :</p>
<p>En Java :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">DMPCContext</span> <span style="color:#000">context</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#ce5c00;font-weight:bold">...</span>
</span></span><span style="display:flex;"><span><span style="color:#000">DMPCModeAcces</span> <span style="color:#000">modeAcces</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">DMPCModeAcces</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#000">modeAcces</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setAcces</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCModeAcces</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">ModeAcces</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">BRIS_DE_GLACE</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">modeAcces</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setRaison</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Accès en urgence&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setModeAcces</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">modeAcces</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span></code></pre></div><p>En REST :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;context&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;author&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a40000">...</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;modeAcces&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;acces&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;BRIS_DE_GLACE&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;raison&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Accès en urgence&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;request&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a40000">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h2 id="gestion-de-la-connexion-secrète">Gestion de la connexion secrète</h2>
<p>L&rsquo;exigence EX_0.1-1100 :</p>
<blockquote>
<p>Le LPS doit permettre à l&rsquo;utilisateur de mettre en oeuvre une connexion secrète pour les mineurs, en concertation avec son patient. Cf. donnée confidentiality-code dans le VIHF.
Les modalités de mise en oeuvre : détermination de l&rsquo;âge (cf. exigence EX_GEN-1550 au § 3.1.3) et proposition systématique, choix utilisateur,… devront être précisées par l&rsquo;éditeur lors de son passage en homologation.</p>
</blockquote>
<p>La décision de la mise en place de la connexion secrète est laissée à l&rsquo;intégrateur. Dans le càs où, l&rsquo;application veut déclarer la connexion secrète, il suffit d&rsquo;ajouter le code de confidentialité <code>INVISIBLE_REPRESENTANTS_LEGAUX</code> dans le contexte :</p>
<p>EN java :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">DMPCContext</span> <span style="color:#000">context</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#ce5c00;font-weight:bold">...</span>
</span></span><span style="display:flex;"><span><span style="color:#000">DMPCCode</span> <span style="color:#000">code</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCodesFor</span><span style="color:#ce5c00;font-weight:bold">((</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">JeuxValeursDMP</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">RESTRICTION_AUDIENCE_VIHF</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">stream</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">filter</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">dmpcCode</span> <span style="color:#ce5c00;font-weight:bold">-&gt;</span> <span style="color:#000">dmpcCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCode</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">equals</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;INVISIBLE_REPRESENTANTS_LEGAUX&#34;</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">findFirst</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">get</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setConfidentialityCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">code</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span></code></pre></div><p>En REST :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;context&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;author&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a40000">...</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;confidentialityCode&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;INVISIBLE_REPRESENTANTS_LEGAUX&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;identifiantNomenclature&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1.2.250.1.213.1.1.4.13&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;libelle&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Non visible par les représentants légaux du patient&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;request&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a40000">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><blockquote>
<p>ATTENTION : Ne pas confondre la connexion secrète et la soumission de documents à visibilité réduite comme <code>INVISIBLE_REPRESENTANTS_LEGAUX</code>, <code>INVISIBLE_PATIENT</code>, ou encore <code>MASQUE_PS</code>. Il s&rsquo;agit dans ce cas de spécifier un code de confidentialité spécifique au document. Ces codes sont disponibles dans la nomenclature <code>DMPCCode.JeuxValeursDMP.CONFIDENTIALITY_CODE</code></p>
</blockquote>

	
	
	
</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="www.devbox-sante.fr" aria-label="www.devbox-sante.fr">
    <a class="text-white" target="_blank" rel="noopener" href="https://www.devbox-sante.fr" aria-label="www.devbox-sante.fr">
      <i class="icon iconFoot icon-devbox"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="BitBucket" aria-label="BitBucket">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/google/docsy" aria-label="BitBucket">
      <i class="fab fa-bitbucket"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Contactez-nous" aria-label="Contactez-nous">
    <a class="text-white" target="_blank" rel="noopener" href="mailto://devbox-sante@devcoop.fr" aria-label="Contactez-nous">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2023 DevBox Santé Tous droits réservés</small>
        <small class="ml-1"><a href="https://www.devbox-sante.fr/mentions" target="_blank" rel="noopener">Politique de confidentialité</a></small>
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
  <script src='/js/deflate.js'></script>
<script src="/js/main.min.d6689e66e94757874459ff899c857f7b4685d2837186c2efd9b3620fd738899f.js" integrity="sha256-1mieZulHV4dEWf&#43;JnIV/e0aF0oNxhsLv2bNiD9c4iZ8=" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.104.2" />
<link rel="canonical" type="text/html" href="/dmp/">
<link rel="alternate" type="application/rss&#43;xml" href="/dmp/index.xml">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>DMP | DevBox-Santé</title>
<meta name="description" content="Le DMP intégré aux LPS
">
<meta property="og:title" content="DMP" />
<meta property="og:description" content="Le DMP intégré aux LPS
" />
<meta property="og:type" content="website" />
<meta property="og:url" content="/dmp/" /><meta property="og:site_name" content="DevBox-Santé" />

<meta itemprop="name" content="DMP">
<meta itemprop="description" content="Le DMP intégré aux LPS
"><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="DMP"/>
<meta name="twitter:description" content="Le DMP intégré aux LPS
"/>




<link rel="preload" href="/scss/main.min.633244ef1c2fb3aa12f15e8dfea092f63629f4a4ce9c183b387081511d6d3dd9.css" as="style">
<link href="/scss/main.min.633244ef1c2fb3aa12f15e8dfea092f63629f4a4ce9c183b387081511d6d3dd9.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK"
  crossorigin="anonymous"></script>
<link rel="stylesheet" href="/css/devbox-sante.css" type="text/css">

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-39129192-3', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  </head>
  <body class="td-section">
    <header>
      <nav
  class="js-navbar-scroll navbar navbar-expand navbar-dark  flex-column flex-md-row td-navbar">
  <a class="navbar-brand" href="/"><span class="navbar-logo"><svg id="Composant_16_14" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 132.5 118.9" style="enable-background:new 0 0 132.5 118.9"><style>.st0{fill:url(#SVGID_1_)}.st1{fill:#fff}.st2{fill:url(#SVGID_2_)}.st3{fill:url(#SVGID_3_)}.st4{fill:#d34a3c}.st5{fill:none;stroke:#fff;stroke-width:6}</style><g id="Rectangle_69" transform="translate(65.996 38.892)"><linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="-44.4861" y1="64.4079" x2="-45.1313" y2="65.2243" gradientTransform="matrix(66.506 0 0 -66.507 3013.5039 4344.1382)"><stop offset="0" style="stop-color:#7613E0"/><stop offset="1" style="stop-color:#9F57ED"/></linearGradient><path class="st0" d="M23.3 3.8h19.9c10.7.0 19.4 8.7 19.4 19.4v19.9c0 10.7-8.7 19.4-19.4 19.4H23.3c-10.7.0-19.4-8.7-19.4-19.4V23.2C3.9 12.5 12.6 3.8 23.3 3.8z"/><g><path class="st1" d="M44.5 66.5H22c-12.1.0-22-9.9-22-22V22C0 9.9 9.9.0 22 0h22.5c12.1.0 22 9.9 22 22v22.5c0 12.1-9.9 22-22 22zM22 6C13.2 6 6 13.2 6 22v22.5c0 8.8 7.2 16 16 16h22.5c8.8.0 16-7.2 16-16V22c0-8.8-7.2-16-16-16H22z"/></g></g><g id="Rectangle_70" transform="translate(110.109) rotate(90)"><linearGradient id="SVGID_2_" gradientUnits="userSpaceOnUse" x1="103.5653" y1="89.1427" x2="104.2366" y2="89.9162" gradientTransform="matrix(0 -66.506 -66.507 0 5940.3726 6895.6235)"><stop offset="0" style="stop-color:#67ED9A"/><stop offset="1" style="stop-color:#4AC87A"/></linearGradient><path class="st2" d="M23 1.5h21.5c11.6.0 21 9.4 21 21V44c0 11.6-9.4 21-21 21H23C11.4 65 2 55.6 2 44V22.5c0-11.6 9.4-21 21-21z"/><g><path class="st1" d="M66.5 22v22.5c0 12.1-9.9 22-22 22H22c-12.1.0-22-9.9-22-22V22C0 9.9 9.9.0 22 0h22.5c12.1.0 22 9.9 22 22zM6 44.5c0 8.8 7.2 16 16 16h22.5c8.8.0 16-7.2 16-16V22c0-8.8-7.2-16-16-16H22C13.2 6 6 13.2 6 22V44.5z"/></g></g><g id="Rectangle_71" transform="translate(88.714 52.366) rotate(90)"><linearGradient id="SVGID_3_" gradientUnits="userSpaceOnUse" x1="50.3774" y1="67.1362" x2="49.7677" y2="66.2039" gradientTransform="matrix(0 -66.506 -66.507 0 4517.4551 3412.9705)"><stop offset="0" style="stop-color:#FFA800"/><stop offset="1" style="stop-color:#FFC24D"/></linearGradient><path class="st3" d="M22.8 2.3h21c11.3.0 20.5 9.2 20.5 20.5v21c0 11.3-9.2 20.5-20.5 20.5h-21c-11.3.0-20.5-9.2-20.5-20.5v-21C2.3 11.4 11.4 2.3 22.8 2.3z"/><g><path class="st1" d="M66.5 22v22.5c0 12.1-9.9 22-22 22H22c-12.1.0-22-9.9-22-22V22C0 9.9 9.9.0 22 0h22.5c12.1.0 22 9.9 22 22zM6 44.5c0 8.8 7.2 16 16 16h22.5c8.8.0 16-7.2 16-16V22c0-8.8-7.2-16-16-16H22C13.2 6 6 13.2 6 22V44.5z"/></g></g><g id="Rectangle_72" transform="translate(66.506 13.481) rotate(90)"><g><path class="st4" d="M23 1.5h21.5c11.6.0 21 9.4 21 21V44c0 11.6-9.4 21-21 21H23C11.4 65 2 55.6 2 44V22.5c0-11.6 9.4-21 21-21z"/></g><path class="st5" d="M22 3h22.5c10.5.0 19 8.5 19 19v22.5c0 10.5-8.5 19-19 19H22c-10.5.0-19-8.5-19-19V22C3 11.5 11.5 3 22 3z"/></g></svg></span><span class="font-weight-bold">DevBox-Santé</span></a>
  <div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
    <ul class="navbar-nav mt-2 mt-lg-0">
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link active" href="/dmp/"><i class='icon iconNav icon-dmp'></i><span class="active">DMP</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="/insi/"><i class='icon iconNav icon-ins'></i><span>INSi</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="/ms-sante/"><i class='icon iconNav icon-mssante'></i><span>MSS</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="/cps/"><i class='icon iconNav icon-cps-puce'></i><span>CPS</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="/vitale/"><i class='icon iconNav icon-sesam-puce'></i><span>Vitale</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="/annuaire/"><i class='icon iconNav icon-directory'></i><span>Annuaire</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="/installer/"><i class='icon icon-devbox'></i><span>Installation</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="/blog/"><i class='fa fa-blog'></i><span>Blog</span></a>
      </li>
      </ul>
  </div>
  <div class="navbar-nav d-none d-lg-block">
    
  </div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
Version imprimable multipages.
<a href="#" onclick="print();return false;">Cliquer ici pour imprimer</a>.
</p><p>
<a href="/dmp/">Retour à la version par défaut</a>.
</p>
</div>



<h1 class="title">DMP</h1>
<div class="lead">Le DMP intégré aux LPS</div>




    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-abd362f4095082aaec335af8414f8a05">Embedded : Premier Pas</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2: <a href="#pg-885451189c2b211bbc27974c7d9b1e15">REST Proxy</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>3: <a href="#pg-61f815dca99e5331feb1492256c2f552">Authentifications</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>3.1: <a href="#pg-503c7dfdd96cf54760e889c55a051649">Authentification Indirecte (via certificat serveur)</a></li>


    
  
    
    
	
<li>3.2: <a href="#pg-6d6c8b8e684c01c99c5db21252d05d31">Authentification Directe (via carte CPx)</a></li>


    
  
    
    
	
<li>3.3: <a href="#pg-0e5141253e9794140ce5c4d6e45154ef">Authentification Directe via le CPS Agent</a></li>


    
  
    
    
	
<li>3.4: <a href="#pg-bb804dd8fedafc280945278a93a3c46d">Authentification Directe via OLAQIN TAAS (Terminal As A Service)</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>4: <a href="#pg-d3a57d7b24592da862f5b3239be058bb">Structuration des documents</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>4.1: <a href="#pg-8f81b371012d0ab0acef8eba3d204ac6">Volet CDA structuration minimale</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>4.2: <a href="#pg-00acedff0c515c2832231418be77b605">Volet Compte rendu d&#39;examens de biologie</a></li>


    
  
    
    
	
<li>4.3: <a href="#pg-7209da8360d7e08721a383f6264829de">Vaccinations : Note et Historiques</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>4.4: <a href="#pg-da13bc028f9c0bfbdd94acfeef6d83d6">Votre volet CDA</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>4.5: <a href="#pg-e7bda94fe63e5211e3398cca290743ef">CDA autoprésentable</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>5: <a href="#pg-ddc5af5eaf3e7d26cd2868ea3caf8950">Configuration</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>6: <a href="#pg-1896b5f02160c1af082ba091c22ecba1">Howtos</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>6.1: <a href="#pg-9b74348bb827fc0660b4ba571dc86437">Migrations</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>6.1.1: <a href="#pg-6710e3281519b88ee2aa5944e262c072">Migration 4.7 vers la 5.0</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>6.2: <a href="#pg-f735462b8d0ff314fe0254e1f86e8d07">Transactions supportées</a></li>


    
  
    
    
	
<li>6.3: <a href="#pg-5f5395f9ebb771d835f469de1c78beaa">Différents environnements du DMP</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>6.4: <a href="#pg-9541efc6c6fadf578bd308752f785e9b">Integrateurs checklist</a></li>


    
  
    
    
	
<li>6.5: <a href="#pg-8b8e215b0b4cbdb8f1420baec42100c4">Passage de l&#39;homologation</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>6.6: <a href="#pg-0f6a8b8e81b29a55c0237a0114578bf4">Gestion des certificats</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>6.7: <a href="#pg-de03b1ff0ff2188a68d5d13f0a8489ec">Schematron</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>6.8: <a href="#pg-5108f66151c5bdb9b3237f215debe81d">Démo Stellair</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>6.9: <a href="#pg-c2f2ade9ada5510eda41ad4f98eefc3b">UniqueIdGenerator</a></li>


    
  
    
    
	
<li>6.10: <a href="#pg-19c3ebeab867e0a03ad82e20cb9db692">CNDA : Fiche d&#39;identité du composant DMP</a></li>


    
  
    
    
	
<li>6.11: <a href="#pg-6b9c62d7feaf9fcc9d33c8f6b0be34a8">FAQ</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>7: <a href="#pg-64d3be6d24d50e4a4f7033d2c071a34f">Architecture interne des différents composants</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>8: <a href="#pg-69ab6ec9377fd03e3abc3d45e2fee590">Versions</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>9: <a href="#pg-482b0512e4c9a4797a314eeb3121c84a">DMP UI</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>


<div class="content">
      <p>La DevBox-santé DMP est une api Java dont tous les composants sont injectables dans un environnement SpringFramework. 
Elle suit le guide d&rsquo;intégration définit par le GIE SESAM-Vitale : <a href="https://www.sesam-vitale.fr/documents/20182/54758/SEL-MP-037+DMPi.pdf">https://www.sesam-vitale.fr/documents/20182/54758/SEL-MP-037+DMPi.pdf</a></p>
<p>Ces composants sont tous basés sur des librairies de l&rsquo;opensource comme Joda-time, Log4j, Apache Santuario, Apache CXF… .</p>
<ul>
<li>La DMPC-API proposé est un projet github public : <a href="https://bitbucket.com/devbox-sante/dmpc-api">https://bitbucket.com/devbox-sante/dmpc-api</a></li>
</ul>
<h2 id="connecteur-ou-api-embarquée">Connecteur ou API embarquée</h2>

</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-abd362f4095082aaec335af8414f8a05">1 - Embedded : Premier Pas</h1>
    <div class="lead">Intégrer directement dans votre application spring-boot</div>
	

<div class="pageinfo pageinfo-primary">
<p>Un projet de démonstration d&rsquo;utilisation de la DevBox-santé DMP en mode embedded se trouve : <a href="https://bitbucket.org/devbox-sante/dmpc-demo">https://bitbucket.org/devbox-sante/dmpc-demo</a></p>

</div>

<h2 id="installer">Installer</h2>
<p>l&rsquo;utilisation de cette API ne nécessite pas d&rsquo;installation. Il suffit d&rsquo;ajouter les dépendances adequates dans votre projet Maven / Gradle.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&lt;dependencies&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&lt;groupId&gt;</span>fr.devboxsante.dmp<span style="color:#204a87;font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&lt;artifactId&gt;</span>dmp-api<span style="color:#204a87;font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&lt;version&gt;</span>${dmp-api.version}<span style="color:#204a87;font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&lt;groupId&gt;</span>fr.devboxsante.dmp<span style="color:#204a87;font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&lt;artifactId&gt;</span>dmp-client-impl<span style="color:#204a87;font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&lt;version&gt;</span>${dmp.version}<span style="color:#204a87;font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&lt;/dependency&gt;</span>
</span></span></code></pre></div><h2 id="écrire-votre-première-intégration">Écrire votre première intégration</h2>
<h3 id="initialisation-du-client">Initialisation du client</h3>
<p>La DevBox-Santé DMP est une application spring, pour obtenir un client DMP, il faut
injecter dans l&rsquo;application la classe implémentant l&rsquo;interface <code>DMPCClient</code>
par les mécanismes CDI de spring.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@Component</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">MonComposantDMP</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Autowired</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#000">DMPCClient</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><h3 id="une-méthode-dans-le-composant">Une méthode dans le composant</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// Initialisation d&#39;un PS auteur des différentes transactions
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">DMPCAuthor</span> <span style="color:#000">ps1</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">DMPCAuthor</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;1234&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;Dupont&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;Pierre&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">ps1</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setRole</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Médecin&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">ps1</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setStructureNom</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Clinique du beau Soleil&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// Test d&#39;existence (recherche) d&#39;un patient
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">DMPCPatient</span> <span style="color:#000">patient</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">td02Exist</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">TD02Request</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;0404312364978044945679&#34;</span><span style="color:#ce5c00;font-weight:bold">)).</span><span style="color:#c4a000">getPatient</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// Initialisation d&#39;un document à soumettre au DMP
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">DMPCDocument</span> <span style="color:#000">document</span> <span style="color:#ce5c00;font-weight:bold">=</span>  <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">DMPCDocument</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setTitle</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Titre du document concernant l&#39;hépatite virale&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setContent</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Contenu textuel&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">addEvent</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;B18&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;2.16.840.1.113883.6.3&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;Hépatite virale chronique&#34;</span><span style="color:#ce5c00;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span><span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setFormat</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCodesFor</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">ANSJeuxValeurs</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">FORMAT_CODE</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">get</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">1</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">getCode</span><span style="color:#ce5c00;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// …
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// Création de l&#39;enveloppe de soumission
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">DMPCSubmission</span> <span style="color:#000">submission</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">DMPCSubmission</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#000">submission</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">addDocument</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">submission</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setPatient</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">patient</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// Envoi vers le DMP de la soumission.
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">TD21Response</span> <span style="color:#000">td21Response</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">td21SubmitDocuments</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">TD21Request</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">submission</span><span style="color:#ce5c00;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span><span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Soumission enregistré avec l&#39;uuid :&#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">td21Response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getSubmission</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">getUuid</span><span style="color:#ce5c00;font-weight:bold">());</span>
</span></span></code></pre></div><p>Diagrammme de séquences correspondant</p>
<pre tabindex="0"><code class="language-plantuml" data-lang="plantuml">!include https://bitbucket.org/devbox-sante/plantuml/raw/current/themes/theme-devbox-sante.puml

== Initialisation ==
DMPCClient -&gt; DMPCClient : readCertificates
DMPCClient -&gt; DMPCClient : generate VIHF
DMPCClient -&gt; DMP: init TLS connexion(securise)

== Test d&#39;existence ==
DMPCClient -&gt; DMP : td02Exist(&#34;279035121518989&#34;)
DMP --&gt; DMPCClient : retourne un patient
== Soumission ==
DMPCClient -&gt; DMP : td21SubmitDocuments(new Document(&#34;hepatite virale&#34;)
DMP --&gt; DMPCClient : acknowledge
</code></pre><h3 id="les-différents-objets-du-modèle">Les différents objets du modèle</h3>
<p>Afin de transmettre les métadonnées nécessaires aux DMP pendant les différentes
transactions, la DevBox-Santé DMP contient un modèle métier dont les classes principales suivantes :</p>
<ul>
<li><code>DMPCCode</code></li>
<li><code>DMPCPersonnelSante</code></li>
<li><code>DMPCPatient</code></li>
<li><code>DMPCDocument</code></li>
<li><code>DMPCSubmission</code></li>
</ul>
<h5 id="dmpccode">DMPCCode</h5>
<p>Un <code>DMPCCode</code> est la structure de base pour toute codification.
Une fois un <code>DMPCClient</code> initialisé, il est possible d&rsquo;obtenir toutes les
nomenclatures standard depuis l&rsquo;enum <code>DMPCCode.ANSJeuxValeurs</code>.</p>
<p>Exemple de récupération d&rsquo;un DMPCCode :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// Je m&#39;intéresse à la nomenclature SubjectRole
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#000">List</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">roles</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCodesFor</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">ANSJeuxValeurs</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">SUBJECT_ROLE</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// liste de tous les codes SubjetRole
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#204a87;font-weight:bold">for</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCCode</span> <span style="color:#000">role</span> <span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000">roles</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;role :&#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">role</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><h3 id="initialisation-du-contexte">Initialisation du contexte</h3>
<p>L&rsquo;API étant stateless un contexte doit être rappelé pour chaque transaction vers le DMP.
Un contexte peut être définit de la manière suivante :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">DMPCContext</span> <span style="color:#000">context</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">DMPCContext</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#000">DMPCPersonnelSante</span> <span style="color:#000">ps1</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#8f5902;font-style:italic">// initialisation d&#39;un personnel de santé responsable de la transaction vers le DMP
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setAuthor</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">ps1</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span></code></pre></div><p>Exemple d&rsquo;utilisation du contexte dans le cadre d&rsquo;un test d&rsquo;existence</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">td02Exist</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">TD02Request</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">patient</span><span style="color:#ce5c00;font-weight:bold">));</span>
</span></span></code></pre></div><h5 id="transactions">Transactions</h5>
<p>L&rsquo;ensemble des transactions sont décrites dans le document <a href="/dmp/howtos/transactions">transactions</a></p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-885451189c2b211bbc27974c7d9b1e15">2 - REST Proxy</h1>
    <div class="lead">Les transactions du DMP en mode REST</div>
	<p>Le proxy REST embarque l&rsquo;API java dans une application REST spring-boot, elle accepte des requetes simples JSON et les retransmet 
au DMP dans le bon formalisme et dans le respect des différentes transactions,  il interprète les réponses du serveur DMP et les retourne au client initial dans
un formalisme simplifié.</p>
<h3 id="intégration-sur-un-environnement-de-démonstration">Intégration sur un environnement de démonstration</h3>
<p>Vous pouvez commencer à intégrer la DevBox-Santé DMP depuis l&rsquo;environnement de démonstration.</p>
<p>Pour cela vous pouvez :</p>
<ul>
<li>
<p>consulter toute la documentation depuis l’environnement de démonstration <a href="https://dmpc-demo.devbox-sante.fr/swagger-ui.html">REST de l&rsquo;API</a></p>
</li>
<li>
<p>essayer avec une collection postman :</p>
<p><a target="_blank" href="https://www.postman.com/universal-satellite-657415/workspace/devbox-sante-exemples/overview"><img alt="Run In postman" src="https://run.pstmn.io/button.svg"></a></p>
</li>
</ul>
<blockquote>
<p>Attention : seule l&rsquo;authentification indirecte est supportée dans un environnement cloud.</p>
</blockquote>
<h3 id="déploiement-avec-un-java-runtime-environnement">Déploiement avec un Java Runtime Environnement</h3>
<p>Pour démarrer le serveur, depuis une ligne de commande exécuter :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>java -Dspring.config.location<span style="color:#ce5c00;font-weight:bold">=</span>application.yml -jar dmpc-proxy-rest.jar
</span></span></code></pre></div><p>Au lancement du serveur est chargé un fichier de configuration <code>application.yml</code> permettant de 
charger différents KeyStore les informations concernant le LPS et le serveur DMP.
Il est initialisé par défaut sur un environnement de test.</p>
<p>Une fois démarré, le serveur est accessible à l&rsquo;url suivante : <a href="http://127.0.0.1:8080/proxy">http://127.0.0.1:8080/proxy</a></p>
<p>Pour obtenir, le schéma Swagger : <a href="http://127.0.0.1:8080/swagger-ui.html">http://127.0.0.1:8080/swagger-ui.html</a></p>
<p><img src="./dmpcProxyRest-SwaggerUI.png" alt="Exemple schéma Swagger pour la DevBox-Santé DMP en mode REST"></p>
<h3 id="intégration--dune-image-docker">Intégration  d&rsquo;une image docker</h3>
<p>Une page de documentation dédié : <a href="installer/docker">Docker</a></p>
<h3 id="utilisation-de-linstaller-devbox-santé">Utilisation de l&rsquo;installer DevBox-Santé</h3>
<p>Une page de documentation dédié : <a href="installer/poste_client">poste_client</a></p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-61f815dca99e5331feb1492256c2f552">3 - Authentifications</h1>
    <div class="lead">Les différentes mécanismes d&rsquo;authentifications et architectures possibles avec le DMP</div>
	<h2 id="introduction">Introduction</h2>
<p>Une des difficultés d&rsquo;intégration avec le DMP consiste à établir une connexion SSL (TLS) en authentification <strong>mutuelle</strong> avec le DMP.
Contrairement aux connexions SSL classiques que nous pouvons avoir avec n&rsquo;importe quel site, non seulement le DMP doit prouver son identité mais aussi le client qui s&rsquo;y connecte.</p>
<p>Cela signifie que l&rsquo;opération Certificate Verify dans le schéma doit être réalisé :</p>
<p><img src="SSL_authentification_mutuelle.png" alt="SSL_authentification_mutuelle"></p>
<p>Cette étape consiste à ce que le client signe un handshake provenant du serveur avec une clé privé provenant d&rsquo;une IGC (Infrastructure de Gestion de Clés) reconnue par le DMP : l&rsquo;IGC Santé.</p>
<p>Celà permet de définir deux modes d&rsquo;authentification dans le DMP :</p>
<ul>
<li>l&rsquo;authentification indirecte par l&rsquo;usage d&rsquo;un fichier p12 certificat serveur provenant de l&rsquo;IGC santé</li>
<li>l&rsquo;authentification directe par l&rsquo;usage d&rsquo;une carte CPS</li>
</ul>
<p><img src="../SEL-MP-037+DMPi_2.04_acteurs_et_objectifs.png" alt="SEL-MP-037+DMPi_2.04_acteurs_et_objectifs"></p>
<p>Ces deux modes d&rsquo;authentification, peuvent se dériver en différentes architectures en fonction du contexte de l&rsquo;intégrateur.</p>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-503c7dfdd96cf54760e889c55a051649">3.1 - Authentification Indirecte (via certificat serveur)</h1>
    <div class="lead">Accéder au DMP via un certification d&rsquo;établissement</div>
	<p>Il s&rsquo;agit de l&rsquo;authentification par certificat serveur provenant de l&rsquo;IGC Santé (Infrastructure de gestion de clés) qui est délivré aux différents établissements de santé.</p>
<blockquote>
<p>Une documentation pour obtenir des certificats serveurs se trouve <a href="/dmp/howtos/gestioncertificat/">ici</a>.</p>
</blockquote>
<p>Ce mode d&rsquo;authentification ne permet que l&rsquo;alimentation de documents dans le DMP et pas la consultation.</p>
<p><strong>Description scénario</strong> : L&rsquo;intégrateur héberge le Proxy DevBox-santé dans son environnement, et l&rsquo;intégre comme une passerelle vers le DMP.</p>
<h4 id="version-rest">Version REST</h4>
<h5 id="diagramme-de-composants">Diagramme de composants</h5>
<pre tabindex="0"><code class="language-plantuml" data-lang="plantuml">!include https://bitbucket.org/devbox-sante/plantuml/raw/current/themes/theme-devbox-sante.puml

[FrontEnd intégrateur] as frontend

node &#34;Environnement intégrateur&#34; {
   [BackEnd intégrateur] as backend
    package &#34;DevBox-Santé Proxy REST&#34;  DEVBOX_COLOR {
        package &#34;DevBox-sante DMP&#34; as dmpFacade DMP_COLOR {
            [P12Manager] as P12Manager DMP_COLOR
        }
    }
}
cloud &#34;**DMP**&#34; as DMP

frontend -down-&gt; backend
backend -right-&gt; dmpFacade: REST
dmpFacade -down-&gt; DMP : SOAP
</code></pre><h4 id="version-embedded">Version Embedded</h4>
<h5 id="diagramme-de-composants-1">Diagramme de composants</h5>
<p>L&rsquo;architecture du mode embedded peut être représentée par ce schéma :</p>
<pre tabindex="0"><code class="language-plantuml" data-lang="plantuml">!include https://bitbucket.org/devbox-sante/plantuml/raw/current/themes/theme-devbox-sante.puml

[FrontEnd intégrateur] as frontend

node &#34;Environnement intégrateur&#34; {
   component &#34;BackEnd intégrateur&#34; as backend {
        component &#34;DevBox-Santé DMP&#34; as DMPC_API  DMP_COLOR {
            [P12Manager] as P12Manager DMP_COLOR
        }
    }
}
cloud &#34;**DMP**&#34; as DMP

frontend -down-&gt; backend
DMPC_API -d-&gt; DMP : SOAP XDS / CDA
</code></pre>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-6d6c8b8e684c01c99c5db21252d05d31">3.2 - Authentification Directe (via carte CPx)</h1>
    <div class="lead">Authentification directe en utilisant les cartes CPx (CPS/CPE&hellip;) et la cryptolib</div>
	<p>Ce mode d&rsquo;authentification nécessite l&rsquo;installation sur le poste client d&rsquo;un lecteur de carte CPS ainsi que le composant DevBox-santé. Le professionnel de santé doit posséder une carte CPS.</p>
<p><strong>Scénario possible</strong> : Le frontend/client lourd s&rsquo;exécutant sur le poste client de l&rsquo;utilisateur accède au DMP grâce à la DevBox-Santé DMP installé sur le poste client.</p>
<h4 id="version-rest">Version REST</h4>
<h5 id="diagramme-de-composants">Diagramme de composants</h5>
<pre tabindex="0"><code class="language-plantuml" data-lang="plantuml">!include https://bitbucket.org/devbox-sante/plantuml/raw/current/themes/theme-devbox-sante.puml

node &#34;Poste Client (Windows/Mac/Linux)&#34; {
    [FrontEnd intégrateur] as frontend

    package &#34;DevBox-Santé Proxy REST&#34;  DEVBOX_COLOR {
        component &#34;DevBox-sante DMP&#34; as dmpFacade #35D9C0 {
            [DevBox-sante CPS] as cps #D34A3C

        }
    }
    [Cryptolib CPS (ANS)] as cryptolibCPS
}
[BackEnd intégrateur] as backend
cloud &#34;**DMP**&#34; as DMP

frontend -right-&gt; dmpFacade : REST
cps &lt;-up-&gt; cryptolibCPS : appel natif
dmpFacade -down-&gt; DMP : SOAP
frontend  -down-&gt; backend
</code></pre><h4 id="version-embedded">Version Embedded</h4>
<h5 id="diagramme-de-composants-1">Diagramme de composants</h5>
<pre tabindex="0"><code class="language-plantuml" data-lang="plantuml">!include https://bitbucket.org/devbox-sante/plantuml/raw/current/themes/theme-devbox-sante.puml

node &#34;Poste Client (Windows/Mac/Linux)&#34; {
    component &#34;Client de l&#39;intégrateur&#34; {
        component &#34;DevBox-Santé Proxy REST&#34;  DEVBOX_COLOR {
            component &#34;DevBox-sante DMP&#34; as dmpFacade #35D9C0 {
                [DevBox-sante CPS] as cps #D34A3C

            }
        }
    }
    [Cryptolib CPS (ANS)] as cryptolibCPS
}
cloud &#34;**DMP**&#34; as DMP

cps &lt;--&gt; cryptolibCPS : appel natif
dmpFacade --&gt; DMP : SOAP
</code></pre><h4 id="diagramme-de-séquences">Diagramme de séquences</h4>
<pre tabindex="0"><code class="language-plantuml" data-lang="plantuml">!include https://bitbucket.org/devbox-sante/plantuml/raw/current/themes/theme-devbox-sante.puml

box &#34;Poste Client&#34;
participant frontend
participant &#34;DevBox-Santé DMP&#34; as dbxdmp DMP_COLOR
participant &#34;DevBox-Santé CPS&#34; as dbxCps CPS_COLOR
end box

participant &#34;**DMP**&#34; as dmp

frontend -&gt; dbxdmp : /dmp/td21SubmitDocuments
==  initialisation d&#39;une connexion SSL en authentification mutuelle avec le DMP ==
dbxdmp -&gt; &#34;DMP&#34; as dmp : [SSL] 1. Client Hello
dmp -&gt; dbxdmp : [SSL] 2. Server Hello (certificat du DMP server inclus)
dmp -&gt; dbxdmp : [SSL] 3. Client certificate request
dbxdmp -&gt; dbxCps : readAuthenticationCertificate
dbxCps -&gt; dbxdmp : {certificate authentification}
dbxdmp -&gt; dmp : [SSL] 4. Client certificate
dbxdmp -&gt; dmp : [SSL] 5. Client sends key info \n(encrypted with DMP server public&#39;s key)
dbxdmp -&gt; dbxCps : signForAuthentication(SHA256WithRSA, hanshake data)
dbxCps -&gt; dbxdmp : {signed handshake data}
dbxdmp -&gt; dmp : [SSL] 6. Certificate verify \n (with Digital Signature)
dbxdmp -&gt; dmp : [SSL] 7. Finnished message \n (encrypted with symmetric key)
dmp -&gt; dbxdmp : [SSL] 8. Finnished message \n (encrypted with symmetric key)
== fin de l&#39;initialisation de la connexion ssl avec le DMP ==
dbxdmp -&gt; dmp : POST SOAP message de soumission (XDS/CDA)
dmp -&gt; dbxdmp : SOAP response OK
dbxdmp -&gt; frontend : ok
</code></pre>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-0e5141253e9794140ce5c4d6e45154ef">3.3 - Authentification Directe via le CPS Agent</h1>
    <div class="lead">Authentification via le CPS Agent (Démon sur le poste client minimaliste)</div>
	<h2 id="authentification-directe-avec-cpsagent">Authentification Directe avec CPS Agent</h2>
<p><strong>Scenario possible</strong> : Le frontend de l&rsquo;intégrateur, passe le contexte d&rsquo;authentification de la DevBox-Santé CPS agent se trouvant sur le poste client au backend. Le backend initie une session TLS/SSL avec le serveur DMP grâce au CpsAgentClient.</p>
<h4 id="diagramme-de-composants">Diagramme de composants</h4>
<pre tabindex="0"><code class="language-plantuml" data-lang="plantuml">!include https://bitbucket.org/devbox-sante/plantuml/raw/current/themes/theme-devbox-sante.puml

node &#34;Poste Client (Windows/Mac/Linux)&#34; {
    [FrontEnd intégrateur] as frontend

    package &#34;DevBox-Santé Proxy REST&#34; as cpsAgent DEVBOX_COLOR {
            [DevBox-sante CPS] as cps CPS_COLOR

    }
    [Cryptolib CPS (ANS)] as cryptolibCPS
}

node &#34;Environnement intégrateur&#34; {
   [BackEnd intégrateur] as backend
    package &#34;DevBox-Santé Proxy REST&#34; DEVBOX_COLOR {
        component &#34;DevBox-sante DMP&#34; as dmpFacade DMP_COLOR {
            [CpsAgentClient] CPS_COLOR
        }
    }
}
cloud &#34;**DMP**&#34; as DMP

frontend -d-&gt; backend : 1
backend -d-&gt; dmpFacade  : 2
CpsAgentClient -&gt; cpsAgent : 3
cps -down-&gt; cryptolibCPS : 4
dmpFacade -down-&gt; DMP : 5
</code></pre><h4 id="diagramme-de-séquences">Diagramme de séquences</h4>
<pre tabindex="0"><code class="language-plantuml" data-lang="plantuml">!include https://bitbucket.org/devbox-sante/plantuml/raw/current/themes/theme-devbox-sante.puml

box &#34;Poste Client&#34;
participant frontend
participant cpsAgent CPS_COLOR
end box

box &#34;Environnement intégrateur&#34; #white
participant &#34;DevBox-Santé DMP&#34; as dbxdmp DMP_COLOR
participant backend
end box

participant &#34;**DMP**&#34; as dmp

frontend -&gt; backend : storeDocumentPatient
backend -&gt; dbxdmp : /dmp/td21SubmitDocuments
==  initialisation d&#39;une connexion SSL en authentification mutuelle avec le DMP ==
dbxdmp -&gt; &#34;DMP&#34; as dmp : [SSL] 1. Client Hello
dmp -&gt; dbxdmp : [SSL] 2. Server Hello (certificat du DMP server inclus)
dmp -&gt; dbxdmp : [SSL] 3. Client certificate request
dbxdmp -&gt; cpsAgent : HTTP GET /cps/authenticationCertificate
cpsAgent -&gt; dbxdmp : {certificate authentification}
dbxdmp -&gt; dmp : [SSL] 4. Client certificate
dbxdmp -&gt; dmp : [SSL] 5. Client sends key info \n(encrypted with DMP server public&#39;s key)
dbxdmp -&gt; cpsAgent : HTTP POST /cps/sign/for/authentication/SHA256WithRSA body : {handshake data}
cpsAgent -&gt; dbxdmp : {signed handshake data}
dbxdmp -&gt; dmp : [SSL] 6. Certificate verify \n (with Digital Signature)
dbxdmp -&gt; dmp : [SSL] 7. Finnished message \n (encrypted with symmetric key)
dmp -&gt; dbxdmp : [SSL] 8. Finnished message \n (encrypted with symmetric key)
== fin de l&#39;initialisation de la connexion ssl avec le DMP ==
dbxdmp -&gt; dmp : POST SOAP message de soumission (XDS/CDA)
dmp -&gt; dbxdmp : SOAP response OK
dbxdmp -&gt; backend : HTTP 200 Ok
backend -&gt; frontend : ok
</code></pre>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-bb804dd8fedafc280945278a93a3c46d">3.4 - Authentification Directe via OLAQIN TAAS (Terminal As A Service)</h1>
    <div class="lead">Un autre moyen d&rsquo;authentification OLAQIN TAAS (Terminal As A Service) via les APIs des serveurs HDS Stellair</div>
	<p>OLAQIN TAAS (Terminal As A Service) est une technologie développée par la société OLAQIN qui permet aux APIs de la DevBox-Santé DMP d&rsquo;accéder à des terminaux OLAQIN via le réseau Internet.</p>
<p>Les terminaux OLAQIN compatibles avec la technologie OLAQIN TAAS fournit des accès aux cartes Vitale et CPS au travers d’API.</p>
<p><img src="OLAQIN_TAAS_architecture.png" alt="OLAQIN_TAAS architecture"></p>
<p>Pour l’accès aux cartes Vitale, Olaqin s’appuie sur son homologation « Lecture Vitale » (via l’option API). Pour l’accès aux cartes des Professionnels de Santé, Olaqin s’appuie sur les développements réalisés dans le cadre de son homologation « Dispositif Intégré ».</p>
<h2 id="intégration-dans-la-devbox-santé">Intégration dans la DevBox-santé</h2>
<p>Vous pouvez donc installer votre solution DevBox-santé DMP dans votre environnement serveur HDS et utiliser les terminaux Olaqin.</p>
<pre tabindex="0"><code class="language-plantuml" data-lang="plantuml">!include https://bitbucket.org/devbox-sante/plantuml/raw/current/themes/theme-devbox-sante.puml
node &#34;Environnement Utilisateur&#34; {
    package &#34;Poste client / mobile&#34; {
        [FrontEnd intégrateur] as frontend
    }
    [Lecteur Neo] as lecteur
}

node &#34;Environnement intégrateur HDS&#34; {
    [BackEnd intégrateur] as backend
    package &#34;DevBox-Santé Proxy REST&#34;  DEVBOX_COLOR {
        component &#34;DevBox-sante DMP&#34; as dmpFacade #35D9C0 {
            [DevBox-sante CPS security Stellair] as cpsStellair #D34A3C
        }
    }
}
cloud &#34;**Stellair** API&#34; as stellair
cloud &#34;**DMP**&#34; as DMP

frontend -up-&gt; backend : REST
backend -&gt; dmpFacade : REST
cpsStellair -&gt; stellair: REST
stellair &lt;-&gt; lecteur : Demande d&#39;autorisation d&#39;accès aux cartes via le SSO Stellair
dmpFacade -&gt; DMP : SOAP
</code></pre><h4 id="diagramme-de-séquences">Diagramme de séquences</h4>
<pre tabindex="0"><code class="language-plantuml" data-lang="plantuml">!include https://bitbucket.org/devbox-sante/plantuml/raw/current/themes/theme-devbox-sante.puml
box &#34;Environnement utilisateur&#34;
    participant &#34;Poste client&#34; as frontend
    participant &#34;Lecteur Neo&#34; as lecteur
end box

box &#34;Environnement intégrateur&#34; #white
participant backend
participant &#34;DevBox-Santé DMP&#34; as dbxdmp DMP_COLOR
end box
participant &#34;**DMP**&#34; as dmp
participant &#34;**Stellair**&#34; as stellair


frontend -&gt; backend : storeDocumentPatient
backend -&gt; dbxdmp : /dmp/td21SubmitDocuments
==  initialisation d&#39;une connexion SSL en authentification mutuelle avec le DMP ==
dbxdmp -&gt; &#34;DMP&#34; as dmp : [SSL] 1. Client Hello
dmp -&gt; dbxdmp : [SSL] 2. Server Hello (certificat du DMP server inclus)
dmp -&gt; dbxdmp : [SSL] 3. Client certificate request
dbxdmp -&gt; stellair : HTTP GET /cps/certificate/auth
...
stellair &lt;-&gt; lecteur
...
stellair -&gt; dbxdmp : {certificate authentification}
dbxdmp -&gt; dmp : [SSL] 4. Client certificate
dbxdmp -&gt; dmp : [SSL] 5. Client sends key info \n(encrypted with DMP server public&#39;s key)
dbxdmp -&gt; stellair : HTTP POST /cps/certificate/auth body : {handshake data}
...
stellair &lt;-&gt; lecteur
...
stellair -&gt; dbxdmp : {signed handshake data}
dbxdmp -&gt; dmp : [SSL] 6. Certificate verify \n (with Digital Signature)
dbxdmp -&gt; dmp : [SSL] 7. Finnished message \n (encrypted with symmetric key)
dmp -&gt; dbxdmp : [SSL] 8. Finnished message \n (encrypted with symmetric key)
== fin de l&#39;initialisation de la connexion ssl avec le DMP ==
dbxdmp -&gt; dmp : POST SOAP message de soumission (XDS/CDA)
dmp -&gt; dbxdmp : SOAP response OK
dbxdmp -&gt; backend : HTTP 200 Ok
backend -&gt; frontend : ok
</code></pre>
</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-d3a57d7b24592da862f5b3239be058bb">4 - Structuration des documents</h1>
    <div class="lead">Les différents formats CDA supportés</div>
	<p>Il est possible dans le DMP de soumettre une multitude de type de document structurés dans le format CDA. Ces documents sont spécifiés dans <a href="https://esante.gouv.fr/offres-services/ci-sis/espace-publication">l&rsquo;Espace de publication du Cadre d’Interopérabilité des Systèmes d’Information de Santé</a></p>
<h2 id="glossaire">Glossaire</h2>
<ul>
<li><strong>CDA</strong> : Clinical Document Architecture</li>
</ul>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-8f81b371012d0ab0acef8eba3d204ac6">4.1 - Volet CDA structuration minimale</h1>
    
	<h2 id="volet-cdade-structuration-minimale">Volet CDA de Structuration minimale</h2>
<p>La DevBox-Santé DMP prend en charge la soumission de document à structuration minimale.
Il s&rsquo;agit du format par défaut exigé par le Guide d&rsquo;intégration , il contient les métadonnées de
base permettant la création d&rsquo;un DMPCDocument ainsi que son contenu binaire.</p>
<p>La spécification de ce type de document est défini par l&rsquo;ANS. Pour plus de renseignements sur le Volet Structuration minimal de Documents de santé : <a href="https://esante.gouv.fr/volet-structuration-minimale-de-documents-de-sante">https://esante.gouv.fr/volet-structuration-minimale-de-documents-de-sante</a></p>
<p>Un exemple de création de document à structuration minimale est :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">DMPCDocument</span> <span style="color:#000">document</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">DMPCDocument</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// ajout des métadonnées
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setClassCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCodesFor</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">ASIPJeuxValeurs</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">CLASS_CODE</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">get</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">0</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">getCode</span><span style="color:#ce5c00;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span><span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">addConfidentiality</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCodesFor</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">ASIPJeuxValeurs</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">CONFIDENTIALITY_CODE</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">get</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">0</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">getCode</span><span style="color:#ce5c00;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span><span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setComments</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;commentDocument&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">addEvent</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;B18&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;2.16.840.1.113883.6.3&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;Hépatite virale chronique&#34;</span><span style="color:#ce5c00;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span><span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setPracticeSetting</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCodesFor</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">ASIPJeuxValeurs</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">PRACTICE_SETTING_CODE</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">get</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">0</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">getCode</span><span style="color:#ce5c00;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span><span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setServiceStartTime</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;20171020174600&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setServiceStopTime</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;20171020194600&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setTitle</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;titleDocument&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setType</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCodesFor</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">ASIPJeuxValeurs</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">TYPE_CODE</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">get</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">0</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">getCode</span><span style="color:#ce5c00;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span><span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setCreationTime</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;20171020194600&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// association du format et de son contenu. Ici, il s&#39;agit d&#39;un fichier pdf.
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setFormat</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;urn:ihe:iti:xds-sd:pdf:2008&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">InputStream</span> <span style="color:#000">input</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">FileInputStream</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;monDocumentSante.pdf&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">byte</span><span style="color:#ce5c00;font-weight:bold">[]</span> <span style="color:#000">content</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#204a87;font-weight:bold">byte</span><span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#000">input</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">available</span><span style="color:#ce5c00;font-weight:bold">()];</span>
</span></span><span style="display:flex;"><span><span style="color:#000">ByteStreams</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">readFully</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">input</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">content</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setContent</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">content</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span></code></pre></div><p>Listes des formats possibles :</p>
<ul>
<li><code>urn:ihe:iti:xds-sd:pdf:2008</code></li>
<li><code>urn:ihe:iti-fr:xds-sd:rtf:2010</code></li>
<li><code>urn:ihe:iti-fr:xds-sd:jpeg:2010</code></li>
<li><code>urn:ihe:iti-fr:xds-sd:tiff:2010</code></li>
<li>&hellip;</li>
</ul>
<p>Pour plus de renseignements sur l&rsquo;API java du <code>DMPCDocument</code> : <a href="https://bitbucket.org/devbox-sante/dmpc-api/src/master/src/main/java/fr/devboxsante/dmp/model/DMPCDocument.java">https://bitbucket.org/devbox-sante/dmpc-api/src/master/src/main/java/fr/devboxsante/dmp/model/DMPCDocument.java</a></p>
<p>Exemple de DMPCDocument au format Json :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;classCode&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;11&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;comments&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Document soumis via Postman&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;confidentialities&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#34;N&#34;</span><span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;content&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;UmFwcGVsIGNsaW5pcXVlIDogSWwgcydhZ2l0IGQndW4gaG9tbWUgZGUgNTMgYW5zLCAKcHLDqXNlbnRhbnQgdW4gbmFldnVzIGRlIGxhIGZhY2UgaW50ZXJuZSBkZSBsYSBjdWlzc2UgZ2F1Y2hlIGRlIDcgbW0gZGUgZ3JhbmQgYXhlIGVudmlyb24uIApEw6ljaXNpb24gZCdleMOpcsOoc2Ugc291cyBhbmVzdGjDqXNpZSBsb2NhbGUuIAoKSW50ZXJ2ZW50aW9uIDogRVhFUkVTRSBEJ1VOIE5BRVZVUyBERSBMQSBDVUlTU0UgR0FVQ0hFIApTb3VzIGFuZXN0aMOpc2llIGxvY2FsZSDDoCBsYSBYeWxvY2HDr25lIMOgIDEgJSBub24gYWRyw6luYWxpbsOpZS4gCgpJbmNpc2lvbiBjZW50csOpZSBzdXIgbGEgbMOpc2lvbiBwZXJtZXR0YW50IGwnZXjDqXLDqHNlIGR1IG5hZXZ1cyBkYW5zIHNhIHRvdGFsaXTDqS4gCkZlcm1ldHVyZSBjdXRhbsOpZSBlbiB1biBwbGFuIGRlIEZsZXhvY3JpbiAzLzAuICAKCkVYQU1FTiBISVNUT0xPR0lPVUUgVW5lIGzDqXNpb24gcG9seXBvw69kZSBkZSAxIHggMCw3IGNtIGEgw6l0w6kgY29tbXVuaXF1w6llLiAKT24gcmV0cm91dmUgYXUgcGxhbiBoaXN0b2xvZ2lxdWUgdW5lIGzDqXNpb24gdW4gcGV1IHZlcnJ1cXVldXNlLCAKY29tcG9ydGFudCB1bmUgcHJvbGlmw6lyYXRpb24gY2VsbHVsYWlyZSBuYWV2aXF1ZSDDqXBhcmduYW50IGwnw6lwaWTDqW1pZSwgCnNvdXMgZm9ybWUgZGUgdGjDqHF1ZXMgZW4gc3VyZmFjZSwgYXZlYyBxdWVscXVlcyBkw6lww7R0cyBkZSBtw6lsYW5pbmUsIAphc3NvY2nDqWUgw6AgdW4gZ3JhZGllbnQgZGUgbWF0dXJhdGlvbiB0csOocyBuZXQgdmVycyBsYSBwcm9mb25kZXVyLiAKCk9uIG5lIHJldHJvdXZlIHBhcyBkJ2F0eXBpZSBudWNsw6lvY3l0b3BsYXNtaXF1ZS4gCgpDT05DTFVTSU9OIE5BRVZVUyBERVJNSVFVRSBERVZFTE9QUEUgU1VSIFVOIE1PREUgRVhPUEhZVElRVUUgLiAKTEVTIExJTUlURVMgRCdFWEVSRVNFIFNPTlQgU0FJTkVTLiA=&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;creationTime&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;20200928120000&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;events&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;code&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;H33&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;codingScheme&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2.16.840.1.113883.6.3&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;displayName&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Décollement et déchirement de la rétine&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;format&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;urn:ihe:iti:xds-sd:text:2008&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;legalAuthenticator&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;internalId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;123456&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;nom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Durand&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;prenom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Pierre&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;patient&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;ins&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;279035121518989&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;prenom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;DOMINIQUE&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;nomUsuel&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;pat-trois&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;internalId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;67890&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;dateDeNaissance&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;19790328&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;ordreDeNaissance&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;sexe&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;F&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;practiceSetting&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;AMBULATOIRE&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;serviceStartTime&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;20200928080000&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;serviceStopTime&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;20200928080000&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;title&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Titre du document&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;type&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;11488-4&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h2 id="alimenter-le-dmp">Alimenter le DMP</h2>
<p>C&rsquo;est ce <code>DMPCDocument</code> qui permet l&rsquo;alimentation du DMP au travers de <a href="/dmp/howtos/transactions//#alimentation">la transaction d&rsquo;alimentation</a></p>
<h2 id="générer-un-cda">Générer un CDA</h2>
<p><strong>@Since DMP-4.7.0</strong></p>
<p>Il est également possible de transformer ce <code>DMPCDocument</code> en un CDA en vue de le partager avec un autre Système d&rsquo;information comme la MSS par exemple.</p>
<p>Exemple en Java :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@Autowired</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">private</span> <span style="color:#000">DMPCCdaTools</span> <span style="color:#000">cdaTools</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// ... 
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">DMPCDocument</span> <span style="color:#000">document</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">createDMPCDocument</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">auteur</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">patient</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">OutputStream</span> <span style="color:#000">out</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">ByteArrayOutputStream</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#000">cdaTools</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">map</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">out</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">toByteArray</span><span style="color:#ce5c00;font-weight:bold">());</span>
</span></span></code></pre></div><p>Exemple en REST : </p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#a40000">curl</span> <span style="color:#a40000">--location</span> <span style="color:#a40000">--request</span> <span style="color:#a40000">POST</span> <span style="color:#a40000">&#39;http:</span><span style="color:#8f5902;font-style:italic">//127.0.0.1:8686/dmp/to/cda&#39; \
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#a40000">--header</span> <span style="color:#a40000">&#39;Content-Type:</span> <span style="color:#a40000">application/json&#39;</span> <span style="color:#a40000">\</span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">--data-raw</span> <span style="color:#a40000">&#39;</span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;entryUuid&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;c2811791-1773-4325-9abf-a2f2d09ccfc9&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;uniqueId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1.2.250.1.287.11234&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;secteurActivite&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;SA43&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;auteurs&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;internalId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;123456&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;nom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Durand&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;prenom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Pierre&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;specialite&#34;</span><span style="color:#000;font-weight:bold">:</span>  <span style="color:#4e9a06">&#34;G15_10/SM30&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;secteurActivite&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;SA43&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;structureSante&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;idNational&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;12345&#34;</span><span style="color:#000;font-weight:bold">,</span> 
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;nom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Devcoop Bureau de Léognan&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;classCode&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;11&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;comments&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Document soumis via Postman&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;confidentialities&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>        <span style="color:#4e9a06">&#34;N&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;content&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;UmFwcGVsIGNsaW5pcXVlIDogSWwgcydhZ2l0IGQndW4gaG9tbWUgZGUgNTMgYW5zLCAKcHLDqXNlbnRhbnQgdW4gbmFldnVzIGRlIGxhIGZhY2UgaW50ZXJuZSBkZSBsYSBjdWlzc2UgZ2F1Y2hlIGRlIDcgbW0gZGUgZ3JhbmQgYXhlIGVudmlyb24uIApEw6ljaXNpb24gZCdleMOpcsOoc2Ugc291cyBhbmVzdGjDqXNpZSBsb2NhbGUuIAoKSW50ZXJ2ZW50aW9uIDogRVhFUkVTRSBEJ1VOIE5BRVZVUyBERSBMQSBDVUlTU0UgR0FVQ0hFIApTb3VzIGFuZXN0aMOpc2llIGxvY2FsZSDDoCBsYSBYeWxvY2HDr25lIMOgIDEgJSBub24gYWRyw6luYWxpbsOpZS4gCgpJbmNpc2lvbiBjZW50csOpZSBzdXIgbGEgbMOpc2lvbiBwZXJtZXR0YW50IGwnZXjDqXLDqHNlIGR1IG5hZXZ1cyBkYW5zIHNhIHRvdGFsaXTDqS4gCkZlcm1ldHVyZSBjdXRhbsOpZSBlbiB1biBwbGFuIGRlIEZsZXhvY3JpbiAzLzAuICAKCkVYQU1FTiBISVNUT0xPR0lPVUUgVW5lIGzDqXNpb24gcG9seXBvw69kZSBkZSAxIHggMCw3IGNtIGEgw6l0w6kgY29tbXVuaXF1w6llLiAKT24gcmV0cm91dmUgYXUgcGxhbiBoaXN0b2xvZ2lxdWUgdW5lIGzDqXNpb24gdW4gcGV1IHZlcnJ1cXVldXNlLCAKY29tcG9ydGFudCB1bmUgcHJvbGlmw6lyYXRpb24gY2VsbHVsYWlyZSBuYWV2aXF1ZSDDqXBhcmduYW50IGwnw6lwaWTDqW1pZSwgCnNvdXMgZm9ybWUgZGUgdGjDqHF1ZXMgZW4gc3VyZmFjZSwgYXZlYyBxdWVscXVlcyBkw6lww7R0cyBkZSBtw6lsYW5pbmUsIAphc3NvY2nDqWUgw6AgdW4gZ3JhZGllbnQgZGUgbWF0dXJhdGlvbiB0csOocyBuZXQgdmVycyBsYSBwcm9mb25kZXVyLiAKCk9uIG5lIHJldHJvdXZlIHBhcyBkJ2F0eXBpZSBudWNsw6lvY3l0b3BsYXNtaXF1ZS4gCgpDT05DTFVTSU9OIE5BRVZVUyBERVJNSVFVRSBERVZFTE9QUEUgU1VSIFVOIE1PREUgRVhPUEhZVElRVUUgLiAKTEVTIExJTUlURVMgRCdFWEVSRVNFIFNPTlQgU0FJTkVTLiA=&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;creationTime&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;20200928120000&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;events&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;code&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;H33&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;codingScheme&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2.16.840.1.113883.6.3&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;displayName&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Décollement et déchirement de la rétine&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;format&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;urn:ihe:iti:xds-sd:text:2008&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;legalAuthenticator&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;internalId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;123456&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;nom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Durand&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;prenom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Pierre&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;secteurActivite&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;SA43&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;structureSante&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;idNational&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;12345&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;nom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Devcoop Bureau de Léognan&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;patient&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;ins&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;279035121518989&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;insAutorite&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1.2.250.1.213.1.4.10&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;prenom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;DOMINIQUE&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;nomUsuel&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;pat-trois&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;internalId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;67890&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;dateDeNaissance&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;19790328&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;ordreDeNaissance&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;sexe&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;F&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;practiceSetting&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;AMBULATOIRE&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;serviceStartTime&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;20200928080000&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;serviceStopTime&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;20200928080000&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;title&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Titre du document&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;type&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;11488-4&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span><span style="color:#a40000">&#39;</span>
</span></span></code></pre></div><p>La réponse contientdra un fichier CDA conforme au schematron de l&rsquo;ANS : <a href="cda_structuration_minimale.xml">cda_structuration_minimale.xml</a></p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-00acedff0c515c2832231418be77b605">4.2 - Volet Compte rendu d&#39;examens de biologie</h1>
    
	<p>La DevBox-Santé DMP prend également en charge la soumission de document structure comme le CR d&rsquo;examens biologie.</p>
<p>Ce format de document est spécifié par l&rsquo;ANS : <a href="https://esante.gouv.fr/volet-cr-bio-compte-rendu-dexamens-de-biologie-medicale">https://esante.gouv.fr/volet-cr-bio-compte-rendu-dexamens-de-biologie-medicale</a></p>
<p>Un exemple de création de document conforme à la spécification est :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">private</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">createCRBiologie</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCStructureSante</span> <span style="color:#000">structureSante</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#000">String</span> <span style="color:#000">creationTime</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;20111020194600&#34;</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#000">String</span> <span style="color:#000">startTime</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;20140520174600&#34;</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#000">String</span> <span style="color:#000">stopTime</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;20140520184600&#34;</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">DMPCDocumentCRBiologie</span> <span style="color:#000">template</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">DMPCDocumentCRBiologie</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setClassCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;10&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">addConfidentiality</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;N&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setComments</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Commentaire du document&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setFormat</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;urn:ihe:lab:xd-lab:2008&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>  <span style="color:#8f5902;font-style:italic">// format obligatoire
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setPracticeSetting</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;AMBULATOIRE&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setServiceStartTime</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">startTime</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setServiceStopTime</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">stopTime</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setTitle</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Titre CRBiologie&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setType</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;11502-2&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setCreationTime</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">creationTime</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">addEvent</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;16915-1&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">OIDs</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">LOINC</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getRepresentation</span><span style="color:#ce5c00;font-weight:bold">(),</span> <span style="color:#4e9a06">&#34;Glucose post prandial [Masse/Volume] Sérum/Plasma ; Numérique&#34;</span><span style="color:#ce5c00;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#000">Participation</span> <span style="color:#000">prescription</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">Participation</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#000">DMPCPersonnelSante</span> <span style="color:#000">prescripteur</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">DMPCPersonnelSante</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">prescripteur</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setAdeli</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;801234567897&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">prescripteur</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setNom</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Gynecon&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">prescripteur</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setPrenom</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Eve&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">prescripteur</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setStructureSante</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">structureSante</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">prescripteur</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setTelephone</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;0147150000&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">prescription</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setPersonnelSante</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">prescripteur</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">prescription</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setStopTime</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">startTime</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setPrescription</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">prescription</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#000">Participation</span> <span style="color:#000">prelevement</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">Participation</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#000">DMPCPersonnelSante</span> <span style="color:#000">preleveur</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">DMPCPersonnelSante</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">preleveur</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setAdeli</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;801234567897&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">preleveur</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setNom</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Bleeder&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">preleveur</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setPrenom</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Roberta&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">preleveur</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setStructureSante</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">structureSante</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">prelevement</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setPersonnelSante</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">preleveur</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">prelevement</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setStopTime</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">stopTime</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setPrelevement</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">prelevement</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setId</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;1234&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setVersionNumber</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">0</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#000">StructuredBody</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">ChapterSection</span> <span style="color:#000">chapterSection</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">StructuredBody</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">ChapterSection</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">chapterSection</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setLoincCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">ChapterSectionLoincCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">BIOLOGIE</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCode</span><span style="color:#ce5c00;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getBody</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">getChapterSections</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">add</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">chapterSection</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#000">StructuredBody</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">Section</span> <span style="color:#000">section</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">StructuredBody</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">Section</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">chapterSection</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getSections</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">add</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">section</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">section</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setAuthenticator</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">prescripteur</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">section</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setAuthenticatorInterpretation</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Commentaire habituel&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#000">StructuredBody</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">Observation</span> <span style="color:#000">observation</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">StructuredBody</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">Observation</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">observation</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;16915-1&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">OIDs</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">LOINC</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getRepresentation</span><span style="color:#ce5c00;font-weight:bold">(),</span> <span style="color:#4e9a06">&#34;Glucose post prandial [Masse/Volume] Sérum/Plasma ; Numérique&#34;</span><span style="color:#ce5c00;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">observation</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setStatus</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;completed&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">observation</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setTime</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">stopTime</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#000">StructuredBody</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">Value</span> <span style="color:#000">value</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">StructuredBody</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">Value</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">value</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setValue</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;1.5&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">value</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setUnit</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;g/L&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">observation</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setValue</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">value</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">observation</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setInterpretation</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;H&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">Hl7OIDs</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">OBSERVATION_INTERPRETATION</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getRepresentation</span><span style="color:#ce5c00;font-weight:bold">(),</span> <span style="color:#4e9a06">&#34;Anormalement haut&#34;</span><span style="color:#ce5c00;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#000">StructuredBody</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">RangeValue</span> <span style="color:#000">rangeValue</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">StructuredBody</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">RangeValue</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">rangeValue</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setLow</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;0.8&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">rangeValue</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setHigh</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;1.26&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">rangeValue</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setUnit</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;g/L&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">observation</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setReferenceRange</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">rangeValue</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">section</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getObservations</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">add</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">observation</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>La génération un peu longue certe permet de rajouter les sections et observations nécessaires pour générer le document CDA suivant :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; standalone=&#34;yes&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&lt;ClinicalDocument</span> <span style="color:#c4a000">xmlns=</span><span style="color:#4e9a06">&#34;urn:hl7-org:v3&#34;</span> <span style="color:#c4a000">xmlns:xsi=</span><span style="color:#4e9a06">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span> <span style="color:#c4a000">xsi:schemaLocation=</span><span style="color:#4e9a06">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;realmCode</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;FR&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;typeId</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;2.16.840.1.113883.1.3&#34;</span> <span style="color:#c4a000">extension=</span><span style="color:#4e9a06">&#34;POCD_HD000040&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;templateId</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;2.16.840.1.113883.2.8.2.1&#34;</span> <span style="color:#c4a000">assigningAuthorityName=</span><span style="color:#4e9a06">&#34;HL7 France&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;templateId</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;1.2.250.1.213.1.1.1.1&#34;</span> <span style="color:#c4a000">assigningAuthorityName=</span><span style="color:#4e9a06">&#34;Cadre InteropASIP&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;templateId</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;1.3.6.1.4.1.19376.1.2.20&#34;</span> <span style="color:#c4a000">assigningAuthorityName=</span><span style="color:#4e9a06">&#34;Template identifier for an XDS-SD document&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;templateId</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;1.3.6.1.4.1.19376.1.3.3&#34;</span> <span style="color:#c4a000">assigningAuthorityName=</span><span style="color:#4e9a06">&#34;Laboratory Report Summary Specification&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;id</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;1.2.250.1.287.1.123456.1400919121980.0&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;code</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;11502-2&#34;</span> <span style="color:#c4a000">codeSystem=</span><span style="color:#4e9a06">&#34;2.16.840.1.113883.6.1&#34;</span> <span style="color:#c4a000">displayName=</span><span style="color:#4e9a06">&#34;CR d&#39;examens biologiques&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;title&gt;</span>document titre<span style="color:#204a87;font-weight:bold">&lt;/title&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;effectiveTime</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;20140524101200+0200&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;confidentialityCode</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;N&#34;</span> <span style="color:#c4a000">codeSystem=</span><span style="color:#4e9a06">&#34;2.16.840.1.113883.5.25&#34;</span> <span style="color:#c4a000">displayName=</span><span style="color:#4e9a06">&#34;Normal&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;languageCode</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;fr-FR&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;versionNumber</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;0&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;recordTarget&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;patientRole&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;id</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;1.2.250.1.213.1.4.2&#34;</span> <span style="color:#c4a000">extension=</span><span style="color:#4e9a06">&#34;1164485058822081751070&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;id</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;1.2.250.1.287.1.123456&#34;</span> <span style="color:#c4a000">extension=</span><span style="color:#4e9a06">&#34;1234&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;addr</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;NASK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;telecom</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;NASK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;patient&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;given&gt;</span>prenom<span style="color:#204a87;font-weight:bold">&lt;/given&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;family</span> <span style="color:#c4a000">qualifier=</span><span style="color:#4e9a06">&#34;BR&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>nom<span style="color:#204a87;font-weight:bold">&lt;/family&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;family</span> <span style="color:#c4a000">qualifier=</span><span style="color:#4e9a06">&#34;SP&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>nomEpouse<span style="color:#204a87;font-weight:bold">&lt;/family&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;administrativeGenderCode</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;M&#34;</span> <span style="color:#c4a000">codeSystem=</span><span style="color:#4e9a06">&#34;2.16.840.1.113883.5.1&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;birthTime</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;19730513&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;/patient&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;/patientRole&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;/recordTarget&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;author&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;functionCode</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;10&#34;</span> <span style="color:#c4a000">codeSystem=</span><span style="color:#4e9a06">&#34;1.2.250.1.71.1.2.7&#34;</span> <span style="color:#c4a000">displayName=</span><span style="color:#4e9a06">&#34;Médecin&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;time</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;20140524101200+0200&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;assignedAuthor&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;id</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;1.2.250.1.71.4.2.1&#34;</span> <span style="color:#c4a000">extension=</span><span style="color:#4e9a06">&#34;500000000015644/123&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;code</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;G15_10/SM30&#34;</span> <span style="color:#c4a000">codeSystem=</span><span style="color:#4e9a06">&#34;1.2.250.1.213.1.1.4.5&#34;</span> <span style="color:#c4a000">displayName=</span><span style="color:#4e9a06">&#34;Médecin - Néphrologie (SM)&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;addr</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;NASK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;assignedPerson&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;given&gt;</span>auteurPrenom<span style="color:#204a87;font-weight:bold">&lt;/given&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;family</span> <span style="color:#c4a000">qualifier=</span><span style="color:#4e9a06">&#34;BR&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>auteurNom<span style="color:#204a87;font-weight:bold">&lt;/family&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;/assignedPerson&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;representedOrganization&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;id</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;1.2.250.1.71.4.2.2&#34;</span> <span style="color:#c4a000">extension=</span><span style="color:#4e9a06">&#34;300000000015644&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>structureNom<span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;/representedOrganization&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;/assignedAuthor&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;/author&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;custodian&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;assignedCustodian&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;representedCustodianOrganization&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;id</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;1.2.250.1.71.4.2.2&#34;</span> <span style="color:#c4a000">extension=</span><span style="color:#4e9a06">&#34;300000000015644&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>structureNom<span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;telecom</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;NASK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;addr</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;NASK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;/representedCustodianOrganization&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;/assignedCustodian&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;/custodian&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;legalAuthenticator&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;time</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;20140524101200+0200&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;signatureCode</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;S&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;assignedEntity&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;id</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;1.2.250.1.71.4.2.1&#34;</span> <span style="color:#c4a000">extension=</span><span style="color:#4e9a06">&#34;500000000015644/123&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;addr</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;NASK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;telecom</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;NASK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;assignedPerson&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;given&gt;</span>auteurPrenom<span style="color:#204a87;font-weight:bold">&lt;/given&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;family</span> <span style="color:#c4a000">qualifier=</span><span style="color:#4e9a06">&#34;BR&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>auteurNom<span style="color:#204a87;font-weight:bold">&lt;/family&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;/assignedPerson&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;/assignedEntity&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;/legalAuthenticator&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;participant</span> <span style="color:#c4a000">typeCode=</span><span style="color:#4e9a06">&#34;REF&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;functionCode</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;TODO&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;time&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;high</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;20091113&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;/time&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;associatedEntity</span> <span style="color:#c4a000">classCode=</span><span style="color:#4e9a06">&#34;PROV&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;id</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;1.2.250.1.71.4.2.1&#34;</span> <span style="color:#c4a000">extension=</span><span style="color:#4e9a06">&#34;801234567897&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;code</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;NASK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;addr</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;NASK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;telecom</span> <span style="color:#c4a000">use=</span><span style="color:#4e9a06">&#34;EC&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;tel:0147150000&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;associatedPerson&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;given&gt;</span>Eve<span style="color:#204a87;font-weight:bold">&lt;/given&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;family</span> <span style="color:#c4a000">qualifier=</span><span style="color:#4e9a06">&#34;BR&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>Gynecon<span style="color:#204a87;font-weight:bold">&lt;/family&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;/associatedPerson&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;/associatedEntity&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;/participant&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;participant</span> <span style="color:#c4a000">typeCode=</span><span style="color:#4e9a06">&#34;DIST&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;functionCode</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;PRELV&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;time/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;associatedEntity</span> <span style="color:#c4a000">classCode=</span><span style="color:#4e9a06">&#34;CAREGIVER&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;id</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;1.2.250.1.71.4.2.1&#34;</span> <span style="color:#c4a000">extension=</span><span style="color:#4e9a06">&#34;801234567897&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;code</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;NASK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;addr</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;NASK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;telecom</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;NASK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;associatedPerson&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;given&gt;</span>Roberta<span style="color:#204a87;font-weight:bold">&lt;/given&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;family</span> <span style="color:#c4a000">qualifier=</span><span style="color:#4e9a06">&#34;BR&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>Bleeder<span style="color:#204a87;font-weight:bold">&lt;/family&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;/associatedPerson&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;/associatedEntity&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;/participant&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;documentationOf&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;serviceEvent&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;code</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;H33&#34;</span> <span style="color:#c4a000">codeSystem=</span><span style="color:#4e9a06">&#34;2.16.840.1.113883.6.3&#34;</span> <span style="color:#c4a000">displayName=</span><span style="color:#4e9a06">&#34;Décollement et déchirement de la rétine&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;effectiveTime&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;low</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;20111025&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;high</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;20111125&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;/effectiveTime&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;performer</span> <span style="color:#c4a000">typeCode=</span><span style="color:#4e9a06">&#34;PRF&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;functionCode</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;UNK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;assignedEntity&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;id</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;1.2.250.1.71.4.2.1&#34;</span> <span style="color:#c4a000">extension=</span><span style="color:#4e9a06">&#34;500000000015644/123&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;addr</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;NASK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;telecom</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;NASK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;assignedPerson&gt;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&lt;given&gt;</span>auteurPrenom<span style="color:#204a87;font-weight:bold">&lt;/given&gt;</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&lt;family</span> <span style="color:#c4a000">qualifier=</span><span style="color:#4e9a06">&#34;BR&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>auteurNom<span style="color:#204a87;font-weight:bold">&lt;/family&gt;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;/assignedPerson&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;representedOrganization&gt;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&lt;id</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;1.2.250.1.71.4.2.2&#34;</span> <span style="color:#c4a000">extension=</span><span style="color:#4e9a06">&#34;300000000015644&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>structureNom<span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&lt;telecom</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;NASK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&lt;addr</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;NASK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&lt;standardIndustryClassCode</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;AMBULATOIRE&#34;</span> <span style="color:#c4a000">codeSystem=</span><span style="color:#4e9a06">&#34;1.2.250.1.213.1.1.4.9&#34;</span> <span style="color:#c4a000">displayName=</span><span style="color:#4e9a06">&#34;Ambulatoire&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;/representedOrganization&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;/assignedEntity&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;/performer&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;/serviceEvent&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;/documentationOf&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;componentOf&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;encompassingEncounter&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;effectiveTime</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;UNK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;location&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;healthCareFacility&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;code</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;SA41&#34;</span> <span style="color:#c4a000">codeSystem=</span><span style="color:#4e9a06">&#34;1.2.250.1.71.4.2.4&#34;</span> <span style="color:#c4a000">displayName=</span><span style="color:#4e9a06">&#34;Autre établissement du domaine social &#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;/healthCareFacility&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;/location&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;/encompassingEncounter&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;/componentOf&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;component&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;structuredBody&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;component&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;section&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;templateId</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;1.3.6.1.4.1.19376.1.3.3.2.1&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;code</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;18719-5&#34;</span> <span style="color:#c4a000">codeSystem=</span><span style="color:#4e9a06">&#34;2.16.840.1.113883.6.1&#34;</span> <span style="color:#c4a000">displayName=</span><span style="color:#4e9a06">&#34;Biochimie&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;title&gt;</span>Biochimie<span style="color:#204a87;font-weight:bold">&lt;/title&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;component&gt;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&lt;section&gt;</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&lt;templateId</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;1.3.6.1.4.1.19376.1.3.3.2.2&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&lt;code</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;NASK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&lt;text&gt;</span>
</span></span><span style="display:flex;"><span>                                <span style="color:#204a87;font-weight:bold">&lt;table&gt;</span>
</span></span><span style="display:flex;"><span>                                    <span style="color:#204a87;font-weight:bold">&lt;thead&gt;</span>
</span></span><span style="display:flex;"><span>                                        <span style="color:#204a87;font-weight:bold">&lt;tr&gt;</span>
</span></span><span style="display:flex;"><span>                                            <span style="color:#204a87;font-weight:bold">&lt;td&gt;</span>Unité<span style="color:#204a87;font-weight:bold">&lt;/td&gt;</span>
</span></span><span style="display:flex;"><span>                                            <span style="color:#204a87;font-weight:bold">&lt;td&gt;</span>Date<span style="color:#204a87;font-weight:bold">&lt;/td&gt;</span>
</span></span><span style="display:flex;"><span>                                            <span style="color:#204a87;font-weight:bold">&lt;td&gt;</span>Valeur<span style="color:#204a87;font-weight:bold">&lt;/td&gt;</span>
</span></span><span style="display:flex;"><span>                                            <span style="color:#204a87;font-weight:bold">&lt;td&gt;</span>Valeur Référence<span style="color:#204a87;font-weight:bold">&lt;/td&gt;</span>
</span></span><span style="display:flex;"><span>                                            <span style="color:#204a87;font-weight:bold">&lt;td&gt;</span>Interprétation<span style="color:#204a87;font-weight:bold">&lt;/td&gt;</span>
</span></span><span style="display:flex;"><span>                                        <span style="color:#204a87;font-weight:bold">&lt;/tr&gt;</span>
</span></span><span style="display:flex;"><span>                                    <span style="color:#204a87;font-weight:bold">&lt;/thead&gt;</span>
</span></span><span style="display:flex;"><span>                                    <span style="color:#204a87;font-weight:bold">&lt;tbody&gt;</span>
</span></span><span style="display:flex;"><span>                                        <span style="color:#204a87;font-weight:bold">&lt;tr&gt;</span>
</span></span><span style="display:flex;"><span>                                            <span style="color:#204a87;font-weight:bold">&lt;td&gt;</span>g/L<span style="color:#204a87;font-weight:bold">&lt;/td&gt;</span>
</span></span><span style="display:flex;"><span>                                            <span style="color:#204a87;font-weight:bold">&lt;td&gt;</span>24/05/2014<span style="color:#204a87;font-weight:bold">&lt;/td&gt;</span>
</span></span><span style="display:flex;"><span>                                            <span style="color:#204a87;font-weight:bold">&lt;td&gt;</span>1.5<span style="color:#204a87;font-weight:bold">&lt;/td&gt;</span>
</span></span><span style="display:flex;"><span>                                            <span style="color:#204a87;font-weight:bold">&lt;td&gt;</span>0.8 - 1.26<span style="color:#204a87;font-weight:bold">&lt;/td&gt;</span>
</span></span><span style="display:flex;"><span>                                            <span style="color:#204a87;font-weight:bold">&lt;td&gt;</span><span style="color:#ce5c00">&amp;gt;</span><span style="color:#204a87;font-weight:bold">&lt;/td&gt;</span>
</span></span><span style="display:flex;"><span>                                        <span style="color:#204a87;font-weight:bold">&lt;/tr&gt;</span>
</span></span><span style="display:flex;"><span>                                    <span style="color:#204a87;font-weight:bold">&lt;/tbody&gt;</span>
</span></span><span style="display:flex;"><span>                                <span style="color:#204a87;font-weight:bold">&lt;/table&gt;</span>
</span></span><span style="display:flex;"><span>                                <span style="color:#204a87;font-weight:bold">&lt;paragraph&gt;</span>Interprétation :  Résultats Validés par : auteurNom auteurPrenom - null<span style="color:#204a87;font-weight:bold">&lt;/paragraph&gt;</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&lt;/text&gt;</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&lt;entry&gt;</span>
</span></span><span style="display:flex;"><span>                                <span style="color:#204a87;font-weight:bold">&lt;observation</span> <span style="color:#c4a000">classCode=</span><span style="color:#4e9a06">&#34;OBS&#34;</span> <span style="color:#c4a000">moodCode=</span><span style="color:#4e9a06">&#34;EVN&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                                    <span style="color:#204a87;font-weight:bold">&lt;code</span> <span style="color:#c4a000">xsi:type=</span><span style="color:#4e9a06">&#34;CE&#34;</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;16915-1&#34;</span> <span style="color:#c4a000">codeSystem=</span><span style="color:#4e9a06">&#34;2.16.840.1.113883.6.1&#34;</span> <span style="color:#c4a000">displayName=</span><span style="color:#4e9a06">&#34;Glucose post prandial [Masse/Volume] Sérum/Plasma ; Numérique&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                                    <span style="color:#204a87;font-weight:bold">&lt;statusCode</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;completed&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                                    <span style="color:#204a87;font-weight:bold">&lt;effectiveTime</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;20140524101202+0200&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                                    <span style="color:#204a87;font-weight:bold">&lt;value</span> <span style="color:#c4a000">xsi:type=</span><span style="color:#4e9a06">&#34;PQ&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;1.5&#34;</span> <span style="color:#c4a000">unit=</span><span style="color:#4e9a06">&#34;g/L&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                                    <span style="color:#204a87;font-weight:bold">&lt;interpretationCode</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;&amp;gt;&#34;</span> <span style="color:#c4a000">codeSystem=</span><span style="color:#4e9a06">&#34;2.16.840.1.113883.5.83&#34;</span> <span style="color:#c4a000">displayName=</span><span style="color:#4e9a06">&#34;Au dessus, hors échelle de l&#39;instrument de mesure&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                                    <span style="color:#204a87;font-weight:bold">&lt;methodCode</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;NASK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                                    <span style="color:#204a87;font-weight:bold">&lt;referenceRange</span> <span style="color:#c4a000">typeCode=</span><span style="color:#4e9a06">&#34;REFV&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                                        <span style="color:#204a87;font-weight:bold">&lt;observationRange&gt;</span>
</span></span><span style="display:flex;"><span>                                            <span style="color:#204a87;font-weight:bold">&lt;value</span> <span style="color:#c4a000">xsi:type=</span><span style="color:#4e9a06">&#34;IVL_PQ&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                                                <span style="color:#204a87;font-weight:bold">&lt;low</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;0.8&#34;</span> <span style="color:#c4a000">unit=</span><span style="color:#4e9a06">&#34;g/L&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                                                <span style="color:#204a87;font-weight:bold">&lt;high</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;1.26&#34;</span> <span style="color:#c4a000">unit=</span><span style="color:#4e9a06">&#34;g/L&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                                            <span style="color:#204a87;font-weight:bold">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span>                                        <span style="color:#204a87;font-weight:bold">&lt;/observationRange&gt;</span>
</span></span><span style="display:flex;"><span>                                    <span style="color:#204a87;font-weight:bold">&lt;/referenceRange&gt;</span>
</span></span><span style="display:flex;"><span>                                <span style="color:#204a87;font-weight:bold">&lt;/observation&gt;</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&lt;/entry&gt;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&lt;/section&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;/component&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;/section&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;/component&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;/structuredBody&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;/component&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&lt;/ClinicalDocument&gt;</span>
</span></span></code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-7209da8360d7e08721a383f6264829de">4.3 - Vaccinations : Note et Historiques</h1>
    <div class="lead">Support des Notes et Historiques de Vaccination défini dans le Cadre d’Intéropérablité SIS de l’ANS</div>
	<p><strong>@Since DMP-5.0</strong></p>
<h2 id="note-de-vaccination">Note de vaccination</h2>
<p>Il est possible désormais de soumettre des notes de vaccinations dans le DMP et d’en récupérer l’historique simplement.
Les spécifications de ce volet vaccination sont disponibles sur le site de l’ANS :  <a href="https://esante.gouv.fr/volet-vac-vaccination">https://esante.gouv.fr/volet-vac-vaccination</a></p>
<h3 id="description">Description</h3>
<p>Générer une Note de Vaccination (<a href="cda_note_vaccination.xml">cda_note_vaccination.xml</a>) consiste à générer une entête similaire à l’ensemble des volets définis par le CI-SIS dont le volet à <a href="../structurationMinimale/">structuration minimale</a>, mais aussi un corps dit structuré contenant une et une seule note de vaccination. Cette section structurée est composée de deux parties.</p>
<ul>
<li>Une partie commentaire lisible en html facilement transposable avec une feuille de style XSLT:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">text</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">table</span> <span style="color:#c4a000">border</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;1&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">thead</span> <span style="color:#c4a000">align</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;center&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">tr</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">th</span> <span style="color:#c4a000">align</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;center&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Date de l&#39;acte<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">th</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">th</span> <span style="color:#c4a000">align</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;center&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Nom du vaccin<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">th</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">th</span> <span style="color:#c4a000">align</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;center&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Type d&#39;administration<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">th</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">th</span> <span style="color:#c4a000">align</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;center&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Numéro de lot<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">th</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">th</span> <span style="color:#c4a000">align</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;center&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Voie d&#39;administration<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">th</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">th</span> <span style="color:#c4a000">align</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;center&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Site d&#39;administration<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">th</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">th</span> <span style="color:#c4a000">align</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;center&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Vaccinateur<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">th</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">th</span> <span style="color:#c4a000">align</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;center&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Vaccin ajouté ou modifié par<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">th</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">th</span> <span style="color:#c4a000">align</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;center&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Commentaire<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">th</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">tr</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">thead</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">tbody</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">tr</span> <span style="color:#c4a000">ID</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;uuid-87dd18c7-a980-43f7-93bd-2b6620aa8c80&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">td</span> <span style="color:#c4a000">align</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;left&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>29/10/2022<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">td</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">td</span> <span style="color:#c4a000">ID</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;uuid-0f88f638-469d-400d-86e5-3424e4956b28&#34;</span> <span style="color:#c4a000">align</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;left&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>VACCIN TETANIQUE PASTEUR, suspension injectable en seringue préremplie vaccin tétanique adsorbé<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">td</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">td</span> <span style="color:#c4a000">align</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;left&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>1ère série vaccinante - 2<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">td</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">td</span> <span style="color:#c4a000">align</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;left&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>870343<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">td</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">td</span> <span style="color:#c4a000">align</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;left&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>intra musculaire<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">td</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">td</span> <span style="color:#c4a000">ID</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;uuid-d4657f99-d007-4429-a9ae-3787abb26e20&#34;</span> <span style="color:#c4a000">align</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;left&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>LD<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">td</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">td</span> <span style="color:#c4a000">align</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;left&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Dr MEDECIN RPPS0022297 VIRGINIE - Médecin - Qualifié en Médecine Générale (SM)<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">td</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">td</span> <span style="color:#c4a000">align</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;left&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Dr MEDECIN RPPS0022297 VIRGINIE - Médecin - Qualifié en Médecine Générale (SM)<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">td</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">td</span> <span style="color:#c4a000">ID</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;uuid-1f57e117-0315-4f13-9079-028126f29e84&#34;</span> <span style="color:#c4a000">align</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;left&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Commentaire de la vaccination<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">td</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">tr</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">tbody</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">table</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">text</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span></code></pre></div><ul>
<li>une partie structurée interprétable par la machine :</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&lt;substanceAdministration</span> <span style="color:#c4a000">classCode=</span><span style="color:#4e9a06">&#34;SBADM&#34;</span> <span style="color:#c4a000">moodCode=</span><span style="color:#4e9a06">&#34;EVN&#34;</span> <span style="color:#c4a000">negationInd=</span><span style="color:#4e9a06">&#34;false&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;templateId</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;2.16.840.1.113883.10.20.1.24&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;templateId</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;1.3.6.1.4.1.19376.1.5.3.1.4.12&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;templateId</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;1.2.250.1.213.1.1.3.45&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;id</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;0e2111cf-44fd-4ed3-a5bd-0a19de0faa2a&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;code</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;INITIMMUNIZ&#34;</span> <span style="color:#c4a000">codeSystem=</span><span style="color:#4e9a06">&#34;2.16.840.1.113883.5.4&#34;</span> <span style="color:#c4a000">codeSystemName=</span><span style="color:#4e9a06">&#34;HL7:ActCode&#34;</span> <span style="color:#c4a000">displayName=</span><span style="color:#4e9a06">&#34;1ère série vaccinante&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;text&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;reference</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;#uuid-87dd18c7-a980-43f7-93bd-2b6620aa8c80&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;/text&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;statusCode</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;completed&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;effectiveTime</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;20221029&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;routeCode</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;IM&#34;</span> <span style="color:#c4a000">codeSystem=</span><span style="color:#4e9a06">&#34;2.16.840.1.113883.5.112&#34;</span> <span style="color:#c4a000">codeSystemName=</span><span style="color:#4e9a06">&#34;routeOfAdministration&#34;</span> <span style="color:#c4a000">displayName=</span><span style="color:#4e9a06">&#34;intra musculaire&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;approachSiteCode</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;LD&#34;</span> <span style="color:#c4a000">codeSystem=</span><span style="color:#4e9a06">&#34;2.16.840.1.113883.5.1052&#34;</span> <span style="color:#c4a000">codeSystemName=</span><span style="color:#4e9a06">&#34;HumanSubstanceAdministrationSite&#34;</span> <span style="color:#c4a000">displayName=</span><span style="color:#4e9a06">&#34;LD&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;originalText&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;reference</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;#uuid-d4657f99-d007-4429-a9ae-3787abb26e20&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;/originalText&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;/approachSiteCode&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;doseQuantity</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;1&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;consumable</span> <span style="color:#c4a000">typeCode=</span><span style="color:#4e9a06">&#34;CSM&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;manufacturedProduct&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;templateId</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;2.16.840.1.113883.10.20.1.53&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;templateId</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;1.3.6.1.4.1.19376.1.5.3.1.4.7.2&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;templateId</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;1.2.250.1.213.1.1.3.43&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;manufacturedMaterial&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;code</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;67718545&#34;</span> <span style="color:#c4a000">codeSystem=</span><span style="color:#4e9a06">&#34;1.2.250.1.213.2.3.1&#34;</span> <span style="color:#c4a000">codeSystemName=</span><span style="color:#4e9a06">&#34;CIS&#34;</span> <span style="color:#c4a000">displayName=</span><span style="color:#4e9a06">&#34;VACCIN TETANIQUE PASTEUR, suspension injectable en seringue préremplie vaccin tétanique adsorbé&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;originalText&gt;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&lt;reference</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;#uuid-0f88f638-469d-400d-86e5-3424e4956b28&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;/originalText&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;translation</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;J07CA06&#34;</span> <span style="color:#c4a000">codeSystem=</span><span style="color:#4e9a06">&#34;2.16.840.1.113883.6.73&#34;</span> <span style="color:#c4a000">codeSystemName=</span><span style="color:#4e9a06">&#34;ATC&#34;</span> <span style="color:#c4a000">displayName=</span><span style="color:#4e9a06">&#34;Diphtérie - Haemophilus influenzae B - coqueluche - poliomyélite - tétanos&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;translation</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;3400932857241&#34;</span> <span style="color:#c4a000">codeSystem=</span><span style="color:#4e9a06">&#34;1.2.250.1.213.2.3.2&#34;</span> <span style="color:#c4a000">codeSystemName=</span><span style="color:#4e9a06">&#34;Nomenclature CIP&#34;</span> <span style="color:#c4a000">displayName=</span><span style="color:#4e9a06">&#34;1 seringue(s) préremplie(s) en verre de 0,5 ml&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;/code&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>vaccin tetanique pasteur<span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;lotNumberText&gt;</span>870343<span style="color:#204a87;font-weight:bold">&lt;/lotNumberText&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;/manufacturedMaterial&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;/manufacturedProduct&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;/consumable&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;performer</span> <span style="color:#c4a000">typeCode=</span><span style="color:#4e9a06">&#34;PRF&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;time/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;assignedEntity&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;id</span> <span style="color:#c4a000">extension=</span><span style="color:#4e9a06">&#34;3380784801/123456&#34;</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;1.2.250.1.71.4.2.1&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;code</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;G15_10/SM26&#34;</span> <span style="color:#c4a000">codeSystem=</span><span style="color:#4e9a06">&#34;1.2.250.1.213.1.1.4.5&#34;</span> <span style="color:#c4a000">displayName=</span><span style="color:#4e9a06">&#34;Médecin - Qualifié en Médecine Générale (SM)&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;addr</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;NASK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;telecom</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;NASK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;assignedPerson&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;given&gt;</span>VIRGINIE<span style="color:#204a87;font-weight:bold">&lt;/given&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;family&gt;</span>MEDECIN RPPS0022297<span style="color:#204a87;font-weight:bold">&lt;/family&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;/assignedPerson&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;representedOrganization&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;id</span> <span style="color:#c4a000">extension=</span><span style="color:#4e9a06">&#34;1380784801&#34;</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;1.2.250.1.71.4.2.2&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>centre de dialyse<span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;telecom</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;NASK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;addr</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;NASK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;standardIndustryClassCode</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;AMBULATOIRE&#34;</span> <span style="color:#c4a000">codeSystem=</span><span style="color:#4e9a06">&#34;1.2.250.1.213.1.1.4.9&#34;</span> <span style="color:#c4a000">displayName=</span><span style="color:#4e9a06">&#34;Ambulatoire&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;/representedOrganization&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;/assignedEntity&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;/performer&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;author&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;time</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;20221029&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;assignedAuthor&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;id</span> <span style="color:#c4a000">extension=</span><span style="color:#4e9a06">&#34;3380784801/123456&#34;</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;1.2.250.1.71.4.2.1&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;code</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;G15_10/SM26&#34;</span> <span style="color:#c4a000">codeSystem=</span><span style="color:#4e9a06">&#34;1.2.250.1.213.1.1.4.5&#34;</span> <span style="color:#c4a000">displayName=</span><span style="color:#4e9a06">&#34;Médecin - Qualifié en Médecine Générale (SM)&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;addr</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;NASK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;telecom</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;NASK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;assignedPerson&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;given&gt;</span>VIRGINIE<span style="color:#204a87;font-weight:bold">&lt;/given&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&lt;family&gt;</span>MEDECIN RPPS0022297<span style="color:#204a87;font-weight:bold">&lt;/family&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;/assignedPerson&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;representedOrganization&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;id</span> <span style="color:#c4a000">extension=</span><span style="color:#4e9a06">&#34;1380784801&#34;</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;1.2.250.1.71.4.2.2&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>centre de dialyse<span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;telecom</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;NASK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;addr</span> <span style="color:#c4a000">nullFlavor=</span><span style="color:#4e9a06">&#34;NASK&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;/representedOrganization&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;/assignedAuthor&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;/author&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;entryRelationship</span> <span style="color:#c4a000">typeCode=</span><span style="color:#4e9a06">&#34;SUBJ&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;observation</span> <span style="color:#c4a000">classCode=</span><span style="color:#4e9a06">&#34;OBS&#34;</span> <span style="color:#c4a000">moodCode=</span><span style="color:#4e9a06">&#34;EVN&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;templateId</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;2.16.840.1.113883.10.20.1.46&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;templateId</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;1.2.250.1.213.1.1.3.82&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;code</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;30973-2&#34;</span> <span style="color:#c4a000">codeSystem=</span><span style="color:#4e9a06">&#34;2.16.840.1.113883.6.1&#34;</span> <span style="color:#c4a000">codeSystemName=</span><span style="color:#4e9a06">&#34;LOINC&#34;</span> <span style="color:#c4a000">displayName=</span><span style="color:#4e9a06">&#34;Rang de la vaccination&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;statusCode</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;completed&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;value</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;2&#34;</span> <span style="color:#c4a000">xsi:type=</span><span style="color:#4e9a06">&#34;INT&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;/observation&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;/entryRelationship&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;entryRelationship</span> <span style="color:#c4a000">typeCode=</span><span style="color:#4e9a06">&#34;SUBJ&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;act</span> <span style="color:#c4a000">classCode=</span><span style="color:#4e9a06">&#34;ACT&#34;</span> <span style="color:#c4a000">moodCode=</span><span style="color:#4e9a06">&#34;EVN&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;templateId</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;2.16.840.1.113883.10.20.1.40&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;templateId</span> <span style="color:#c4a000">root=</span><span style="color:#4e9a06">&#34;1.3.6.1.4.1.19376.1.5.3.1.4.2&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;code</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;48767-8&#34;</span> <span style="color:#c4a000">codeSystem=</span><span style="color:#4e9a06">&#34;2.16.840.1.113883.6.1&#34;</span> <span style="color:#c4a000">codeSystemName=</span><span style="color:#4e9a06">&#34;LOINC&#34;</span> <span style="color:#c4a000">displayName=</span><span style="color:#4e9a06">&#34;Commentaire&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;text&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;reference</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;#uuid-1f57e117-0315-4f13-9079-028126f29e84&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                Commentaire de la vaccination<span style="color:#204a87;font-weight:bold">&lt;/text&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;statusCode</span> <span style="color:#c4a000">code=</span><span style="color:#4e9a06">&#34;completed&#34;</span><span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;/act&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;/entryRelationship&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&lt;/substanceAdministration&gt;</span>
</span></span></code></pre></div><p>Le support de la note de vaccination dans la DevBox-Santé vous affranchit de la génération de ces deux structures ainsi que d’en gérer les liens entre ces deux structures.</p>
<p>Dans le modèle de la DevBox-Santé une note de vaccination est :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#4e9a06">&#34;vaccination&#34;</span><span style="color:#a40000">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;id&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;be9fdb2a-af27-47e0-92da-a00628f640e0&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;code&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;INITIMMUNIZ&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;identifiantNomenclature&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2.16.840.1.113883.5.4&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;libelle&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1ère série vaccinante&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;status&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;completed&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;dateTimeAdministration&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2022-11-10T12:18:44.982Z&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;doseAdministree&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;value&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;voieAdministration&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;IM&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;identifiantNomenclature&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2.16.840.1.113883.5.112&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;libelle&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;intra musculaire&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;regionAdministration&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;LD&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;identifiantNomenclature&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2.16.840.1.113883.5.1052&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;libelle&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Deltoïde gauche&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;consommable&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;nom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;vaccin tetanique pasteur&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;code&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;67718545&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;identifiantNomenclature&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1.2.250.1.213.2.3.1&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;libelle&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;VACCIN TETANIQUE PASTEUR, suspension injectable en seringue préremplie vaccin tétanique adsorbé&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;traductions&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;J07CA06&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;identifiantNomenclature&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2.16.840.1.113883.6.73&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;libelle&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Diphtérie - Haemophilus influenzae B - coqueluche - poliomyélite - tétanos&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;3400932857241&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;identifiantNomenclature&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1.2.250.1.213.2.3.2&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;libelle&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1 seringue(s) préremplie(s) en verre de 0,5 ml&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;numeroLot&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;926018&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h3 id="en-java">En Java</h3>
<p>Pour génerer un CDA note de vaccination et le soumettre dans le DMP avec l’API Java, il faut initialiser une <code>DMPCNoteVaccination</code> à l’aide de son builder puis l’associer comme tout autre document à une requête de soumission :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#000">ZonedDateTime</span> <span style="color:#000">now</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">clock</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getUtc</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">var</span> <span style="color:#000">noteVaccination</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">DMPCNoteVaccination</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">legalAuthenticator</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">auteur</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">patient</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">patient</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">confidentialities</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">List</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">of</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;N&#34;</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">practiceSetting</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;AMBULATOIRE&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">creationDateTime</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">now</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">serviceStartDateTime</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">now</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">minusHours</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">3</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">serviceStopDateTime</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">now</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">minusHours</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">2</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">vaccination</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCNoteVaccination</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">Vaccination</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">UUID</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">randomUUID</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">toString</span><span style="color:#ce5c00;font-weight:bold">())</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">code</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">valeur</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;INITIMMUNIZ&#34;</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">identifiantNomenclature</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Oids</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">HL7_2_16_840_1_113883</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">_5_4_ACT_CODE</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">val</span><span style="color:#ce5c00;font-weight:bold">()).</span><span style="color:#c4a000">libelle</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;1ère série vaccinante&#34;</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">())</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">status</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;completed&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">dateTimeAdministration</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">now</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">minusHours</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">2</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">voieAdministration</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">valeur</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;IM&#34;</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">identifiantNomenclature</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Oids</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">HL7_2_16_840_1_113883</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">_5_112_ROUTE_OF_ADMINISTRATION</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">val</span><span style="color:#ce5c00;font-weight:bold">()).</span><span style="color:#c4a000">libelle</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;intra musculaire&#34;</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">())</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">regionAdministration</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">valeur</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;LD&#34;</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">identifiantNomenclature</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Oids</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">HL7_2_16_840_1_113883</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">_5_1052_HUMAN_SUBSTANCE_ADMINISTRATION_SITE</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">val</span><span style="color:#ce5c00;font-weight:bold">()).</span><span style="color:#c4a000">libelle</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Deltoïde gauche&#34;</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">())</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">doseAdministree</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCStructuredBody</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">Value</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">value</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;1&#34;</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">())</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">consommable</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCStructuredBody</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">Consommable</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">code</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">valeur</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;67718545&#34;</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">identifiantNomenclature</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Oids</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">ANS_1_2_250_1_213</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">_2_3_1_CIS</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">val</span><span style="color:#ce5c00;font-weight:bold">()).</span><span style="color:#c4a000">libelle</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;VACCIN TETANIQUE PASTEUR, suspension injectable en seringue préremplie vaccin tétanique adsorbé&#34;</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">())</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">traduction</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">valeur</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;J07CA06&#34;</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">identifiantNomenclature</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Oids</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">HL7_2_16_840_1_113883</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">_6_73_ATC</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">val</span><span style="color:#ce5c00;font-weight:bold">()).</span><span style="color:#c4a000">libelle</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Diphtérie - Haemophilus influenzae B - coqueluche - poliomyélite - tétanos&#34;</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">())</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">traduction</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">valeur</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;3400932857241&#34;</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">identifiantNomenclature</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Oids</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">ANS_1_2_250_1_213</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">_2_3_2_CIP</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">val</span><span style="color:#ce5c00;font-weight:bold">()).</span><span style="color:#c4a000">libelle</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;1 seringue(s) préremplie(s) en verre de 0,5 ml&#34;</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">())</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">nom</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;vaccin tetanique pasteur&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">numeroLot</span><span style="color:#ce5c00;font-weight:bold">((</span><span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">currentTimeMillis</span><span style="color:#ce5c00;font-weight:bold">())</span> <span style="color:#ce5c00;font-weight:bold">%</span> <span style="color:#000">1000000</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#4e9a06">&#34;&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">auteur</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCParticipation</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">personnelSante</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">auteur</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">())</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">executant</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCParticipation</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">personnelSante</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">executant</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">())</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">rangVaccination</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCStructuredBody</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">Value</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">value</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;2&#34;</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">())</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">commentaire</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Commentaire de la vaccination&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">td21SubmitDocuments</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">TD21Request</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCSoumission</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">document</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">noteVaccination</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">title</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Exemple de soumission wrapped&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">contentType</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;04&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">patient</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">patient</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">()));</span>
</span></span></code></pre></div><h3 id="via-lapi-rest">Via l’API REST</h3>
<p>En Rest, il faut préciser le type de document DMP soumis via <code>dmpcType: &quot;NOTE_VAC&quot;</code> et fournir les informations json</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#a40000">curl</span> <span style="color:#a40000">--location</span> <span style="color:#a40000">--request</span> <span style="color:#a40000">POST</span> <span style="color:#a40000">&#39;http:</span><span style="color:#8f5902;font-style:italic">//127.0.0.1:8080/dmp/td21SubmitDocuments&#39; \
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#a40000">--header</span> <span style="color:#a40000">&#39;Content-Type:</span> <span style="color:#a40000">application/json&#39;</span> <span style="color:#a40000">\</span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">--data-raw</span> <span style="color:#a40000">&#39;</span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;context&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a40000">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;request&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;submission&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;title&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;soumission d&#39;un document wrapped&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;contentType&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;04&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;patient&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;matriculeINS&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;279035121518989&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;identifiantSysteme&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1.2.250.1.213.1.4.10&#34;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;documents&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;dmpcType&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;NOTE_VAC&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;patient&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;matriculeINS&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;279035121518989&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;identifiantSysteme&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1.2.250.1.213.1.4.10&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;classCode&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;52&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;confidentialities&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#4e9a06">&#34;N&#34;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;creationDateTime&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2022-11-10T14:18:44.982Z&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;format&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;urn:asip:ci-sis:vac-note:2021&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;practiceSetting&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;AMBULATOIRE&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;serviceStartDateTime&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2022-11-10T11:18:44.982Z&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;serviceStopDateTime&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2022-11-10T12:18:44.982Z&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;type&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;87273-9&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;versionNumber&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;vaccination&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;id&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;be9fdb2a-af27-47e0-92da-a00628f640e0&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;code&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;INITIMMUNIZ&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;identifiantNomenclature&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2.16.840.1.113883.5.4&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;libelle&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1ère série vaccinante&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;status&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;completed&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;dateTimeAdministration&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2022-11-10T12:18:44.982Z&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;doseAdministree&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;value&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;voieAdministration&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;IM&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;identifiantNomenclature&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2.16.840.1.113883.5.112&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;libelle&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;intra musculaire&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;regionAdministration&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;LD&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;identifiantNomenclature&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2.16.840.1.113883.5.1052&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;libelle&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Deltoïde gauche&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;consommable&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;nom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;vaccin tetanique pasteur&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;code&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;67718545&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;identifiantNomenclature&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1.2.250.1.213.2.3.1&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;libelle&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;VACCIN TETANIQUE PASTEUR, suspension injectable en seringue préremplie vaccin tétanique adsorbé&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;traductions&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                                <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;J07CA06&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                                <span style="color:#204a87;font-weight:bold">&#34;identifiantNomenclature&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2.16.840.1.113883.6.73&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                                <span style="color:#204a87;font-weight:bold">&#34;libelle&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Diphtérie - Haemophilus influenzae B - coqueluche - poliomyélite - tétanos&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                                <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;3400932857241&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                                <span style="color:#204a87;font-weight:bold">&#34;identifiantNomenclature&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1.2.250.1.213.2.3.2&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                                <span style="color:#204a87;font-weight:bold">&#34;libelle&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1 seringue(s) préremplie(s) en verre de 0,5 ml&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;numeroLot&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;926018&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;executant&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;personnelSante&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#a40000">...</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;auteur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;personnelSante&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#a40000">...</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;rangVaccination&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;value&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;commentaire&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Commentaire de la vaccination&#34;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h5 id="remplacement-dune-note-de-vaccination">Remplacement d&rsquo;une note de vaccination</h5>
<p>Le remplacement d&rsquo;une note de vaccination est identique au <a href="/dmp/howtos/transactions/#remplacement">remplacement d&rsquo;un document</a> à l&rsquo;exception près qu&rsquo;il faut préciser la même <code>idVaccination</code> dans la vaccination. remplaçante.</p>
<blockquote>
<p><strong>EX_2.1-2030</strong> : Les identifiants des vaccinations (i.e. identifiant des entry/substanceAdministration) dans les notes de vaccination doivent être générés de manière « mondialement unique », via un UUID (voir <a href="https://fr.wikipedia.org/wiki/Universally_unique_identifier">https://fr.wikipedia.org/wiki/Universally_unique_identifier</a>) dans l’attribut id/@root seulement.
Cet identifiant sert ensuite à retrouver la vaccination dans l’historique de vaccinations lors de sa mise à jour par le SI DMP. Il ne doit donc jamais rentrer en conflit avec l’identifiant d’une autre vaccination.</p>
</blockquote>
<p>L&rsquo;identifiant de vaccination est donc utile au DMP pour la bonne génération de l&rsquo;historique de vaccinations.</p>
<h3 id="nomenclatures-utilisées">Nomenclatures utilisées</h3>
<h4 id="consommable">Consommable</h4>
<p>Les consommables décrivant le vaccin doivent utiliser des nomenclatures spécifiques telle que la CIS, la CIP et l&rsquo;ATC dans les conditions définies par le guide d&rsquo;intégration. Elles sont liées aux bases de données scientifiques et nomenclatures standards. Pour plus de renseignements, allez vers <a href="https://base-donnees-publique.medicaments.gouv.fr/">https://base-donnees-publique.medicaments.gouv.fr/</a> ou encore <a href="https://smt.esante.gouv.fr/">https://smt.esante.gouv.fr/</a> .
Pour information, dans l&rsquo;<a href="https://annuaire-demo.devbox-sante.fr">annuaire</a> DevBox-Santé, nous proposons un moteur de recherche dans ces nomenclatures accessibles par API.</p>
<h4 id="type-de-vaccination-région-et-voie-dadministration">Type de vaccination, région et voie d&rsquo;administration</h4>
<p>Ces jeux de valeurs sont directement accessibles depuis les APIs de la DevBox-Santé DMP :</p>
<p><img src="NoteVaccination_JDVs.png" alt="note vaccination JDV"></p>
<h2 id="historique-de-vaccinations">Historique de Vaccinations</h2>
<p>L’historique de vaccinations peut être récupéré un un seul aller retour grâce à un nouveau point d’entrée dans l’API  :</p>
<ul>
<li>En Java :</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">interface</span> <span style="color:#000">DMPCClient</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8f5902;font-style:italic">//...
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#000">TD32Response</span> <span style="color:#000">td31_32findAndRetrieve</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCContext</span> <span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">TD31Request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">FindHistoriqueVaccinations</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><ul>
<li>En REST</li>
</ul>
<pre tabindex="0"><code class="language-curl" data-lang="curl">curl -X POST &#34;http://localhost:8080/dmp/td31_32FindAndRetrieveContent&#34; -H &#34;accept: */*&#34; -H &#34;Content-Type: application/json&#34; -d &#34;{ \&#34;context\&#34;: { \&#34;author\&#34;: { }, \&#34;modeAcces\&#34;: { \&#34;acces\&#34;: \&#34;NORMAL\&#34; } }, \&#34;request\&#34;: { \&#34;matriculeINS\&#34;: { \&#34;identifiantSysteme\&#34;: \&#34;string\&#34;, \&#34;valeur\&#34;: \&#34;string\&#34; }, \&#34;query\&#34;: \&#34;FindDocuments\&#34; }}&#34;
</code></pre><p>La réponse retourné contiendra le document CDA généré par le serveur DMP, le rendu HTML mais aussi et surtout un <code>DMPCHistoriqueVaccinations</code> retournant une liste de vaccination dans le même format que la vaccination envoyé dans une <code>DMPCNoteVaccination</code>.</p>
<pre tabindex="0"><code>public class DMPCHistoriqueVaccinations extends DMPCDocument {
    //...
    List&lt;DMPCNoteVaccination.Vaccination&gt; vaccinations; 
}
</code></pre><p>Voici un exemple d’historique de vaccinations retourné : <a href="historique_vaccinations.json">historique_vaccinations.json</a></p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-da13bc028f9c0bfbdd94acfeef6d83d6">4.4 - Votre volet CDA</h1>
    <div class="lead">Ou encore un document CDA généré par l&rsquo;intégrateur</div>
	<p><strong>@Since DMP-4.7.0</strong></p>
<p>Il est possible que vous souhaitiez maîtriser la génération du document CDA, et que vous souhaitiez seulement déléguer l&rsquo;envoi au DMP de ce dernier.</p>
<p>Il vous suffit de générer un document CDA conforme au <a href="/dmp/howtos/schematron">schematron</a> et de l&rsquo;envoyer dans une enveloppe de soummission au travers d&rsquo;une transaction <code>TD21submitDocuments</code></p>
<p>En java, Cela consiste à créer un document enveloppe (Wrapper) <code>DMPCDocumentCDAWrapped</code> avec les quelques metadata non déductibles du CDA et le cda sous forme d&rsquo;un tableau de byte:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">byte</span><span style="color:#ce5c00;font-weight:bold">[]</span> <span style="color:#000">documentCDA</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">integrateur</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">genereUnCDA</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">DMPCDocumentCdaWrapped</span> <span style="color:#000">wrappedDocument</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">DMPCDocumentCdaWrapped</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>                <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">format</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;urn:ihe:lab:xd-lab:2008&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>                <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">classCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;11&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>                <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">confidentialities</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">List</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">of</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;N&#34;</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>                <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">content</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">documentCda</span><span style="color:#ce5c00;font-weight:bold">)</span>  <span style="color:#8f5902;font-style:italic">// le contenu du CDA sera relu pour récupérer les métadonnées nécessaires à la soumission XDS du DMP.
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>                <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">DMPCSoumission</span> <span style="color:#000">dmpcSoumission</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">DMPCSoumission</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">dmpcSoumission</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">addDocument</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">wrappedDocument</span><span style="color:#ce5c00;font-weight:bold">);</span> <span style="color:#8f5902;font-style:italic">// ajout du document dans la soumission
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#000">dmpcSoumission</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setTitle</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Exemple de soumission wrapped&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">dmpcSoumission</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setPatient</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">patient</span><span style="color:#ce5c00;font-weight:bold">);</span>  <span style="color:#8f5902;font-style:italic">// attention à la cohérence des identifiants patients.
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#000">dmpcSoumission</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setContentType</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;04&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">td21SubmitDocuments</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">TD21Request</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">dmpcSoumission</span><span style="color:#ce5c00;font-weight:bold">));</span>
</span></span></code></pre></div><p>En Rest, il faut préciser le type de document DMP soumis via <code>dmpcType: &quot;wrapped&quot;</code> et mettre le contenu encodé en Base64</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#a40000">curl</span> <span style="color:#a40000">--location</span> <span style="color:#a40000">--request</span> <span style="color:#a40000">POST</span> <span style="color:#a40000">&#39;http:</span><span style="color:#8f5902;font-style:italic">//127.0.0.1:8080/dmp/td21SubmitDocuments&#39; \
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#a40000">--header</span> <span style="color:#a40000">&#39;Content-Type:</span> <span style="color:#a40000">application/json&#39;</span> <span style="color:#a40000">\</span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">--data-raw</span> <span style="color:#a40000">&#39;</span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;context&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a40000">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;request&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;submission&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;title&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;soumission d&#39;un document wrapped&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;contentType&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;04&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;patient&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;ins&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;148115530271002&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;internalId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;67890&#34;</span>
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;documents&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;dmpcType&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;wrapped&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;auteurs&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;internalId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;123456&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;nom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Durand&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;prenom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Pierre&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;classCode&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;11&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;comments&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Document Wrapped soumis via Postman&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;confidentialities&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#4e9a06">&#34;N&#34;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;format&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;urn:ihe:lab:xd-lab:2008&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;content&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;PD94bWwgdmVyc2lvbj0iMS4wIi
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">                    ... Document CDA xml encodé en base64 ...
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">                    BlbmNvZGluZz0iVVRGLTgiP1bWVudCB4bWxucz0i+&#34;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-e7bda94fe63e5211e3398cca290743ef">4.5 - CDA autoprésentable</h1>
    
	<p>La Devbox-santé DMP retourne ce type de document CDA sous trois formes :</p>
<ul>
<li><a href="f28f10a2-d288-11ec-8cbb-0050569e46a0-binary.xml">binaire</a> , c’est à dire, le document xml contenant le cda et sa feuille de style</li>
<li><a href="f28f10a2-d288-11ec-8cbb-0050569e46a0-cda.xml">cda</a></li>
<li><a href="f28f10a2-d288-11ec-8cbb-0050569e46a0.html">html</a>, c’est à dire le rendu html une fois la feuille de style xslt appliquée au cda.</li>
</ul>

</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-ddc5af5eaf3e7d26cd2868ea3caf8950">5 - Configuration</h1>
    <div class="lead">Comment paramètrer le DMP</div>
	<p>Comme toute application spring-boot, la DevBox-Santé DMP se configure au travers du fichier <code>application.yml</code>. Suivant le paradigm Convention Over Configuration, la DevBox-santé DMP peut fonctionner avec un minimum de configuration. Nous pouvons tout de même configurer et changer certains points de configuration.</p>
<h3 id="logging">Logging</h3>
<p>Comme la gestion des traces de l’application qui est différente en développement de la production.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">logging.level</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">fr.devboxsante</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">info</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">fr.devcoop</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">warn</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">org.springframework</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">error</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h3 id="spécifique-au-dmp">Spécifique au DMP</h3>
<p>Les configurations évolutives du DMP, peuvent être surchargées :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">devbox-sante</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">dmp</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">nomenclature</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic">#Url des jeux de valeurs utilisés pour le DMP</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">resourceName</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">JDV DMP_API_V2_XML.zip</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic">#Encodage de caractère utilisé dans ces jeux de valeurs.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">charset</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">UTF-8</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">parameters</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># Url du document xml contenant le paramétrage du DMP [FI-URL]</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">url</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">https://www.dmp.fr/web/dmp/documents/param-lps</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">delayBetweenSyncInHours</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">24</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">document</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">checkHash</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># path vers les resources de validation CDA.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># la resource peut être récupéré directement depuis le site de esante.gouv.fr ou depuis les resources fournies</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">cda.validator</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">resourceName</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">testContenuCDA_20221117.zip</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">charset</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ISO-8859-1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic">#serveur de temps</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">time.ntpServer</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">fr.pool.ntp.org</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>Dont Les urls du DMP</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">devbox-sante</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">dmp</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">url.prefix</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># environnement production</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#000">https://lps-igc-sante.dmp.gouv.fr/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">url.web.prefix</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># environnement production</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#000">https://ledmp.dmp.gouv.fr</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><blockquote>
<p>Remarque : pour plus d’informations sur les différents environnements <a href="/dmp/howtos/environnements">/dmp/howtos/environnements</a></p>
</blockquote>
<h3 id="les-informations-du-lps-homologuée">Les informations du LPS homologuée</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">debox-sante</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">dmp</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">lpsInfo</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">homologationId</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">XXX-xxxxxx-xxx</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">version</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">x.0</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">nom</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">VOTRE_LOGICIEL</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic">#Numéro de série ou identifiant de l&#39;installation du logiciel</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">id</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">1.2.250.1.287.1</span><span style="color:#000">.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">source</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># 1.2.250.1.287 est l&#39;OID de Devcoop</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># 1.2.250.1.287.1 est l&#39;OID correspondant à la DMPC pour Devcoop</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">idRoot</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">1.2.250.1.287.1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">idExtension</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">1234567</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h3 id="surcharge-les-lpsinfo-dans-le-header-http">Surcharge les LpsInfo dans le header HTTP</h3>
<p>La configuration du proxy REST contient les informations par défaut de configuration du LPS  cf. paragraphe précédent.
Il est toutefois possible de surcharger ces valeurs (comme le numeroAutorisation qui peut être confidentiel) en les passant dans les header HTTP des requêtes.</p>
<p>Voici la liste des informations LPS pouvant etre surchargées :</p>
<table>
<thead>
<tr>
<th style="text-align:left">Informations LPS</th>
<th style="text-align:center">Clef dans le header</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">id de l&rsquo;homologation</td>
<td style="text-align:center">dmp.lpsInfo.homologationId</td>
</tr>
<tr>
<td style="text-align:left">nom du lps</td>
<td style="text-align:center">dmp.lpsInfo.nom</td>
</tr>
<tr>
<td style="text-align:left">version du LPS</td>
<td style="text-align:center">dmp.lpsInfo.version</td>
</tr>
</tbody>
</table>
<p>Par exemple :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -X GET <span style="color:#4e9a06">&#34;http://localhost:8485/insi/rechercheAvecVitale&#34;</span> -H <span style="color:#4e9a06">&#34;accept: application/json&#34;</span> -H <span style="color:#4e9a06">&#34;dmp.lpsInfo.homologationId: ÀPréciser&#34;</span>
</span></span></code></pre></div><h2 id="différents-modes-dauthentification">Différents modes d&rsquo;authentification</h2>
<p>Les modes d&rsquo;authentification supportés par la DevBox-Santé DMP sont les deux demandés dans le guide d&rsquo;intégration du DMP.
Il s&rsquo;agit du mode d&rsquo;authentification directe (avec l&rsquo;usage de la carte CPS) et indirecte (avec l&rsquo;usage des certificats serveurs).
Ils peuvent être mis en œuvre de manière différente.</p>
<h3 id="authentification-directe">Authentification directe</h3>
<p>Configuration de la DevBox-santé DMP en authentification directe pour un usage des cartes CPS/CPE pour les authentifications et signatures.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">devbox-sante</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">dmp</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># authentification directe utilisant les certificats de la carte CPS</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">security.mode</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">cps</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h4 id="authentification-directe--cpsagent">Authentification directe : CPS Agent</h4>
<p>Un mode d&rsquo;authentification intégrant le module CPS agent se fait de la manière suivante :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">devbox-sante</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> 
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">dmp: </span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># authentification directe depuis le backend par l&#39;intermédiaire d&#39;un agent CPS sur le poste du client</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">security.mode</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">withCpsAgent</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h3 id="authentification-indirecte">Authentification indirecte</h3>
<p>Authentification indirecte par l&rsquo;utilisation des certificats serveurs. Pour en savoir plus sur l&rsquo;obtention des certificats, suivez cette <a href="/dmp/howtos/gestioncertificat">documentation</a>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">devbox-sante</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> 
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">dmp: </span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># authentification indirecte utilisant les certificats p12 serveurs</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">security.mode</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">p12</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># informations relatives au certificat smime</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">smime</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">p12</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">path</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#000">asip-p12-EL-TEST-ORG-SIGN-xxxx.p12</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">password</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#000">password</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># informations relatives au certificat ssl</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">ssl</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">p12</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">path</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#000">asip-p12-EL-TEST-ORG-AUTH_CLI-xxxx.p12</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">password</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#000">password</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h4 id="authentification-indirecte--multi-certificats">Authentification indirecte : multi-certificats</h4>
<p>Possibilité de supporter plusieurs certificats pour des établissements géographiques/juridiques différents :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">devbox-sante</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> 
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">dmp: </span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># authentification indirecte avec certificat nommé</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#204a87;font-weight:bold">security.mode</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">p12s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># informations relatives au certificat smime</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">smime</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">p12</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span>-<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">devcoop-sign</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">path</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">asip-p12-EL-TEST-ORG-SIGN-20210427-103248.p12</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">password</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">password</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span>-<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">devcoop-sign2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">path</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">autre.p12</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">password</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">autrePassword</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">ssl</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">p12</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span>-<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">devcoop-auth</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">path</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">asip-p12-EL-TEST-ORG-AUTH_CLI-20210427-102425.p12</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">password</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">password</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span>-<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">devcoop-auth2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">path</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">autre_auth.p12</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">password</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">autre_authPassword</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>Pour charger dynamiquement les certificats, ssl et smime il suffit de rajouter les noms des certificats (<code>dmpAuthenticationP12.name</code>, <code>dmpSignatureP12.name</code>) dans le header de la requête HTTP :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -X GET <span style="color:#4e9a06">&#34;http://hostname:port/dmp/td...&#34;</span> -H <span style="color:#4e9a06">&#34;accept: application/json&#34;</span> -H <span style="color:#4e9a06">&#34;amoP12.name: ÀPréciser&#34;</span>
</span></span></code></pre></div><h4 id="authentification-indirecte--p12-in-header-http">Authentification indirecte : P12 in Header HTTP</h4>
<p>Le mode <code>p12InHeader</code> permet de faire passer les deux certificats p12 dans l&rsquo;entête HTTP de la requête, cela permet à l&rsquo;appelant de conserver et décider des certificats utilisés lors de l&rsquo;appel du proxy.</p>
<p>Le header étant plus lourd il faudra veiller à ce que la configuration spring prenne en compte la taille du header d&rsquo;au moins 40Kb.</p>
<p>La configuration <code>application.yml</code> est :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">server</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">max-http-header-size</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">50KB</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">devbox-sante</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> 
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">dmp: </span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># authentification indirecte avec certificats dans le header HTTP</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#204a87;font-weight:bold">security.mode</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">p12InHeader</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>Et la requête doit contenir les informations dans le header.</p>
<pre tabindex="0"><code>curl --location --request POST &#39;http://localhost:8080/dmp/td21SubmitDocuments&#39; \
--header &#39;Content-Type: application/json&#39; \
--header &#39;dmpAuthentification.p12: MIIcdAIBAzCCHDo...AA==&#39; \
--header &#39;dmpAuthentification.password: PASSWORD&#39; \
--header &#39;dmpSignature.p12: MIIcoQIBAzCCH...IAA==&#39; \
--header &#39;dmpSignature.password: PASSWORD&#39; \
--data-raw &#39;{
    &#34;context&#34;: {
    },
    &#34;request&#34;: {
        ...
    }
}&#39;
</code></pre><h3 id="authentificatino-directe-stellair">Authentificatino directe Stellair</h3>
<p>Une page de documentation spécifique se trouve ici : <a href="/dmp/howtos/demo-stellair">/dmp/howtos/demo-stellair</a></p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-1896b5f02160c1af082ba091c22ecba1">6 - Howtos</h1>
    
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-9b74348bb827fc0660b4ba571dc86437">6.1 - Migrations</h1>
    <div class="lead">Guide de migration vers les versions supérieures de la DevBox-Santé DMP</div>
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-6710e3281519b88ee2aa5944e262c072">6.1.1 - Migration 4.7 vers la 5.0</h1>
    <div class="lead">Guide de migration vers la nouvelle version 5.0</div>
	<p>La version 5.0 apporte son lot de nouveautés, et tend vers une intégration la plus souple avec le DMP mais aussi les autres téléservices de santé.</p>
<p>Cette version supporte encore les anciennes requêtes mais déprecient certaines notions.</p>
<p>Une nouvelle collection postman est disponible dans l’espace public Postman : <a href="https://www.postman.com/universal-satellite-657415/workspace/devbox-sante-exemples/overview">https://www.postman.com/universal-satellite-657415/workspace/devbox-sante-exemples</a></p>
<h2 id="note-et-historique-de-vaccination">Note et Historique de vaccination</h2>
<p>Tout d’abord, nous avons ajouté le support de la note et historique de vaccinations, pour plus d’information consulter la documentation à ce sujet : <a href="/dmp/cda/vaccination">/dmp/cda/vaccination</a></p>
<h2 id="gestion-de-linsaméliorée">Gestion de l’INS améliorée</h2>
<p>Pour être en conformité avec l’INSi et simplifier l’intégration entre les deux composants DMP et INSi, dans tous les objets faisant référence à un INS, le couple identifiant/autorité est dorénavant utilisé au lieu de spécifier cette autorité dans le contexte de la requête.</p>
<p>Par exemple, une requête (td0.2 test d’existence) en version 4.7 :</p>
<p><img src="td0.2_4.7.png" alt="td0.2_4.7.png"></p>
<p>devient en 5.0 :</p>
<p><img src="td0.2_5.0.png" alt="td0.2_5.0.png"></p>
<p>Bien sur, l’ancienne forme est encore supporté sur cette version mais il est fortement conseillé d’adopter la nouvelle forme.</p>
<p>Le même exemple en java, un test d’existence en 4.7 :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setInsNirAutorite</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCContext</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">DMPCInsNirAutorite</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">TEST</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">TD02Response</span> <span style="color:#000">response</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">td02Exist</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">TD02Request</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;277076322082910&#34;</span><span style="color:#ce5c00;font-weight:bold">));</span>
</span></span></code></pre></div><p>devient en 5.0</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">var</span> <span style="color:#000">response</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">td02Exist</span><span style="color:#ce5c00;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">,</span>  
</span></span><span style="display:flex;"><span>                    <span style="color:#000">TD02Request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">matriculeINS</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Identifiant</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">valeur</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;277076322082910&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">identifiantSysteme</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Oids</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">ANS_1_2_250_1_213</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">_1_4_10_INS_NIR_TEST</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">val</span><span style="color:#ce5c00;font-weight:bold">())</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">())</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#ce5c00;font-weight:bold">);</span>
</span></span></code></pre></div><h2 id="validation">Validation</h2>
<p>Les messages de validation ont été améliorés en contextualisant la plupart des validations (en soumission, en récupération). Mais aussi plus finement, comme par exemple, la vérification qu’un code d’un document est bien dans son jeu de valeurs spécifique.</p>
<p>Quelques exemples de validations effectuées sur un <a href="https://bitbucket.org/devbox-sante/dmpc-api/src/master/src/main/java/fr/devboxsante/dmp/model/DMPCDocument.java"><code>DMPCDocument</code></a> :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">DMPCDocument</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#5c35cc;font-weight:bold">@CodeValid</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">jeuValeurs</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">JeuxValeursDMP</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">FORMAT_CODE</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">groups</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#000">OnSubmit</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">})</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#000">DMPCCode</span> <span style="color:#000">formatCode</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#5c35cc;font-weight:bold">@NotNull</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">groups</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#000">BinaryRequired</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">})</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#204a87;font-weight:bold">byte</span><span style="color:#ce5c00;font-weight:bold">[]</span> <span style="color:#000">content</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#5c35cc;font-weight:bold">@NotNull</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">groups</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#000">OnRetrieve</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">})</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#000">String</span> <span style="color:#000">entryUuid</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span></code></pre></div><p>Exemple de message obtenu dorénavant pour un classCode erronné dans le document :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span> <span style="color:#4e9a06">&#34;message&#34;</span><span style="color:#a40000">:</span> <span style="color:#4e9a06">&#34;Code 55 inexistant dans la nomenclature JDV_J57-ClassCode-DMP.tabs&#34;</span>
</span></span></code></pre></div><p>Par conséquent, certains contrôles sont plus sévères, et donc certains cas passant peuvent ne plus l’être. Par exemple, il n’est plus possible d’identifier un Personnel de santé avec un <code>internalId</code> sans préciser son identifiant de structure. Ou encore, une vérification du format des RPPS est effectué dans les documents envoyés.</p>
<p>Consulter, les sources pour visualiser les contrôles possibles : <a href="https://bitbucket.org/devbox-sante/dmpc-api/src/master/">https://bitbucket.org/devbox-sante/dmpc-api/src/master/</a></p>
<h2 id="ajout-de-la-td04">Ajout de la TD0.4</h2>
<p>La documentation sur cette nouvelle transaction est <a href="/dmp/howtos/transactions/#td04--lister-les-dmp-autoris%C3%A9s-depuis-version-50">ici</a></p>
<h2 id="autres-évolutions">Autres évolutions</h2>
<ul>
<li>
<p>Suppression de la TD0.0</p>
</li>
<li>
<p>Meilleur gestion des cartes CPF (en formation)</p>
</li>
<li>
<p>Gestion multicertificats</p>
</li>
<li>
<p>Suppression de la transaction TD1.5</p>
</li>
<li>
<p>Suppression du statut Médecint Traitant (TD0.3)</p>
</li>
<li>
<p>Contrôle des formats d’identifiant (RPPS, FINESS &hellip;)</p>
</li>
<li>
<p>&hellip; et d’autres encore cf. <a href="/dmp/versions">le release note</a></p>
</li>
</ul>

</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-f735462b8d0ff314fe0254e1f86e8d07">6.2 - Transactions supportées</h1>
    <div class="lead">Contient un exemple d&rsquo;utilisation de l&rsquo;API java et curl des différentes transactions supportées.</div>
	<p>Toutes transactions vers le DMP se fait en précisant un <code>DMPCContext</code> et une requête spécifique en argument d&rsquo;une méthode du <code>DMPCClient</code>.</p>
<p>Le <code>DMPCContext</code> contient les informations permettant de définir :</p>
<ul>
<li>L&rsquo;auteur de la transaction,</li>
<li>Le code de confidentialité de la transaction (connexion secrète, invisible aux représentants légaux du patient)</li>
<li>L&rsquo;autorité des cartes vitales utilisées (réelles ou test)</li>
</ul>
<p>À ce <code>DMPCContext</code> est associé un autre argument dépendant de la transaction réalisée.</p>
<h2 id="mode-dauthentification">Mode d&rsquo;authentification</h2>
<h3 id="directe-depus-version-31">Directe (depus version 3.1)</h3>
<p>En authentification directe, l&rsquo;utilisateur personnel de santé est authentifié par sa carte CPS/CPE, ces informations sont récupérées lors de la lecture de la carte CPS.</p>
<h3 id="indirecte-depuis-version-10">Indirecte (depuis version 1.0)</h3>
<p>En authentification indirecte, seule la structure de santé (par son certificat serveur) est authentifiée.</p>
<p>L&rsquo;auteur de la requête, c&rsquo;est à dire le personnel de santé utilisateur (<code>DMPCPersonnelSante</code>), doit donc être authentifié localement. 
Le système de la structure de santé doit être en mesure d&rsquo;authentifié ses utilisateurs. Cet identifiant local au système doit être spécifié dans <code>DMPCPersonnelSante.internalId</code> même si le rpps est connu.</p>
<p>Lors de la lecture de la Carte Vitale, l&rsquo;intégrateur doit être en mesure de définir la provenance du nir (Réel, Test, Démo) passé en paramètres des différentes requêtes en précisant la valeur <code>DMPCContext.DMPCInsNirAutorite</code>.</p>
<p>Exemple Java :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">DMPCContext</span> <span style="color:#000">context</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">DMPCContext</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#000">DMPCPersonnelSante</span> <span style="color:#000">ps</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">DMPCPersonnelSante</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#000">ps</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setInternalId</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;1234567890&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">ps</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setNom</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Forêt&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">ps</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setPrenom</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Laurent&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">ps</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setRole</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;10&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span> <span style="color:#8f5902;font-style:italic">// Médecin  dans la nomenclature DMPCCode.JeuxValeursDMP.SUBJECT_ROLE      
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">ps</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setSpecialite</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;G15_10/SM30&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span> <span style="color:#8f5902;font-style:italic">// G15_10/SM30 Néphrologie  dans la nomenclature DMPCCode.JeuxValeursDMP.AUTHOR_SPECIALITY
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">ps</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setSecteurActivite</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;SA01&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>  <span style="color:#8f5902;font-style:italic">// Etablissement public de santé dans la nomenclature DMPCCode.JeuxValeursDMP.HEALTH_CARE_FACILITY_TYPE_CODE
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">ps</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getStructureSante</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">setNom</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;DEVCOOP Bureau de Léognan&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setAuthor</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">ps</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setInsNirAutorite</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCContext</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">DMPCInsNirAutorite</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">TEST</span><span style="color:#ce5c00;font-weight:bold">);</span>  <span style="color:#8f5902;font-style:italic">// InsNirAutorite EX_GEN-1520 à préciser lors de tout appel à l&#39;api. 
</span></span></span></code></pre></div><p>Exemple curl :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#a40000">curl</span> <span style="color:#a40000">--request</span> <span style="color:#a40000">POST</span> <span style="color:#a40000">&#39;/dmp/tdxxxx&#39;</span> <span style="color:#a40000">\</span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">--data-raw</span> <span style="color:#a40000">&#39;</span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;context&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;author&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;internalId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;123456&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;nom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Durand&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;prenom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Pierre&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;role&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;10&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;secteurActivite&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;SA43&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;specialite&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;G15_10/SM28&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;structureSante&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;nom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Devcoop Bureau de Léognan&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;insNirAutorite&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;TEST&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;modeAcces&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;acces&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;NORMAL&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;request&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a40000">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span><span style="color:#a40000">&#39;</span>
</span></span></code></pre></div><h2 id="récupération-des-différents-paramètres-du-dmp">Récupération des différents paramètres du DMP</h2>
<h3 id="getparametres-depuis-version-30">getParametres() (depuis version 3.0)</h3>
<p>Afin de pouvoir récupérer le paramètrage du DMP qui permet de répondre à un certain nombre d&rsquo;exigences notamment les fonctions-gestion-mineurs (EX_GEN-1550). Il faut accéder à la méthode <code>getParametres</code></p>
<p>Exemple :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>  <span style="color:#000">DMPCParametres</span> <span style="color:#000">parametres</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">dmpcClient</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getParametres</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">parametres</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">isFonctionsGestionMineurs</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span> <span style="color:#000">agePatient</span> <span style="color:#ce5c00;font-weight:bold">&lt;</span> <span style="color:#000">parametres</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getAgeMajorite</span><span style="color:#ce5c00;font-weight:bold">())</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8f5902;font-style:italic">// Attention EX_GEN-1550
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#ce5c00;font-weight:bold">}</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">parametres</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">isProduction</span><span style="color:#ce5c00;font-weight:bold">())</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8f5902;font-style:italic">// Attention l&#39;environnement est celui de production, 
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(!</span><span style="color:#000">parametres</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">isCumulInvisiblePatientMasquePs</span><span style="color:#ce5c00;font-weight:bold">())</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>   <span style="color:#8f5902;font-style:italic">// Attention EX_2.1-1050
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>Exemple curl :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#a40000">curl</span> <span style="color:#a40000">-X</span> <span style="color:#a40000">GET</span> <span style="color:#4e9a06">&#34;/dmp/parametres&#34;</span> 
</span></span></code></pre></div><h3 id="getcodesfor-depuis-version-10">getCodesFor() (depuis version 1.0)</h3>
<p>Méthode permettant d&rsquo;accéder aux différents jeux de valeurs imposés par le Guide d&rsquo;intégration.</p>
<p>notamment :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">enum</span> <span style="color:#000">JeuxValeursDMP</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">QUALITE_REPRESENTANT_LEGAL</span><span style="color:#ce5c00;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">AUTHOR_SPECIALITY</span><span style="color:#ce5c00;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">CLASS_CODE</span><span style="color:#ce5c00;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">CONFIDENTIALITY_CODE</span><span style="color:#ce5c00;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">CONTENT_TYPE_CODE</span><span style="color:#ce5c00;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">FORMAT_CODE</span><span style="color:#ce5c00;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">HEALTH_CARE_FACILITY_TYPE_CODE</span><span style="color:#ce5c00;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">PRACTICE_SETTING_CODE</span><span style="color:#ce5c00;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">SUBJECT_ROLE</span><span style="color:#ce5c00;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">TYPE_CODE</span><span style="color:#ce5c00;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">RESTRICTION_AUDIENCE_VIHF</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>Exemple Java :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#000">List</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">allPersonnelDeSanteSpecialities</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCodesFor</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">JeuxValeursDMP</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">AUTHOR_SPECIALITY</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">List</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">allPossibleFormatCodesForADocument</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCodesFor</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">JeuxValeursDMP</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">FORMAT_CODE</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span></code></pre></div><p>Exemple curl :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#a40000">curl</span> <span style="color:#a40000">-X</span> <span style="color:#a40000">GET</span> <span style="color:#4e9a06">&#34;/dmp/nomenclatures?jeuxValeurs=AUTHOR_SPECIALTY&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">curl</span> <span style="color:#a40000">-X</span> <span style="color:#a40000">GET</span> <span style="color:#4e9a06">&#34;/dmp/nomenclatures?jeuxValeurs=FORMAT_CODE&#34;</span>
</span></span></code></pre></div><h3 id="gettypesindexedbyclasscode-depuis-version-45">getTypesIndexedByClassCode() (depuis version 4.5)</h3>
<p>Méthode permettant d&rsquo;indexer tous les types par leur classCodes.</p>
<p>Exemple Java :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>   <span style="color:#000">Map</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">String</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">List</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">&gt;&gt;</span>  <span style="color:#000">allTypesIndexedByClassCode</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getTypesIndexedByClassCode</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>   <span style="color:#000">String</span> <span style="color:#000">compteRenduClassCode</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;10&#34;</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#000">List</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">allCompteRenduTypes</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">allTypesIndexedByClassCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">get</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">compteRenduClassCode</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span></code></pre></div><p>Exemple curl :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#a40000">curl</span> <span style="color:#a40000">-X</span> <span style="color:#a40000">GET</span> <span style="color:#4e9a06">&#34;/dmp/nomenclatures/typesByClassCode&#34;</span>
</span></span></code></pre></div><h2 id="transactions-didentification-du-patient">Transactions d&rsquo;identification du patient</h2>
<h3 id="td02--test-dexistence-du-dmp-dun-patient-et-vérification-de-lautorisation-daccès--depuis-version-10">TD0.2 : test d&rsquo;existence du DMP d&rsquo;un patient et vérification de l&rsquo;autorisation d&rsquo;accès  (depuis version 1.0)</h3>
<p>Cette transaction permet de tester l&rsquo;existence d&rsquo;un DMP et de vérifier les autorisations d&rsquo;accès ainsi que de récupérer les informations concernant la création du compte patient.</p>
<p>De là peut en découler des actions de créations de DMP, de création de compte internet, ou bien encore de connaître la raison d&rsquo;une interdiction d&rsquo;accès</p>
<p>Exemple Java :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">TD02Response</span> <span style="color:#000">response</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">td02Exist</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">TD02Request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">matriculeINS</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Identifiant</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">valeur</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;277076322082910&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">identifiantSysteme</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Oids</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">ANS_1_2_250_1_213</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">_1_4_10_INS_NIR_TEST</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">val</span><span style="color:#ce5c00;font-weight:bold">())</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">())</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getAutorisation</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">equals</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">EXPIRE</span><span style="color:#ce5c00;font-weight:bold">))</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8f5902;font-style:italic">// prévoir une client.td03AddAuthorization()
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#ce5c00;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getAutorisation</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">equals</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">INTERDIT</span><span style="color:#ce5c00;font-weight:bold">))</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8f5902;font-style:italic">// le PS ne peut accéder au DMP
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#000">String</span> <span style="color:#000">raison</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getRaison</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getAutorisation</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">equals</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">NON_EXISTE</span><span style="color:#ce5c00;font-weight:bold">))</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8f5902;font-style:italic">// prévoir une client.td03AddAuthorization()
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#ce5c00;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getAutorisation</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">equals</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">VALIDE</span><span style="color:#ce5c00;font-weight:bold">))</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(!</span><span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCompteInternetOuvert</span><span style="color:#ce5c00;font-weight:bold">())</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8f5902;font-style:italic">// prévour une client.td15aCreerAccesInternetPatient()
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8f5902;font-style:italic">// contient les informations patient stockées dans leDMP
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#000">DMPCPatient</span> <span style="color:#000">dmpPatient</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getPatient</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getRole</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">equals</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCRole</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">MEDECIN_TRAITANT</span><span style="color:#ce5c00;font-weight:bold">))</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8f5902;font-style:italic">// le PS author est le médecint traitant
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#ce5c00;font-weight:bold">}</span> 
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>Exemple curl :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#a40000">curl</span>  <span style="color:#a40000">--request</span> <span style="color:#a40000">POST</span> <span style="color:#a40000">&#39;/dmp/td</span><span style="color:#0000cf;font-weight:bold">02</span><span style="color:#a40000">Exist&#39;</span> <span style="color:#a40000">\</span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">--data-raw</span> <span style="color:#a40000">&#39;</span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;context&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span><span style="color:#a40000">...</span><span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;request&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;matriculeINS&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;279035121518989&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;identifiantSysteme&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1.2.250.1.213.1.4.10&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span><span style="color:#a40000">&#39;</span>
</span></span></code></pre></div><h3 id="td03--modifier-lautorisation-daccès-etou-le-statut-médecin-traitant-dmp-ou-passer-en-mode-daccès--bris-de-glace--depuis-version-20">TD0.3 : modifier l&rsquo;autorisation d&rsquo;accès et/ou le statut médecin traitant DMP ou passer en mode d&rsquo;accès « bris de glace » (depuis version 2.0)</h3>
<p>Le LPS permet à l&rsquo;utilisateur les actions suivantes.</p>
<ul>
<li>Ajouter une autorisation d&rsquo;accès au DMP du patient ou passer en mode d&rsquo;accès « bris de glace ». Cf. DMP_0.3a.</li>
<li>Supprimer une autorisation d&rsquo;accès au DMP du patient. Cf. DMP_0.3b.</li>
<li>Modifier le statut médecin traitant DMP. Cf. DMP_0.3c.</li>
</ul>
<p>Exemple :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">td03AddAuthorization</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">TD03Request</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">patient</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getMatriculeINS</span><span style="color:#ce5c00;font-weight:bold">(),</span> <span style="color:#000">DMPCRole</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">STANDARD</span><span style="color:#ce5c00;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">td03RemoveAuthorization</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">TD03Request</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">patient</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getMatriculeINS</span><span style="color:#ce5c00;font-weight:bold">(),</span> <span style="color:#000">DMPCRole</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">STANDARD</span><span style="color:#ce5c00;font-weight:bold">));</span>
</span></span></code></pre></div><p>Exemple curl :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#a40000">curl</span>  <span style="color:#a40000">--request</span> <span style="color:#a40000">PUT</span> <span style="color:#a40000">&#39;/dmp/td</span><span style="color:#0000cf;font-weight:bold">03</span><span style="color:#a40000">AddAuthorization&#39;</span> <span style="color:#a40000">\</span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">--data-raw</span> <span style="color:#a40000">&#39;</span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;context&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span><span style="color:#a40000">...</span>  <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;request&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;matriculeINS&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;279035121518989&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;identifiantSysteme&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1.2.250.1.213.1.4.10&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;role&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;STANDARD&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span><span style="color:#a40000">&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">url</span> <span style="color:#a40000">--request</span> <span style="color:#a40000">PUT</span> <span style="color:#a40000">&#39;/dmp/td</span><span style="color:#0000cf;font-weight:bold">03</span><span style="color:#a40000">RemoveAuthorization&#39;</span> <span style="color:#a40000">\</span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">--data-raw</span> <span style="color:#a40000">&#39;</span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;context&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span><span style="color:#a40000">...</span><span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;request&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;matriculeINS&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;279035121518989&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;identifiantSysteme&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1.2.250.1.213.1.4.10&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;role&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;STANDARD&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span><span style="color:#a40000">&#39;</span>
</span></span></code></pre></div><h3 id="td04--lister-les-dmp-autorisés-depuis-version-50">TD0.4 : lister les DMP autorisés (depuis version 5.0)</h3>
<p>Les deux usages sont les suivants :</p>
<ol>
<li>
<p>Elle permet de récupérer la liste des nouveaux DMP autorisés pour l’acteur de santé (avec les INS de patient et les traits d’identités). Outre les habituelles informations d’authentification, il est possible de paramétrer en entrée une date à partir de laquelle la recherche est effectuée. Par exemple : (date du jour - 3 jours) ou (date du jour - 1 semaine). L’éditeur peut mettre en oeuvre dans le LPS un appel planifié régulièrement à cette transaction (par exemple tous les 3 jours ou toutes les semaines). Exemple : Cette transaction peut être utile dans le cas d’un logiciel du SIH ne recueillant pas directement l’autorisation du patient.
NB : l’autorisation d’accès est facultative pour alimenter le DMP avec des documents et pour supprimer des documents si le LPS implémente le profil Alimentation.</p>
</li>
<li>
<p>Cette transaction permet de récupérer la liste des patients pour lesquels un nouveau document a été ajouté dans son DMP depuis une date donnée. Le retour est le même, seul le paramétrage en entrée est différent.</p>
</li>
</ol>
<p>Exemple Java : </p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// cas 1
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">var</span> <span style="color:#000">response</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">td04ListDMPActifs</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">TD04Request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">from</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">clock</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getLocal</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">minusYears</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">1</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">searchType</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">TD04Request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">PatientSearchType</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">LAST_AUTORIZATION</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// cas 2 
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">var</span> <span style="color:#000">response</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">td04ListDMPActifs</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">TD04Request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">from</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">clock</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getLocal</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">minusYears</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">1</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">searchType</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">TD04Request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">PatientSearchType</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">LAST_DOC</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>                <span style="color:#ce5c00;font-weight:bold">);</span>
</span></span></code></pre></div><p>Exemple curl :</p>
<p>// cas 2</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#a40000">curl</span> <span style="color:#a40000">--location</span> <span style="color:#a40000">--request</span> <span style="color:#a40000">PUT</span> <span style="color:#a40000">&#39;http:</span><span style="color:#8f5902;font-style:italic">//localhost:8080/dmp/td04ListDMPActifs&#39; \
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#a40000">--header</span> <span style="color:#a40000">&#39;Content-Type:</span> <span style="color:#a40000">application/json&#39;</span> <span style="color:#a40000">\</span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">--data-raw</span> <span style="color:#a40000">&#39;</span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;context&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;author&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{},</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;modeAcces&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;acces&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;NORMAL&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;request&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;from&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2021-08-12T15:16:10Z&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;searchType&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;LAST_DOC&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span><span style="color:#a40000">&#39;</span>
</span></span></code></pre></div><h3 id="td05">TD0.5</h3>
<p>Non requis pour le DMP</p>
<h2 id="alimentation">Alimentation</h2>
<p>Le profil alimentation du DMP se fait au travers de transaction XDS (<a href="https://wiki.ihe.net/index.php/Cross-Enterprise_Document_Sharing">https://wiki.ihe.net/index.php/Cross-Enterprise_Document_Sharing</a>) supportée par le serveur DMP ainsi que par la DevBox-Santé DMP.</p>
<p>Les transactions XDS permettent de soumettre des documents au format CDA (<a href="https://www.hl7.org/implement/standards/product_brief.cfm?product_id=7">https://www.hl7.org/implement/standards/product_brief.cfm?product_id=7</a>) supporté également par le DMP et la DevBox-Santé DMP.</p>
<p>La DevBox-Santé DMP présente un modèle simplifé des informations demandées et s&rsquo;occupe de la cohérence des métadonnées des transactions XDS d&rsquo;avec les métadonnées <a href="../CDA/structurationMinimale.html">des documents CDA</a> )</p>
<h3 id="td21--alimenter-le-dmp-dun-patient-avec-des-documents-depuis-version-10">TD2.1 : alimenter le DMP d&rsquo;un patient avec des documents (depuis version 1.0)</h3>
<p>Cette fonctionnalité permet d&rsquo;alimenter le DMP d&rsquo;un patient avec un ou plusieurs nouveaux documents :</p>
<ul>
<li>décrits sous la forme de documents CDA et de métadonnées XDS,</li>
<li>et transmis au système DMP sous la forme d&rsquo;un lot de soumission XDS signé (XAdES).</li>
</ul>
<p>La cinématique générale est la suivante.
Le PS constitue le ou les document(s) dans le LPS . 
Le LPS :</p>
<ul>
<li>construit le ou les document(s)
<ul>
<li>construit le document au format CDA ==&gt; action réalisée par la DevBox-Santé DMP</li>
<li>alimente les métadonnées XDS  ==&gt; action réalisée par la DevBox-Santé DMP</li>
</ul>
</li>
<li>constitue un lot de soumission XDS et signe ce lot (XAdES) ==&gt; action réalisée par la DevBox-Santé DMP</li>
<li>soumet le lot de documents au système DMP  ==&gt; action réalisée par la DevBox-Santé DMP</li>
</ul>
<p>Le LPS intégrateur de la DevBox-Santé DMP doit seulement fournir les valeurs des différentes métadonnées liées aux documents et à la soumission par l&rsquo;intermédiaire d&rsquo;un modèle simplifié :</p>
<h4 id="en-java-">En java :</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">final</span> <span style="color:#000">ZonedDateTime</span> <span style="color:#000">maintenant</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">timeManager</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getLocal</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">//   création du document
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">InputStream</span> <span style="color:#000">input</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getClass</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">getClassLoader</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">getResourceAsStream</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;1.pdf&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">byte</span><span style="color:#ce5c00;font-weight:bold">[]</span> <span style="color:#000">content</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#204a87;font-weight:bold">byte</span><span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#000">input</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">available</span><span style="color:#ce5c00;font-weight:bold">()];</span>
</span></span><span style="display:flex;"><span><span style="color:#000">ByteStreams</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">readFully</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">input</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">content</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">DMPCDocument</span> <span style="color:#000">document</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">DMPCDocument</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">patient</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">patient</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">classCodeCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCodesFor</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">JeuxValeursDMP</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">CLASS_CODE</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">get</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">0</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">confidentialityCodes</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">List</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">of</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">findCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">JeuxValeursDMP</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">CONFIDENTIALITY_CODE</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;N&#34;</span><span style="color:#ce5c00;font-weight:bold">)))</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">comments</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Commentaire du Document&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">events</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">List</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">of</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;B18&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;2.16.840.1.113883.6.3&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;Hépatite virale chronique&#34;</span><span style="color:#ce5c00;font-weight:bold">)))</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">practiceSettingCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">findCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">JeuxValeursDMP</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">PRACTICE_SETTING_CODE</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;AMBULATOIRE&#34;</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">serviceStartDateTime</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">maintenant</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">minusHours</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">3</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">serviceStopDateTime</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">maintenant</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">minusHours</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">2</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">title</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Titre du Document&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">typeCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">findCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">JeuxValeursDMP</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">TYPE_CODE</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;11488-4&#34;</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">creationDateTime</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">maintenant</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">formatCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">findCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">JeuxValeursDMP</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">FORMAT_CODE</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;urn:ihe:iti:xds-sd:pdf:2008&#34;</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">content</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">content</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">//    création de la soumission
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">DMPCSoumission</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">DMPCDocument</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">soumission</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">DMPCSoumission</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">builder</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">documents</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">List</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">of</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">title</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Soumission du document&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">comments</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Commentaire de la soumission&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">patient</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">patient</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">contentType</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;04&#34;</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">//   envoi de la soumission
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">TD21Response</span> <span style="color:#000">td21Response</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">td21SubmitDocuments</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">TD21Request</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">soumission</span><span style="color:#ce5c00;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span><span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Soumission enregistré avec l&#39;uuid :&#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">td21Response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getSoumission</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">getUuid</span><span style="color:#ce5c00;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">td21Response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getSoumission</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">getDocuments</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">forEach</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">submitted</span> <span style="color:#ce5c00;font-weight:bold">-&gt;</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">DMPCDocument</span> <span style="color:#000">submittedDocument</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCDocument</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#000">submitted</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">String</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">format</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Contenant le document ayant pour uniqueId : %s et uuid : %s&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">submittedDocument</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getUniqueId</span><span style="color:#ce5c00;font-weight:bold">(),</span> <span style="color:#000">submittedDocument</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getEntryUuid</span><span style="color:#ce5c00;font-weight:bold">()));</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">});</span>
</span></span></code></pre></div><p>Pour une soumission de plusieurs documents, il suffit d&rsquo;ajouter les documents à la soumission :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">submission</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">addDocument</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">document1</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">submission</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">addDocument</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">document2</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span></code></pre></div><h4 id="en-rest-">En REST :</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#a40000">curl</span> <span style="color:#a40000">--location</span> <span style="color:#a40000">--request</span> <span style="color:#a40000">POST</span> <span style="color:#a40000">&#39;http:</span><span style="color:#8f5902;font-style:italic">//localhost:9999/dmp/td21SubmitDocuments&#39; \
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#a40000">--data-raw</span> <span style="color:#a40000">&#39;</span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;context&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a40000">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;request&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;submission&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;title&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Titre de la soumission&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;comments&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Soumission via Postman&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;contentType&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;04&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;patient&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;matriculeINS&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;279035121518989&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;identifiantSysteme&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1.2.250.1.213.1.4.10&#34;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;internalId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;67890&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;prenom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;DOMINIQUE&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;nomUsuel&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;pat-trois&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;dateDeNaissance&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;19790328&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;ordreDeNaissance&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&#34;sexe&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;F&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;documents&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;auteurs&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[],</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;classCode&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;11&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;comments&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Document soumis via Postman&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;confidentialities&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#4e9a06">&#34;N&#34;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;content&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;UmFwcGVsIGNsaW5pcXVlIDogSWwgcydhZ2l0IGQndW4gaG9tbWUgZGUgNTMgYW5zLCAKcHLDqXNlbnRhbnQgdW4gbmFldnVzIGRlIGxhIGZhY2UgaW50ZXJuZSBkZSBsYSBjdWlzc2UgZ2F1Y2hlIGRlIDcgbW0gZGUgZ3JhbmQgYXhlIGVudmlyb24uIApEw6ljaXNpb24gZCdleMOpcsOoc2Ugc291cyBhbmVzdGjDqXNpZSBsb2NhbGUuIAoKSW50ZXJ2ZW50aW9uIDogRVhFUkVTRSBEJ1VOIE5BRVZVUyBERSBMQSBDVUlTU0UgR0FVQ0hFIApTb3VzIGFuZXN0aMOpc2llIGxvY2FsZSDDoCBsYSBYeWxvY2HDr25lIMOgIDEgJSBub24gYWRyw6luYWxpbsOpZS4gCgpJbmNpc2lvbiBjZW50csOpZSBzdXIgbGEgbMOpc2lvbiBwZXJtZXR0YW50IGwnZXjDqXLDqHNlIGR1IG5hZXZ1cyBkYW5zIHNhIHRvdGFsaXTDqS4gCkZlcm1ldHVyZSBjdXRhbsOpZSBlbiB1biBwbGFuIGRlIEZsZXhvY3JpbiAzLzAuICAKCkVYQU1FTiBISVNUT0xPR0lPVUUgVW5lIGzDqXNpb24gcG9seXBvw69kZSBkZSAxIHggMCw3IGNtIGEgw6l0w6kgY29tbXVuaXF1w6llLiAKT24gcmV0cm91dmUgYXUgcGxhbiBoaXN0b2xvZ2lxdWUgdW5lIGzDqXNpb24gdW4gcGV1IHZlcnJ1cXVldXNlLCAKY29tcG9ydGFudCB1bmUgcHJvbGlmw6lyYXRpb24gY2VsbHVsYWlyZSBuYWV2aXF1ZSDDqXBhcmduYW50IGwnw6lwaWTDqW1pZSwgCnNvdXMgZm9ybWUgZGUgdGjDqHF1ZXMgZW4gc3VyZmFjZSwgYXZlYyBxdWVscXVlcyBkw6lww7R0cyBkZSBtw6lsYW5pbmUsIAphc3NvY2nDqWUgw6AgdW4gZ3JhZGllbnQgZGUgbWF0dXJhdGlvbiB0csOocyBuZXQgdmVycyBsYSBwcm9mb25kZXVyLiAKCk9uIG5lIHJldHJvdXZlIHBhcyBkJ2F0eXBpZSBudWNsw6lvY3l0b3BsYXNtaXF1ZS4gCgpDT05DTFVTSU9OIE5BRVZVUyBERVJNSVFVRSBERVZFTE9QUEUgU1VSIFVOIE1PREUgRVhPUEhZVElRVUUgLiAKTEVTIExJTUlURVMgRCdFWEVSRVNFIFNPTlQgU0FJTkVTLiA=&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;creationTime&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;20200928120000&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;events&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;code&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;H33&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;codingScheme&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;2.16.840.1.113883.6.3&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;displayName&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Décollement et déchirement de la rétine&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;format&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;urn:ihe:iti:xds-sd:text:2008&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;legalAuthenticator&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;internalId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;123456&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;nom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;MED-CS RPPS0029614&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;prenom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;ANNE&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;role&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;10&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;secteurActivite&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;SA05&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;specialite&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;G15_10/SM26&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;structureSante&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;nom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;CENTRE DE SANTE RPPS15683&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;idNational&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;10B0156832&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;patient&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;matriculeINS&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;279035121518989&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#204a87;font-weight:bold">&#34;identifiantSysteme&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1.2.250.1.213.1.4.10&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;prenom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;DOMINIQUE&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;nomUsuel&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;pat-trois&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;internalId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;67890&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;dateDeNaissance&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;19790328&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;ordreDeNaissance&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#204a87;font-weight:bold">&#34;sexe&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;F&#34;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;practiceSetting&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;AMBULATOIRE&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;serviceStartTime&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;20200928080000&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;serviceStopTime&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;20200928080000&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;title&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Titre du document&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;type&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;11488-4&#34;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h3 id="td31--depuis-version-32">TD3.1 : (depuis version 3.2)</h3>
<p>Il est possible de faire des recherches de document ainsi que des recherches des documentation</p>
<h3 id="td31b--rechercher-lidentifiant-technique-dun-document-depuis-version-30">TD3.1b : rechercher l&rsquo;identifiant technique d&rsquo;un document (depuis version 3.0)</h3>
<p>Cette fonctionnalité permet, aux LPS qui n&rsquo;implémentent pas DMP_3.1a, de rechercher l&rsquo;identifiant technique d&rsquo;un document (dans le système DMP) à partir de l&rsquo;identifiant local au LPS de ce document.
Le LPS peut ensuite supprimer (DMP_3.3c), archiver (DMP_3.3d) ou remplacer un document dans le DMP du patient (DMP_2.1/2.2b).</p>
<h4 id="en-java--1">En java :</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">String</span> <span style="color:#000">previousDocumentUniqueId</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#ce5c00;font-weight:bold">...;</span> <span style="color:#8f5902;font-style:italic">// uniqueId d&#39;un document envoyé précédemment dans le DMP 
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">TD31bRequest</span> <span style="color:#000">td31bRequest</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">TD31bRequest</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#000">td31bRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setDocumentUniqueId</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">previousDocumentUniqueId</span><span style="color:#ce5c00;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span><span style="color:#000">td31bRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setIns</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">patient</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getIns</span><span style="color:#ce5c00;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span><span style="color:#000">TD31bResponse</span> <span style="color:#000">response</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">td31bGetDocumentEntry</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">td31bRequest</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// uuid du document courant stocké dans le DMP
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">String</span> <span style="color:#000">documentCurrentUuid</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getDocumentUuid</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// permet le remplacement de document avec une td21submit document ou encore une td33cUnpublished.
</span></span></span></code></pre></div><h4 id="en-rest--1">En REST :</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#a40000">curl</span> <span style="color:#a40000">--location</span> <span style="color:#a40000">--request</span> <span style="color:#a40000">POST</span> <span style="color:#a40000">&#39;http:</span><span style="color:#8f5902;font-style:italic">//localhost:9999/dmp/td31bGetDocumentEntry&#39; \
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#a40000">--data-raw</span> <span style="color:#a40000">&#39;</span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;context&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a40000">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;request&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;matriculeINS&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;279035121518989&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;identifiantSysteme&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1.2.250.1.213.1.4.10&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;documentUniqueId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1.2.250.1.287.1.1669713300686.1.16709290066422&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span><span style="color:#a40000">&#39;</span>
</span></span></code></pre></div><p>La réponse est : </p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;documentUuid&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;ff38b3da-3ded-4b90-b30e-744a4dc907d8&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h3 id="remplacement">Remplacement</h3>
<p>Le remplacement est possible suite à la recherche TD3.1b. Il suffit de préciser l&rsquo;<code>entryUUID</code> et le <code>uniqueId</code> du document à remplacer.</p>
<p>Exemple de remplacement de document après recherche dans le DMP :</p>
<h4 id="en-java--2">En java :</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// récupération du uuid du document courant dans le DMP
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">TD31bRequest</span> <span style="color:#000">td31bRequest</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">TD31bRequest</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#000">td31bRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setDocumentUniqueId</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">uniqueIdDuDocumentAremplacer</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">td31bRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setIns</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">patient</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getIns</span><span style="color:#ce5c00;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span><span style="color:#000">TD31bResponse</span> <span style="color:#000">td31bresponse</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">td31bGetDocumentEntry</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">td31bRequest</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// création de la soummission pour le remplacement
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">DMPCSubmission</span> <span style="color:#000">submissionRemplace</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#ce5c00;font-weight:bold">...;</span>
</span></span><span style="display:flex;"><span><span style="color:#000">DMPCDocument</span> <span style="color:#000">documentRemplace</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#ce5c00;font-weight:bold">...;</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// ajout des informations de remplacement dans le document qui remplace
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">documentRemplace</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setReplacementOf</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">td31bresponse</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getDocumentUuid</span><span style="color:#ce5c00;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span><span style="color:#000">documentRemplace</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setReplacementOfUniqueId</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">documentE</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getUniqueId</span><span style="color:#ce5c00;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span><span style="color:#000">submissionRemplace</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setTitle</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;remplacement du document E&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// envoie de la soummission
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">td21SubmitDocuments</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">TD21Request</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">submissionRemplaceE</span><span style="color:#ce5c00;font-weight:bold">));</span>
</span></span></code></pre></div><h4 id="en-rest">En REST</h4>
<p>il suffit de renseigner les champs replacementOf, et replacementOfUniqueId dans le document qui remplace :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#a40000">curl</span> <span style="color:#a40000">--location</span> <span style="color:#a40000">--request</span> <span style="color:#a40000">POST</span> <span style="color:#a40000">&#39;http:</span><span style="color:#8f5902;font-style:italic">//localhost:9999/dmp/td21SubmitDocuments&#39; \
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#a40000">--data-raw</span> <span style="color:#a40000">&#39;</span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;context&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a40000">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;request&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;submission&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>           <span style="color:#a40000">...</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;documents&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#a40000">...</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;replacementOf&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;ff38b3da-3ded-4b90-b30e-744a4dc907d8&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#204a87;font-weight:bold">&#34;replacementOfUniqueId&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1.2.250.1.287.1.1669713300686.1.16709290066422&#34;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h3 id="td33c--supprimer-un-document-depuis-version-10">TD33c : Supprimer un document (depuis version 1.0)</h3>
<p>Cette fonctionnalité permet à l&rsquo;utilisateur de supprimer un document dans le DMP d&rsquo;un patient.
La cinématique générale est la suivante :</p>
<ul>
<li>L&rsquo;utilisateur indique qu&rsquo;il souhaite supprimer le document sélectionné.</li>
<li>L&rsquo;utilisateur confirme l&rsquo;action demandée.</li>
<li>Le LPS envoie une requête de mise à jour des attributs d&rsquo;un document au système DMP</li>
</ul>
<p>Exemple :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">TD33CRequest</span> <span style="color:#000">td33cRequest</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">TD33CRequest</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#000">td33cRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setDocumentUuid</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">uniqueIdDuDocumentASupprimer</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">td33cRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setIns</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">patient</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getIns</span><span style="color:#ce5c00;font-weight:bold">());</span> 
</span></span><span style="display:flex;"><span><span style="color:#000">td33cRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setContentType</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">contentTypeDuDocumentASupprimer</span><span style="color:#ce5c00;font-weight:bold">);</span> <span style="color:#8f5902;font-style:italic">// le contentType est le même que pour une soumission de document.
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">td33cUnpublished</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">td33cRequest</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span></code></pre></div><h2 id="gestion-du-bris-de-glace">Gestion du Bris de Glace</h2>
<p>Lorsque l&rsquo;utilisateur a besoin de consulter le DMP d&rsquo;un patient en cas d&rsquo;urgence, sans avoir la possibilité de lui demander son autorisation, au lieu de se déclarer autorisé à accéder au dossier par le patient, il dispose de la possibilité d&rsquo;accéder au dossier en mode « bris de glace ».</p>
<p>Dans l&rsquo;api cela se traduit par une modification du Contexte :</p>
<p>En Java :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">DMPCContext</span> <span style="color:#000">context</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#ce5c00;font-weight:bold">...</span>
</span></span><span style="display:flex;"><span><span style="color:#000">DMPCModeAcces</span> <span style="color:#000">modeAcces</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">DMPCModeAcces</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#000">modeAcces</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setAcces</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">DMPCModeAcces</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">ModeAcces</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">BRIS_DE_GLACE</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">modeAcces</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setRaison</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Accès en urgence&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setModeAcces</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">modeAcces</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span></code></pre></div><p>En REST :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;context&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;author&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a40000">...</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;modeAcces&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;acces&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;BRIS_DE_GLACE&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;raison&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Accès en urgence&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;request&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a40000">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h2 id="gestion-de-la-connexion-secrète">Gestion de la connexion secrète</h2>
<p>L&rsquo;exigence EX_0.1-1100 :</p>
<blockquote>
<p>Le LPS doit permettre à l&rsquo;utilisateur de mettre en oeuvre une connexion secrète pour les mineurs, en concertation avec son patient. Cf. donnée confidentiality-code dans le VIHF.
Les modalités de mise en oeuvre : détermination de l&rsquo;âge (cf. exigence EX_GEN-1550 au § 3.1.3) et proposition systématique, choix utilisateur,… devront être précisées par l&rsquo;éditeur lors de son passage en homologation.</p>
</blockquote>
<p>La décision de la mise en place de la connexion secrète est laissée à l&rsquo;intégrateur. Dans le càs où, l&rsquo;application veut déclarer la connexion secrète, il suffit d&rsquo;ajouter le code de confidentialité <code>INVISIBLE_REPRESENTANTS_LEGAUX</code> dans le contexte :</p>
<p>EN java :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">DMPCContext</span> <span style="color:#000">context</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#ce5c00;font-weight:bold">...</span>
</span></span><span style="display:flex;"><span><span style="color:#000">DMPCCode</span> <span style="color:#000">code</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCodesFor</span><span style="color:#ce5c00;font-weight:bold">((</span><span style="color:#000">DMPCCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">JeuxValeursDMP</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">RESTRICTION_AUDIENCE_VIHF</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">stream</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">filter</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">dmpcCode</span> <span style="color:#ce5c00;font-weight:bold">-&gt;</span> <span style="color:#000">dmpcCode</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCode</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">equals</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;INVISIBLE_REPRESENTANTS_LEGAUX&#34;</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">findFirst</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">get</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setConfidentialityCode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">code</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span></code></pre></div><p>En REST :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;context&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;author&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a40000">...</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&#34;confidentialityCode&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;valeur&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;INVISIBLE_REPRESENTANTS_LEGAUX&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;identifiantNomenclature&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1.2.250.1.213.1.1.4.13&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&#34;libelle&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Non visible par les représentants légaux du patient&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;request&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a40000">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><blockquote>
<p>ATTENTION : Ne pas confondre la connexion secrète et la soumission de documents à visibilité réduite comme <code>INVISIBLE_REPRESENTANTS_LEGAUX</code>, <code>INVISIBLE_PATIENT</code>, ou encore <code>MASQUE_PS</code>. Il s&rsquo;agit dans ce cas de spécifier un code de confidentialité spécifique au document. Ces codes sont disponibles dans la nomenclature <code>DMPCCode.JeuxValeursDMP.CONFIDENTIALITY_CODE</code></p>
</blockquote>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-5f5395f9ebb771d835f469de1c78beaa">6.3 - Différents environnements du DMP</h1>
    <div class="lead">Les différents environnements pour accéder au DMP</div>
	<p>Pour le DMP, Ils existent quatre types d&rsquo;environnements : </p>
<ul>
<li>développement</li>
<li>homologation</li>
<li>formation</li>
<li>production</li>
</ul>
<h2 id="environnement-dhomologation">Environnement d&rsquo;Homologation</h2>
<p>C&rsquo;est un environnement spécifique à l&rsquo;éditeur qui passe son homologation. Le CNDA donne les informations pour y accéder lors de la phase d&rsquo;homologation de l&rsquo;éditeur</p>
<h2 id="environnements-de-formation">Environnements de Formation</h2>
<p>Dans la fiche d&rsquo;information <code>PDT-INF-506v5</code> en date du 14 janvier 2022, il est fait mention de 4 environnements de formation avec des rétentions de données différentes :</p>
<h3 id="formation-1---jeu-de-données-jamais-réinitialisé">Formation 1 - Jeu de données jamais réinitialisé</h3>
<ul>
<li>LPS V2 : <a href="https://formation1.lps2.dmp.gouv.fr/si-dmp-server/v2/services">https://formation1.lps2.dmp.gouv.fr/si-dmp-server/v2/services</a></li>
<li>WebPS : <a href="https://formation1.ps.dmp.gouv.fr/ps/acces-web">https://formation1.ps.dmp.gouv.fr/ps/acces-web</a></li>
<li>Web Patient : <a href="https://formation1.patient.dmp.gouv.fr">https://formation1.patient.dmp.gouv.fr</a></li>
</ul>
<h3 id="formation-3---jeu-de-données-réinitialisé-tous-les-jours">Formation 3 - Jeu de données réinitialisé tous les jours</h3>
<ul>
<li>LPS V2 : <a href="https://formation3.lps2.dmp.gouv.fr/si-dmp-server/v2/services">https://formation3.lps2.dmp.gouv.fr/si-dmp-server/v2/services</a></li>
<li>WebPS : <a href="https://formation3.ps.dmp.gouv.fr/ps/acces-web">https://formation3.ps.dmp.gouv.fr/ps/acces-web</a></li>
<li>Web Patient : <a href="https://formation3.patient.dmp.gouv.fr">https://formation3.patient.dmp.gouv.fr</a></li>
</ul>
<h3 id="formation-4---jeu-de-données-réinitialisé-tous-les-15-jours">Formation 4 - Jeu de données réinitialisé tous les 15 jours</h3>
<ul>
<li>LPS V2 : <a href="https://formation4.lps2.dmp.gouv.fr/si-dmp-server/v2/services">https://formation4.lps2.dmp.gouv.fr/si-dmp-server/v2/services</a></li>
<li>WebPS : <a href="https://formation4.ps.dmp.gouv.fr/ps/acces-web">https://formation4.ps.dmp.gouv.fr/ps/acces-web</a></li>
<li>Web Patient : <a href="https://formation4.patient.dmp.gouv.fr">https://formation4.patient.dmp.gouv.fr</a></li>
</ul>
<h3 id="formation-5---jeu-de-données-réinitialisé-tous-les-mois">Formation 5 - Jeu de données réinitialisé tous les mois</h3>
<ul>
<li>LPS V2 : <a href="https://formation5.lps2.dmp.gouv.fr/si-dmp-server/v2/services">https://formation5.lps2.dmp.gouv.fr/si-dmp-server/v2/services</a></li>
<li>WebPS : <a href="https://formation5.ps.dmp.gouv.fr/ps/acces-web">https://formation5.ps.dmp.gouv.fr/ps/acces-web</a></li>
<li>Web Patient : <a href="https://formation5.patient.dmp.gouv.fr">https://formation5.patient.dmp.gouv.fr</a></li>
</ul>
<h2 id="environnements-de-production">Environnements de Production</h2>
<p>Dans la fiche d&rsquo;information <code>PDT-INF-547 v3</code> en date du 23 juillet 2019 :</p>
<ul>
<li>LPS v2 : <a href="https://lps2.dmp.gouv.fr/si-dmp-server/v2/services">https://lps2.dmp.gouv.fr/si-dmp-server/v2/services</a></li>
<li>Web PS : <a href="https://www.dmp.fr/ps/acces-web/">https://www.dmp.fr/ps/acces-web/</a></li>
</ul>
<h1 id="environnement-de-développement">Environnement de Développement</h1>
<ul>
<li>Accessible à tous les utilisateurs l&rsquo;url LPS v2 : <a href="https://dev1.lps2.dmp.gouv.fr/si-dmp-server/v2/services">https://dev1.lps2.dmp.gouv.fr/si-dmp-server/v2/services</a></li>
<li>Environnement Web PS et Patient : <a href="https://dev1.ps.dmp.gouv.fr/ps/acces-web">https://dev1.ps.dmp.gouv.fr/ps/acces-web</a></li>
</ul>
<p>Cet environnement est remis à jour toutes les semaines.</p>
<h3 id="vaccination">Vaccination</h3>
<p>Les différentes vaccinations possibles de valider pour le patient <strong>Jean BON</strong> :</p>
<p><img src="validation_vaccination.png" alt="Validation Vaccination Jean Bon"></p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-9541efc6c6fadf578bd308752f785e9b">6.4 - Integrateurs checklist</h1>
    <div class="lead">Liste des actions à réaliser pour mener à bien une intégration du composant DevBox-Santé DMP et faciliter son homologation.</div>
	<p>Pour plus d’information officielle &ldquo;Cas des intégrateurs EAI&rdquo; : <a href="https://cnda.ameli.fr/editeurs/referencer-un-logiciel/dmp/">https://cnda.ameli.fr/editeurs/referencer-un-logiciel/dmp/</a></p>
<p>Sinon, voici un petit récapitulatif des démarches à suivre :</p>
<h2 id="administratif">Administratif</h2>
<ul>
<li>
<p>Obtenir un NIE auprès du CNDA</p>
</li>
<li>
<p>Remplir les conditions générales des TLSi AMO v3 (<a href="https://cnda.ameli.fr/editeurs/telecharger-les-protocoles/">https://cnda.ameli.fr/editeurs/telecharger-les-protocoles/</a>)</p>
</li>
<li>
<p>Obtenir des cartes CPS et/ou certificats de test (médecin, CPE, autre) auprès de l&rsquo;ANS</p>
</li>
</ul>
<h2 id="choix-architecture">Choix Architecture</h2>
<ul>
<li>
<p>Choisir un mode d&rsquo;intégration/ authentification</p>
<ul>
<li>les moyens d&rsquo;authentification de l&rsquo;utilisateur doivent permettre l&rsquo;identification unique de l&rsquo;utilissateur</li>
<li>le PS a-t-il accès à sa carte CPS ?</li>
<li>Se rappeler que l&rsquo;éditeur agit pour le compte d&rsquo;un établissement de santé (RPPS)</li>
<li>Un certificat serveur est lié au FINESS géographique/juridique de l&rsquo;établissement de santé.</li>
</ul>
</li>
<li>
<p>Choisir les profils d&rsquo;intégration :</p>
<ul>
<li>alimentation</li>
<li>consultation</li>
</ul>
</li>
</ul>
<h2 id="développement--intégration">Développement / Intégration</h2>
<p>Pour cela  :</p>
<ul>
<li><a href="../embedded">mode API java</a></li>
<li><a href="../rest">mode REST</a></li>
</ul>
<h2 id="conditions-particulières-et-validation-devcoop">Conditions Particulières et validation DEVCOOP</h2>


<div class="pageinfo pageinfo-primary">
<p>Une nouvelle procédure d&rsquo;homologation est en cours de mise en place par le CNDA. Nous prenons en compte les nouvelles recommendations et nous mettrons à jour toute la documentation.</p>
<!---
Procédure temporaire :

 - Intégrateur : dépot des « prérequis » (ancien pdv avec déclarations) + contrat (les nouvelles CP) + l’attestation de conformité fournie par DEVCOOP au CNDA ;

 - CNDA rapatrie les déclarations sur le nouveau plan de test filtré (avec ou sans demande de précisons) ;

 - CNDA fournit le nouveau plan de test et l’accès à l’environnement dédié (mais aussi à DV1 pour faire des tests en parallèle) ;

 - Intégrateur réalise les tests de la phase 2 + terminent les déclarations du nouveau plan de test;

 - Intégrateur passage en « salle » (demo live).
  -->

</div>

<ul>
<li>
<p>Récupérer et remplir les Conditions Particulières DMP intégrateurs sur le site du CNDA (Une fois l&rsquo;architecture et les profils choisis)</p>
</li>
<li>
<p>Fournir les Conditions Particulières à DEVCOOP</p>
</li>
<li>
<p>Récupérer le PDV (Plan de vérification) filtré par DEVCOOP</p>
</li>
<li>
<p>Remplir l&rsquo;onglet &ldquo;Déclarations&rdquo; du PDV contenant l&rsquo;ensemble des exigences</p>
</li>
<li>
<p>Réaliser un test par transaction de l&rsquo;onglet &ldquo;Plan de tests&rdquo; du PDV</p>
</li>
<li>
<p>Fournir à DEVCOOP le PDV rempli de ces &ldquo;Déclarations&rdquo; ainsi que les logs des tests réalisés</p>
<p>==&gt; Génération attestation de conformité de la part de l’EAI par DEVCOOP</p>
</li>
</ul>
<h2 id="processus-dhomologation-cnda">Processus d&rsquo;homologation CNDA</h2>
<ul>
<li>
<p>Pour initier le passage d’homologation auprès du CNDA, fournir :</p>
<ul>
<li>les conditions particulières signées</li>
<li>l’attestation de conformité de DEVCOOP</li>
<li>le PDV entièrement filtré (tests/déclarations par l’EAI) et complété conjointement sur les déclarations.</li>
</ul>
</li>
<li>
<p>Obtention d&rsquo;un environnement dédié pour le passage d&rsquo;homologation et date de passage</p>
</li>
<li>
<p>Obtention des cartes vitales de test DMP</p>
</li>
<li>
<p>Passer les tests :  <a href="/dmp/howtos/homologation">/dmp/howtos/homologation</a></p>
</li>
<li>
<p>Déposer les résultats sur <a href="https://cnda.ameli.fr/PortailNie/?page_id=153">l’espace personnel du CNDA</a></p>
</li>
</ul>
<h2 id="déploiement">Déploiement</h2>
<h3 id="gestion-des-certificats">Gestion des certificats</h3>
<ul>
<li><a href="/dmp/howtos/gestioncertificat/">Dans le cas d&rsquo;une authentification indirecte pour les établissements</a></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-8b8e215b0b4cbdb8f1420baec42100c4">6.5 - Passage de l&#39;homologation</h1>
    <div class="lead">Les différents points à connaître pour homologuer votre solution</div>
	

<div class="pageinfo pageinfo-primary">
<p>Une nouvelle procédure d&rsquo;homologation est en cours de mise en place par le CNDA. Nous prenons en compte les nouvelles recommendations et nous mettrons à jour toute la documentation.</p>

</div>

<h2 id="plan-de-vérification">Plan De Vérification</h2>
<p>Une fois que vous avez reçu votre PDV filtré par les équipes de DEVCOOP. Il vous faut :</p>
<ul>
<li><strong>prendre connaissance de la Notice #EAI-int</strong></li>
<li>générer l’arborescence</li>
<li>répondre aux exigences dans l’onglet <code>Déclarations</code></li>
<li>exécuter le plan de test</li>
</ul>
<h3 id="onglet-arborescence">Onglet Arborescence</h3>
<p>Une macro est disponible pour créer l’arborescence des répertoires de test (activer les macros excel) :</p>
<p><img src="creation_arborescence.png" alt="creation_arborescence.png"></p>
<p>Qui vous permet d’obtenir ces répertoires :</p>
<p><img src="arborescence_cr%C3%A9%C3%A9.png" alt="arborescence_créé"></p>
<h3 id="onglet-déclaration">Onglet Déclaration</h3>
<p><img src="pdv_onglet_d%C3%A9clarations.png" alt="pdv_onglet_déclarations.png"></p>
<p>Pour vous aider nous avons partagé un projet reprenant l’ensemble des réponses possibles au différentes exigences.</p>
<p>Exemple : la réponse à</p>
<p><img src="EX_GEN-1350_excel.png" alt="EX_GEN-1350_excel.png"></p>
<p>peut être trouvé dans <a href="https://bitbucket.org/devbox-sante/homologation/issues/8/ex_gen-1350">https://bitbucket.org/devbox-sante/homologation/issues/8/ex_gen-1350</a></p>
<blockquote>
<p>Une fois les exigences remplies et validées par DEVCOOP, DEVCOOP vous fournit l’attestation de conformité vous permettant de continuer vos démarches auprès du CNDA.</p>
</blockquote>
<h3 id="onglet-plan-de-tests">Onglet Plan de tests</h3>
<p>Pour chaque test suivre la consigne et fournir les éléments nécessaires, pour celà vous devez interpréter les logs de la DevBox-Santé DMP :</p>
<h3 id="interpréter-les-logs">Interpréter les logs</h3>
<p>Dans la totalité des tests il vous sera demandé de fournir &ldquo;les requête/réponse de l&rsquo;appel au service&rdquo;</p>
<p>Pour celà, il faut s&rsquo;assurer que la configuration <code>application.yml</code> de votre installation (par exemple <code>C:\Program Files\DevBoxSante\application.yml</code> dans le cas d’une installation poste client sous windows), ne contient pas les lignes suivantes : </p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">logging</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">level</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">org.apache.cxf</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;warn&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>Remarque : cette configuration est à ajouter pour un accès en production.</p>
<p>Une fois lancé dans le fichier <code>output.log</code> :</p>
<pre tabindex="0"><code>  ____             ____                                 _            
 |  _ \  _____   _| __ )  _____  __     ___  __ _ _ __ | |_ ___ 
 | | | |/ _ \ \ / /  _ \ / _ \ \/ /____/ __|/ _` | &#39;_ \| __/ _ \
 | |_| |  __/\ V /| |_) | (_) &gt;  &lt;_____\__ \ (_| | | | | ||  __/
 |____/ \___| \_/ |____/ \___/_/\_\    |___/\__,_|_| |_|\__\___|
                                                                

2022-09-16 09:32:25.747  INFO 38652 --- [           main] f.devboxsante.clients.DevboxSanteServer  : Starting DevboxSanteServer v2.18.0 on lfo-xps15-2 with PID 38652 (C:\Program Files\DevBoxSante\repository\devboxsante.jar started by lfo in C:\Program Files\DevBoxSante)
2022-09-16 09:32:25.750 DEBUG 38652 --- [           main] f.devboxsante.clients.DevboxSanteServer  : Running with Spring Boot v2.3.4.RELEASE, Spring v5.2.9.RELEASE
2022-09-16 09:32:25.750  INFO 38652 --- [           main] f.devboxsante.clients.DevboxSanteServer  : The following profiles are active: SWAGGER_INSTALLER,CNDA_WEB
2022-09-16 09:32:29.231  INFO 38652 --- [           main] o.o.core.config.InitializationService    : Initializing OpenSAML using the Java Services API
2022-09-16 09:32:29.763  INFO 38652 --- [           main] o.o.xmlsec.algorithm.AlgorithmRegistry   : Algorithm failed runtime support check, will not be usable: http://www.w3.org/2001/04/xmlenc#ripemd160
2022-09-16 09:32:29.768  INFO 38652 --- [           main] o.o.xmlsec.algorithm.AlgorithmRegistry   : Algorithm failed runtime support check, will not be usable: http://www.w3.org/2001/04/xmldsig-more#hmac-ripemd160
2022-09-16 09:32:29.776  INFO 38652 --- [           main] o.o.xmlsec.algorithm.AlgorithmRegistry   : Algorithm failed runtime support check, will not be usable: http://www.w3.org/2001/04/xmldsig-more#rsa-ripemd160
2022-09-16 09:32:30.331  INFO 38652 --- [           main] f.d.c.c.AlternativePortsConfiguration    : Try to start on port 9999
2022-09-16 09:32:30.712  INFO 38652 --- [           main] f.d.c.configuration.CookieConfiguration  : Cookie same-site: Lax
2022-09-16 09:32:30.714  INFO 38652 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9999 (http)
2022-09-16 09:32:30.723  INFO 38652 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-09-16 09:32:30.723  INFO 38652 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.38]
2022-09-16 09:32:30.783  INFO 38652 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-09-16 09:32:30.783  INFO 38652 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4968 ms
2022-09-16 09:32:31.345  INFO 38652 --- [           main] f.d.c.configuration.LMConfiguration      : installer.token: 50587132-ac43-4f41-b1e0-1d82c61b1d34
2022-09-16 09:32:31.346  INFO 38652 --- [           main] f.d.c.configuration.LMConfiguration      : installer.env: DEV
2022-09-16 09:32:31.346  INFO 38652 --- [           main] f.d.c.configuration.LMConfiguration      : installer.client: devcoop
2022-09-16 09:32:31.347  INFO 38652 --- [           main] f.d.c.configuration.LMConfiguration      : installer.backendUrl: https://clients.devbox-sante.fr
2022-09-16 09:32:31.347  INFO 38652 --- [           main] f.d.c.configuration.LMConfiguration      : installer.version: 2.18.0
</code></pre><p>Vous pourrez trouver les requêtes sortantes en cherchant le mot <strong>REQ_OUT</strong> : </p>
<pre tabindex="0"><code>2022-09-16 14:21:42.982  INFO 33980 --- [           main] o.a.cxf.services.GDP_PortType.REQ_OUT    : REQ_OUT
    Address: https://devh.lps2.dmp.gouv.fr/si-dmp-server/v2/services/patients
    HttpMethod: POST
    Content-Type: application/soap+xml; action=&#34;urn:hl7-org:v3:PRPA_IN201307UV02&#34;
    ExchangeId: 37018935-b110-4782-a191-d6a5ffc84d94
    ServiceName: GDPPortTypeService
    PortName: GDP_PortTypePort
    PortTypeName: GDP_PortType
    Headers: {Accept=*/*}
    Payload: &lt;soap:Envelope xmlns:soap=&#34;http://www.w3.org/2003/05/soap-envelope&#34;&gt;&lt;soap:Header&gt;&lt;Action xmlns=&#34;http://www.w3.org/2005/08/addressing&#34;&gt;urn:hl7-org:v3:PRPA_IN201307UV02&lt;/Action&gt;&lt;MessageID xmlns=&#34;http://www.w3.org/2005/08/addressing&#34;&gt;urn:uuid:c6de458d-4527-4959-a9c6-0e913af58247&lt;/MessageID&gt;&lt;To xmlns=&#34;http://www.w3.org/2005/08/addressing&#34;&gt;https://devh.lps2.dmp.gouv.fr/si-dmp-server/v2/services/patients&lt;/To&gt;&lt;ReplyTo xmlns=&#34;http://www.w3.org/2005/08/addressing&#34;&gt;&lt;Address&gt;http://www.w3.org/2005/08/addressing/anonymous&lt;/Address&gt;&lt;/ReplyTo&gt;&lt;wsse:Security xmlns:wsse=&#34;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&#34;&gt;&lt;saml2:Assertion xmlns:saml2=&#34;urn:oasis:names:tc:SAML:2.0:assertion&#34; ID=&#34;3dea0f38-739b-423f-9315-3777253e3d95&#34; IssueInstant=&#34;2022-09-16T12:21:41.838Z&#34; Version=&#34;2.0&#34;&gt;&lt;saml2:Issuer Format=&#34;urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName&#34;&gt;GIVENNAME=ANNE + CN=899700296140 + SURNAME=MED-CS RPPS0029614, T=Médecin, C=FR&lt;/saml2:Issuer&gt;&lt;ds:Signature xmlns:ds=&#34;http://www.w3.org/2000/09/xmldsig#&#34;&gt;
&lt;ds:SignedInfo&gt;
&lt;ds:CanonicalizationMethod Algorithm=&#34;http://www.w3.org/2001/10/xml-exc-c14n#&#34;/&gt;
&lt;ds:SignatureMethod Algorithm=&#34;http://www.w3.org/2001/04/xmldsig-more#rsa-sha256&#34;/&gt;
&lt;ds:Reference URI=&#34;#3dea0f38-739b-423f-9315-3777253e3d95&#34;&gt;
&lt;ds:Transforms&gt;
&lt;ds:Transform Algorithm=&#34;http://www.w3.org/2000/09/xmldsig#enveloped-signature&#34;/&gt;
&lt;ds:Transform Algorithm=&#34;http://www.w3.org/2001/10/xml-exc-c14n#&#34;/&gt;
&lt;/ds:Transforms&gt;
&lt;ds:DigestMethod Algorithm=&#34;http://www.w3.org/2001/04/xmlenc#sha256&#34;/&gt;
&lt;ds:DigestValue&gt;FgEbwW0Xzd+HGhjhxZfszDZm2IFwTXlU084oqJFbsfY=&lt;/ds:DigestValue&gt;
&lt;/ds:Reference&gt;
&lt;/ds:SignedInfo&gt;
&lt;ds:SignatureValue&gt;
cdb+3r9tpg4piUZ4reEJyAfq3EZeQwI7AvDRJAE447I7hjCjGEWPKBfPCdfwkIyU4bH8UadmxnjL&amp;#xd;
olMAZGEqgcUSs8+CW/wzsEbmRtGeAvKKhzlacm8Kl7U047hj+hjviwSDZhImSS9rZyeyjV4JcubR&amp;#xd;
0pbA+0wkvPQ1x1PT38tVEMXt965YV/ornj4TuGejcPx9WkX7VsrgjJFcH9r3oGVCIS10dC5l/PI1&amp;#xd;
8Cq1WEL1lx3ton4VgZCxkY7MAQAWGos08XzsV8pnc+GuA+H7+SBIqlBLfpt2z93Ru+HVoTu6ATMG&amp;#xd;
JjutwVGcJ3pnLGgofm26I6WvJSouimLUSCUwSA==
&lt;/ds:SignatureValue&gt;
&lt;ds:KeyInfo&gt;&lt;ds:X509Data&gt;&lt;ds:X509Certificate&gt;MIIIkjCCBnqgAwIBAgIQY9r/z8gDS9wvB2ErFSZ7ojANBgkqhkiG9w0BAQsFADB/MQswCQYDVQQG
EwJGUjETMBEGA1UECgwKQVNJUC1TQU5URTEXMBUGA1UECwwOMDAwMiAxODc1MTI3NTExFzAVBgNV
BAsMDklHQy1TQU5URSBURVNUMSkwJwYDVQQDDCBURVNUIEFDIElHQy1TQU5URSBGT1JUIFBFUlNP
Tk5FUzAeFw0yMDEyMTUxMzA4MzFaFw0yMzEyMTUxMzA4MzFaMF8xCzAJBgNVBAYTAkZSMREwDwYD
VQQMDAhNw6lkZWNpbjE9MAsGA1UEKgwEQU5ORTATBgNVBAMMDDg5OTcwMDI5NjE0MDAZBgNVBAQM
Ek1FRC1DUyBSUFBTMDAyOTYxNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALI4qUzO
XnPZTYXyNvNP0mHQyBxNAzT0vqHwduBDeEF+uvQZAHXn82bQMBD30dvVfsy8EY9LYIxgA11QKf9a
0xd9GD7pgi8DtmGF4Lcd7ZEE0MWnW9NjCCeOO1STwT6+aarE3OHXApy3J/0AIFb3ZGyFNr0cGu15
L3v56aB4TJ0m6Agn7h3KD9VjWoCGbsu7/BHDYqgF3/PG7fai4zF0hBX+5VeToa6EZUnUNOgRyaJF
1rRI261fkyw09B7gNF2gHxpRxS9ryZ4n64WV5JU5q2UlHHkUgpXk8UdD0fKSE6Wu8k18/OHQd96t
F6wrYtdmCxu6K7iWdOuGBMwwq/kie4kCAwEAAaOCBCgwggQkMAkGA1UdEwQCMAAwHQYDVR0OBBYE
FFqE3AQVqvHlLHBxuclOPSJwlDleMB8GA1UdIwQYMBaAFDrx5/XO6+33jcnJsp/t1GUp3B/9MA4G
A1UdDwEB/wQEAwIGQDBTBgNVHSAETDBKMEgGDSqBegGBVQEHAgEBAQEwNzA1BggrBgEFBQcCARYp
aHR0cDovL2lnYy1zYW50ZS5lc2FudGUuZ291di5mci9QQyUyMFRFU1QwEwYDVR0lBAwwCgYIKwYB
BQUHAwQwKwYDVR0QBCQwIoAPMjAyMDEyMTUxMzA4MzFagQ8yMDIzMTIxNTEzMDgzMVowggFABgNV
HR8EggE3MIIBMzA8oDqgOIY2aHR0cDovL2lnYy1zYW50ZS5lc2FudGUuZ291di5mci9DUkwvQUNJ
LUZPLVBQLVRFU1QuY3JsMIHyoIHvoIHshoHpbGRhcDovL2FubnVhaXJlLWlnYy5lc2FudGUuZ291
di5mci9jbj1URVNUJTIwQUMlMjBJR0MtU0FOVEUlMjBGT1JUJTIwUEVSU09OTkVTLG91PVRFU1Ql
MjBBQyUyMFJBQ0lORSUyMElHQy1TQU5URSUyMEZPUlQsb3U9SUdDLVNBTlRFJTIwVEVTVCxvdT0w
MDAyJTIwMTg3NTEyNzUxLG89QVNJUC1TQU5URSxjPUZSP2NlcnRpZmljYXRlcmV2b2NhdGlvbmxp
c3Q7YmluYXJ5P2Jhc2U/b2JqZWN0Q2xhc3M9cGtpQ0EwgfoGA1UdLgSB8jCB7zCB7KCB6aCB5oaB
42xkYXA6Ly9hbm51YWlyZS1pZ2MuZXNhbnRlLmdvdXYuZnIvY249VEVTVCUyMEFDJTIwSUdDLVNB
TlRFJTIwRk9SVCUyMFBFUlNPTk5FUyxvdT1URVNUJTIwQUMlMjBSQUNJTkUlMjBJR0MtU0FOVEUl
MjBGT1JULG91PUlHQy1TQU5URSUyMFRFU1Qsb3U9MDAwMiUyMDE4NzUxMjc1MSxvPUFTSVAtU0FO
VEUsYz1GUj9kZWx0YXJldm9jYXRpb25saXN0O2JpbmFyeT9iYXNlP29iamVjdENsYXNzPXBraUNB
MIGABggrBgEFBQcBAQR0MHIwJgYIKwYBBQUHMAGGGmh0dHA6Ly9vY3NwLmVzYW50ZS5nb3V2LmZy
MEgGCCsGAQUFBzAChjxodHRwOi8vaWdjLXNhbnRlLmVzYW50ZS5nb3V2LmZyL0FDJTIwVEVTVC9B
Q0ktRk8tUFAtVEVTVC5jZXIwDwYIKoF6AUcBAgUEAwQBgDAPBggqgXoBRwECAgQDAgEAMCMGCCqB
egFHAQIDBBcTFTgwMjUwMDAwMDEvMjgwMDgxMTExMjAPBggqgXoBRwECBwQDAgEKMBQGCCqBegFH
BAIFBAgwBgwEU00yNjANBgkqhkiG9w0BAQsFAAOCAgEAjHlMgOOxa0WrBYYOu7QV1s73Cp+y2KYH
elVvcZym8SM4qVFtbCuHljO3nFEYbEjMvs3aEtuTJ6vuEY4GkEg2fwcgbcIcwW4nXOV6YywyV0rB
TBTW77GOsngHSpsMdtmBL41nr4WCtULCnQd0TGl3pEqRVuNpWt2WwReL6VGB+ZbCmRrTdkc3Ne/5
TR7hC6//ddvjjNIc1QCX3MU22d10ZsNnc9d5O3ZF9fenYlnCd2QLbWpSHJ7TCvAhNIF2S/EmLcWx
o7NXoCW/Di7iOEYCM57mr79FuTyCUbUI0DDLz3lxJ+aHvyUAp/Tnzwd6NwO6HLgt7PTt2S/hX8ZM
bS5UlQK3AoAr5++5Sb9QGEmopnVTz+YhCtJoyWtNudHtYUiS+1RrERALWC5++CaZDusOdxmAFRX8
84OQznWcxj5A1b1GOBF84yEXwxZgYKGBM9Iz8EmvpBHwVCj6VdjvVmeYJwiH+cjP1Q1N6aQlSEcR
lHB6fvG7oSUZot3lcTldhHyxxhfR0+HEXYhG7/DYcsNymqwD4vDURUAwOvoOWzHPfs6r1fECw21T
bP3Y2OtFuWfDXarPYW+3YMmMEJwboL+APfinsuS5tziDfoFKRMJf25o2SgNYOPNxnsTspW4P/x/2
Fdxj9tnROlPZfBxXLraunS7zw6uqjJS6iPHS80hoFHQ=&lt;/ds:X509Certificate&gt;&lt;/ds:X509Data&gt;&lt;/ds:KeyInfo&gt;&lt;/ds:Signature&gt;&lt;saml2:Subject&gt;&lt;saml2:NameID&gt;899700296140&lt;/saml2:NameID&gt;&lt;/saml2:Subject&gt;&lt;saml2:AuthnStatement AuthnInstant=&#34;2022-09-16T12:21:41.864Z&#34;&gt;&lt;saml2:AuthnContext&gt;&lt;saml2:AuthnContextClassRef&gt;urn:oasis:names:tc:SAML:2.0:ac:classes:SmartcardPKI&lt;/saml2:AuthnContextClassRef&gt;&lt;/saml2:AuthnContext&gt;&lt;/saml2:AuthnStatement&gt;&lt;saml2:AttributeStatement&gt;&lt;saml2:Attribute Name=&#34;Identifiant_Structure&#34;&gt;&lt;saml2:AttributeValue&gt;10B0156832&lt;/saml2:AttributeValue&gt;&lt;/saml2:Attribute&gt;&lt;saml2:Attribute Name=&#34;Secteur_Activite&#34;&gt;&lt;saml2:AttributeValue&gt;SA05^1.2.250.1.71.4.2.4&lt;/saml2:AttributeValue&gt;&lt;/saml2:Attribute&gt;&lt;saml2:Attribute Name=&#34;urn:oasis:names:tc:xacml:2.0:subject:role&#34;&gt;&lt;saml2:AttributeValue&gt;&lt;Role xmlns=&#34;urn:hl7-org:v3&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; code=&#34;10&#34; codeSystem=&#34;1.2.250.1.71.1.2.7&#34; displayName=&#34;Médecin&#34; xsi:type=&#34;CE&#34;/&gt;&lt;/saml2:AttributeValue&gt;&lt;saml2:AttributeValue&gt;&lt;Role xmlns=&#34;urn:hl7-org:v3&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; code=&#34;SM26&#34; codeSystem=&#34;1.2.250.1.71.4.2.5&#34; displayName=&#34;Qualifié en Médecine Générale (SM)&#34; xsi:type=&#34;CE&#34;/&gt;&lt;/saml2:AttributeValue&gt;&lt;/saml2:Attribute&gt;&lt;saml2:Attribute Name=&#34;VIHF_Version&#34;&gt;&lt;saml2:AttributeValue&gt;3.0&lt;/saml2:AttributeValue&gt;&lt;/saml2:Attribute&gt;&lt;saml2:Attribute Name=&#34;Authentification_mode&#34;&gt;&lt;saml2:AttributeValue&gt;DIRECTE&lt;/saml2:AttributeValue&gt;&lt;/saml2:Attribute&gt;&lt;saml2:Attribute Name=&#34;urn:oasis:names:tc:xacml:2.0:resource:resource-id&#34;&gt;&lt;saml2:AttributeValue&gt;157069329642881^^^&amp;amp;1.2.250.1.213.1.4.10&amp;amp;ISO^NH&lt;/saml2:AttributeValue&gt;&lt;/saml2:Attribute&gt;&lt;saml2:Attribute Name=&#34;Ressource_URN&#34;&gt;&lt;saml2:AttributeValue&gt;urn:dmp&lt;/saml2:AttributeValue&gt;&lt;/saml2:Attribute&gt;&lt;saml2:Attribute Name=&#34;urn:oasis:names:tc:xspa:1.0:subject:purposeofuse&#34;&gt;&lt;saml2:AttributeValue&gt;&lt;PurposeOfUse xmlns=&#34;urn:hl7-org:v3&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; code=&#34;normal&#34; codeSystem=&#34;1.2.250.1.213.1.1.4.248&#34; displayName=&#34;Accès normal&#34; xsi:type=&#34;CE&#34;/&gt;&lt;/saml2:AttributeValue&gt;&lt;/saml2:Attribute&gt;&lt;saml2:Attribute Name=&#34;LPS_ID&#34;&gt;&lt;saml2:AttributeValue&gt;1.2.250.1.287.1.1234567&lt;/saml2:AttributeValue&gt;&lt;/saml2:Attribute&gt;&lt;saml2:Attribute Name=&#34;LPS_Nom&#34;&gt;&lt;saml2:AttributeValue&gt;DEVBOX-SANTE DMP&lt;/saml2:AttributeValue&gt;&lt;/saml2:Attribute&gt;&lt;saml2:Attribute Name=&#34;LPS_Version&#34;&gt;&lt;saml2:AttributeValue&gt;5.0&lt;/saml2:AttributeValue&gt;&lt;/saml2:Attribute&gt;&lt;saml2:Attribute Name=&#34;LPS_ID_HOMOLOGATION_DMP&#34;&gt;&lt;saml2:AttributeValue&gt;DCP-537042-tmp8&lt;/saml2:AttributeValue&gt;&lt;/saml2:Attribute&gt;&lt;/saml2:AttributeStatement&gt;&lt;/saml2:Assertion&gt;&lt;/wsse:Security&gt;&lt;/soap:Header&gt;&lt;soap:Body&gt;&lt;PRPA_IN201307UV02 xmlns=&#34;urn:hl7-org:v3&#34; xmlns:ns2=&#34;asip:ci-sis:gdp:2010&#34; ITSVersion=&#34;XML_1.0&#34;&gt;&lt;id extension=&#34;11a12948-8a2d-478a-828a-46daea093cd5&#34; root=&#34;1.2.250.1.287.1.1234567.10&#34;/&gt;&lt;creationTime value=&#34;20220916122141&#34;/&gt;&lt;interactionId extension=&#34;PRPA_IN201307UV02&#34; root=&#34;2.16.840.1.113883.1.6&#34;/&gt;&lt;processingCode code=&#34;D&#34;/&gt;&lt;processingModeCode code=&#34;T&#34;/&gt;&lt;acceptAckCode code=&#34;AL&#34;/&gt;&lt;receiver typeCode=&#34;RCV&#34;&gt;&lt;device classCode=&#34;DEV&#34; determinerCode=&#34;INSTANCE&#34;&gt;&lt;id root=&#34;1.2.250.1.213.4.1.1.1&#34;/&gt;&lt;softwareName&gt;DMP&lt;/softwareName&gt;&lt;/device&gt;&lt;/receiver&gt;&lt;sender typeCode=&#34;SND&#34;&gt;&lt;device classCode=&#34;DEV&#34; determinerCode=&#34;INSTANCE&#34;&gt;&lt;id root=&#34;1.2.250.1.287.1.1234567&#34;/&gt;&lt;softwareName&gt;DEVBOX-SANTE DMP&lt;/softwareName&gt;&lt;/device&gt;&lt;/sender&gt;&lt;controlActProcess classCode=&#34;CACT&#34; moodCode=&#34;EVN&#34;&gt;&lt;reasonCode code=&#34;TEST_EXST&#34; codeSystem=&#34;1.2.250.1.213.1.1.4.11&#34; displayName=&#34;Test d&#39;existence de dossier&#34;/&gt;&lt;queryByParameter&gt;&lt;queryId extension=&#34;2f2b5d56-2bf2-42f0-b186-60076dfc3602&#34; root=&#34;1.2.250.1.287.1.1234567.11&#34;/&gt;&lt;statusCode code=&#34;new&#34;/&gt;&lt;parameterList&gt;&lt;patientIdentifier&gt;&lt;value extension=&#34;157069329642881&#34; root=&#34;1.2.250.1.213.1.4.10&#34;/&gt;&lt;semanticsText&gt;Patient.id&lt;/semanticsText&gt;&lt;/patientIdentifier&gt;&lt;/parameterList&gt;&lt;/queryByParameter&gt;&lt;/controlActProcess&gt;&lt;/PRPA_IN201307UV02&gt;&lt;/soap:Body&gt;&lt;/soap:Envelope&gt;
</code></pre><p>Ce qui intéresse le CNDA c’est le payload soap xml que l’on mettera dans <code>REQUETE_LPS.xml</code></p>
<p>Pour la réponse <strong>RESP_IN</strong> : </p>
<pre tabindex="0"><code>2022-09-16 14:21:43.124  INFO 33980 --- [           main] o.a.cxf.services.GDP_PortType.RESP_IN    : RESP_IN
    Address: https://devh.lps2.dmp.gouv.fr/si-dmp-server/v2/services/patients
    Content-Type: application/soap+xml;charset=UTF-8
    ResponseCode: 200
    ExchangeId: 37018935-b110-4782-a191-d6a5ffc84d94
    ServiceName: GDPPortTypeService
    PortName: GDP_PortTypePort
    PortTypeName: GDP_PortType
    Headers: {vary=Origin, content-type=application/soap+xml;charset=UTF-8, Content-Length=3604, Date=Fri, 16 Sep 2022 12:21:43 GMT}
    Payload: &lt;soap:Envelope xmlns:ns1=&#34;urn:si-dmp-patients&#34; xmlns:soap=&#34;http://www.w3.org/2003/05/soap-envelope&#34;&gt;&lt;soap:Header&gt;&lt;Action xmlns=&#34;http://www.w3.org/2005/08/addressing&#34;&gt;urn:hl7-org:v3:PRPA_IN201308UV02&lt;/Action&gt;&lt;MessageID xmlns=&#34;http://www.w3.org/2005/08/addressing&#34;&gt;urn:uuid:388c97d8-280f-4c9e-b275-53026cd3256b&lt;/MessageID&gt;&lt;To xmlns=&#34;http://www.w3.org/2005/08/addressing&#34;&gt;http://www.w3.org/2005/08/addressing/anonymous&lt;/To&gt;&lt;RelatesTo xmlns=&#34;http://www.w3.org/2005/08/addressing&#34;&gt;urn:uuid:c6de458d-4527-4959-a9c6-0e913af58247&lt;/RelatesTo&gt;&lt;/soap:Header&gt;&lt;soap:Body&gt;&lt;PRPA_IN201308UV02 xmlns=&#34;urn:hl7-org:v3&#34; xmlns:ns2=&#34;asip:ci-sis:gdp:2010&#34; ITSVersion=&#34;XML_1.0&#34;&gt;&lt;id root=&#34;93e46b54-3076-4d33-981f-131af01e8597&#34;/&gt;&lt;creationTime value=&#34;20220916122143&#34;/&gt;&lt;interactionId extension=&#34;PRPA_IN201308UV02&#34; root=&#34;2.16.840.1.113883.1.6&#34;/&gt;&lt;processingCode code=&#34;P&#34;/&gt;&lt;processingModeCode code=&#34;T&#34;/&gt;&lt;acceptAckCode code=&#34;NE&#34;/&gt;&lt;receiver typeCode=&#34;RCV&#34;&gt;&lt;device classCode=&#34;DEV&#34; determinerCode=&#34;INSTANCE&#34;&gt;&lt;id root=&#34;1.2.250.1.287.1.1234567&#34;/&gt;&lt;softwareName&gt;DEVBOX-SANTE DMP&lt;/softwareName&gt;&lt;/device&gt;&lt;/receiver&gt;&lt;sender typeCode=&#34;SND&#34;&gt;&lt;device classCode=&#34;DEV&#34; determinerCode=&#34;INSTANCE&#34;&gt;&lt;id root=&#34;1.2.250.1.213.4.1.1.1&#34;/&gt;&lt;softwareName&gt;DMP&lt;/softwareName&gt;&lt;/device&gt;&lt;/sender&gt;&lt;attentionLine&gt;&lt;keyWordText code=&#34;AUTORISATION&#34; codeSystem=&#34;1.2.250.1.213.4.1.2.6.1&#34;/&gt;&lt;value xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; code=&#34;NON_EXISTE&#34; codeSystem=&#34;1.2.250.1.213.4.1.2.6.2&#34; xsi:type=&#34;CV&#34;/&gt;&lt;/attentionLine&gt;&lt;attentionLine&gt;&lt;keyWordText code=&#34;STATUT_MT&#34; codeSystem=&#34;1.2.250.1.213.4.1.2.6.3&#34;/&gt;&lt;value xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; value=&#34;false&#34; xsi:type=&#34;BL&#34;/&gt;&lt;/attentionLine&gt;&lt;acknowledgement typeCode=&#34;AA&#34;&gt;&lt;targetMessage&gt;&lt;id extension=&#34;11a12948-8a2d-478a-828a-46daea093cd5&#34; root=&#34;1.2.250.1.287.1.1234567.10&#34;/&gt;&lt;/targetMessage&gt;&lt;/acknowledgement&gt;&lt;controlActProcess classCode=&#34;CACT&#34; moodCode=&#34;EVN&#34;&gt;&lt;reasonCode code=&#34;TEST_EXST&#34; codeSystem=&#34;1.2.250.1.213.1.1.4.11&#34; displayName=&#34;Test d&#39;existence de dossier&#34;/&gt;&lt;subject contextConductionInd=&#34;false&#34; typeCode=&#34;SUBJ&#34;&gt;&lt;registrationEvent classCode=&#34;REG&#34; moodCode=&#34;EVN&#34;&gt;&lt;statusCode code=&#34;completed&#34;/&gt;&lt;subject1 typeCode=&#34;SBJ&#34;&gt;&lt;patient classCode=&#34;PAT&#34;&gt;&lt;id extension=&#34;1418878867934420256667&#34; root=&#34;1.2.250.1.213.1.4.2&#34;/&gt;&lt;id extension=&#34;157069329642881&#34; root=&#34;1.2.250.1.213.1.4.10&#34;/&gt;&lt;statusCode code=&#34;active&#34;/&gt;&lt;patientPerson classCode=&#34;PSN&#34; determinerCode=&#34;INSTANCE&#34;&gt;&lt;name&gt;&lt;prefix&gt;Mme&lt;/prefix&gt;&lt;given&gt;IRENE&lt;/given&gt;&lt;family qualifier=&#34;BR&#34;&gt;DECHAINE&lt;/family&gt;&lt;family qualifier=&#34;SP&#34;&gt;ENCHAINE&lt;/family&gt;&lt;/name&gt;&lt;administrativeGenderCode code=&#34;F&#34;/&gt;&lt;birthTime value=&#34;19570628&#34;/&gt;&lt;/patientPerson&gt;&lt;subjectOf typeCode=&#34;SBJ&#34;&gt;&lt;administrativeObservation classCode=&#34;OBS&#34; moodCode=&#34;EVN&#34;&gt;&lt;code code=&#34;RATTACHEMENT_ENS&#34; codeSystem=&#34;1.2.250.1.213.4.1.2.3&#34; displayName=&#34;information de rattachement du DMP à un ENS&#34;/&gt;&lt;value xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; value=&#34;false&#34; xsi:type=&#34;BL&#34;/&gt;&lt;/administrativeObservation&gt;&lt;/subjectOf&gt;&lt;subjectOf typeCode=&#34;SBJ&#34;&gt;&lt;administrativeObservation classCode=&#34;OBS&#34; moodCode=&#34;EVN&#34;&gt;&lt;code code=&#34;COMPTE_INTERNET_OUVERT&#34; codeSystem=&#34;1.2.250.1.213.4.1.2.9&#34;/&gt;&lt;value xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; value=&#34;false&#34; xsi:type=&#34;BL&#34;/&gt;&lt;/administrativeObservation&gt;&lt;/subjectOf&gt;&lt;/patient&gt;&lt;/subject1&gt;&lt;custodian typeCode=&#34;CST&#34;&gt;&lt;assignedEntity classCode=&#34;ASSIGNED&#34;&gt;&lt;id root=&#34;1.2.250.1.213.4.1.1.1&#34;/&gt;&lt;/assignedEntity&gt;&lt;/custodian&gt;&lt;/registrationEvent&gt;&lt;/subject&gt;&lt;queryAck&gt;&lt;queryId extension=&#34;2f2b5d56-2bf2-42f0-b186-60076dfc3602&#34; root=&#34;1.2.250.1.287.1.1234567.11&#34;/&gt;&lt;queryResponseCode code=&#34;OK&#34;/&gt;&lt;/queryAck&gt;&lt;/controlActProcess&gt;&lt;/PRPA_IN201308UV02&gt;&lt;/soap:Body&gt;&lt;/soap:Envelope&gt;
</code></pre><p>Et bien sur ce qui nous intérresse c’est le payload xml, que l’on mettera dans <code>REPONSE_DMP.xml</code></p>
<p>Chaque trame se trouve dans l’arborescence :</p>
<p><img src="arborescence_plan_test.png" alt=""></p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-0f6a8b8e81b29a55c0237a0114578bf4">6.6 - Gestion des certificats</h1>
    <div class="lead">Gestion des certificats de l&rsquo;IGC santé pour l&rsquo;authentification indirecte</div>
	<p>Afin d&rsquo;utiliser le connecteur DevBox-Santé DMP en mode authentification indirecte, il vous faut obtenir des certificats serveurs provenant de cette autorité. 
Pour celà après avoir commandé des cartes CPS vous pouvez faire une demande à partir d&rsquo;un téléservice dont la procédure est décrite ici.</p>
<h2 id="procédure-administrative">Procédure Administrative</h2>
<h3 id="industriel-pour-les-tests">Industriel pour les tests</h3>
<p>Pour l&rsquo;industriel la liste des formulaires de gestion des certificats sont ici : <a href="https://esante.gouv.fr/index-des-formulaires#23241">https://esante.gouv.fr/index-des-formulaires#23241</a></p>
<p>Le formulaire de commande de cartes et certificats de test est le F414 : <a href="https://esante.gouv.fr/sites/default/files/media_entity/documents/F414.pdf">https://esante.gouv.fr/sites/default/files/media_entity/documents/F414.pdf</a></p>
<p>Il est possible de faire la démarche en ligne : <a href="https://www.demarches-simplifiees.fr/commencer/f414">https://www.demarches-simplifiees.fr/commencer/f414</a></p>
<h3 id="en-production">En production</h3>
<p>Pour obtenir, les certificats et clés nécessaires pour la connexion au DMP en authentification indirecte, il faut que votre établissement soit enregistré au FINESS (Fichier National des Établissements Sanitaires es Sociaux) : <a href="http://finess.sante.gouv.fr/fininter/jsp/index.jsp">http://finess.sante.gouv.fr/fininter/jsp/index.jsp</a></p>
<p>Depuis le SEGUR santé, les guides de commandes de certificats sont spécifiques à chaque couloir :</p>
<ul>
<li><a href="https://esante.gouv.fr/sites/default/files/media_entity/documents/segur-numerique-medico-social-guide-certificats.pdf">Médico-social</a></li>
<li><a href="https://esante.gouv.fr/sites/default/files/media_entity/documents/segur-numerique-mdv-guide-certificats.pdf">Médecine de ville</a></li>
<li><a href="https://esante.gouv.fr/sites/default/files/media_entity/documents/segur-numerique-hopital-guide-certificats.pdf">Hôpital</a></li>
<li><a href="https://esante.gouv.fr/sites/default/files/media_entity/documents/segur-numerique-biologie-guide-certificats.pdf">Biologie</a></li>
<li><a href="https://esante.gouv.fr/sites/default/files/media_entity/documents/segur-numerique-radiologie-guide-certificats.pdf">Radiologie</a></li>
<li><a href="https://esante.gouv.fr/sites/default/files/media_entity/documents/segur-numerique-officine-guide-certificats.pdf">Officine</a></li>
</ul>
<p>Les principes généraux sont les suivants :</p>
<blockquote>
<p>Lors du raccordement au DMP, chaque site géographique d’un établissement de santé s’authentifie et s’identifie via son numéro de FINESS géographique/juridique.</p>
<ul>
<li>Ainsi, chaque site doit générer des certificats d’organisation sur son numéro de FINESS géographique/juridique.</li>
<li>L’administrateur technique est une personne de confiance à qui le représentant légal de l’établissement délègue le droit de gérer le cycle de vie des certificats logiciels commandés.</li>
</ul>
</blockquote>
<blockquote>
<p>Il est également possible pour le représentant légal d’une structure de désigner un ou plusieurs mandataires pour sa structure.</p>
</blockquote>
<h3 id="quels-certificats-">Quels certificats ?</h3>
<blockquote>
<p>Pour accéder au DMP en authentification indirecte (création/gestion administrative et alimentation), vous avez besoin de déployer les certificats suivants :</p>
<ul>
<li>un certificat client de type ORG AUTH_CLI pour s’authentifier au DMP ;</li>
<li>un certificat client de type ORG SIGN pour signer les lots de documents soumis au DMP</li>
</ul>
</blockquote>
<h2 id="procédure-technique">Procédure Technique</h2>
<p>Il est possible de commander ces certificats sur le site web mis à disposition par l&rsquo;ANS. Il s&rsquo;agit d&rsquo;un service permettant la commande de certificats et cartes :</p>
<p><a href="https://pfc.eservices.esante.gouv.fr">https://pfc.eservices.esante.gouv.fr</a></p>
<p>Pour pouvoir y accéder il faut se connecter avec un lecteur de cartes CPS configuré et une carte CPA autorisée au préalable :</p>
<p><img src="pfcngAccueil.png" alt="pfcngAccueil.png"></p>
<h3 id="certificats-et-clés-dauthentification">Certificats et clés d&rsquo;authentification</h3>
<h4 id="demander">Demander</h4>
<h5 id="étape-1">Étape 1:</h5>
<p><img src="pfcngDemandeStep1.png" alt="pfcng"></p>
<h5 id="étape-2">Étape 2:</h5>
<p>RAS, il s&rsquo;agit d&rsquo;un écran de recherche pour les demandes antérieures. Cliquer sur &ldquo;Demander un nouveau produit&rdquo;</p>
<h5 id="étape-3">Étape 3:</h5>
<p>Il faut renseigner :</p>
<ul>
<li>l&rsquo;usage : AUTH_CLI</li>
<li>le nom du service (nom du logiciel) qui va accéder au DMP,</li>
<li>son adresse email (utiliser plus tard pour envoyer une confirmation)</li>
</ul>
<p><img src="pfcngDemandeStep3Auth.png" alt="pfcng"></p>
<h5 id="étape-4-">Étape 4 :</h5>
<p>Pour cette étape le plus simple est de générer la CSR sur le site, mais pas obligatoire.</p>
<ul>
<li>Saisir un mot de passe assez fort pour convenir au service, et sauvegarder le car il sera demandé lors de la récupération du certificats P12, ainsi que pour configurer la DevBox-Santé DMP.</li>
<li>Cliquer sur &ldquo;Générer la CSR&rdquo;, puis &ldquo;Finaliser&rdquo;</li>
</ul>
<p><img src="pfcngDemandeStep4GenerateCSR.png" alt="pfcng"></p>
<h5 id="étape-5-">Étape 5 :</h5>
<p>Vous recevez un email de confirmation de la demande à l&rsquo;email saisie à l&rsquo;étape 3 :</p>
<h4 id="retirer">Retirer</h4>
<p>Depuis l&rsquo;étape 5 de la demande vous pouvez accéder au retrait du certificat commandé. Sinon vous pouvez y accéder par le menu Retirer</p>
<h5 id="étape-1-1">Étape 1:</h5>
<p>Cette étape consiste à choisir le produit à retirer</p>
<p><img src="pfcngRetirerStep1.png" alt="pfcng"></p>
<h5 id="étape-2-1">Étape 2:</h5>
<p>Dans cette étape, il faut saisir un nouveau mot de passe pour les révocations (identique ou pas de celui de la CSR). Il n&rsquo;est pas utilisé dans l&rsquo;API mais peut servir à l&rsquo;administrateur technique.</p>
<p><img src="pfcngRetirerStep2.png" alt="pfcng"></p>
<h4 id="étape-3-finalisation">Étape 3: Finalisation</h4>
<p>Dans cette étape, il faut saisir le mot de passe de réconciliation celui qui a permis de générer la CSR.</p>
<p><img src="pfcngRetirerStep3.png" alt="pfcng"></p>
<p>Le certificat/clé (p12) a un nom qui doit ressembler à asip-p12-EL-TEST-ORG-AUTH_CLI-20170603-173116.p12</p>
<h3 id="certificats-et-clés-de-signature">Certificats et clés de signature</h3>
<p>Pour la signature, il faut faire une autre demande avec le même process, à l&rsquo;exception de l&rsquo;étape 3 ou il faudra demander un certificat de signature : Usage SIGN</p>
<p><img src="pfcngDemandeStep3Sign.png" alt="pfcng"></p>
<h2 id="configuration-de-la-devbox-santé-dmp">Configuration de la DevBox-Santé DMP</h2>
<p>Le paramètrage de ces certificats pour la DevBox-Santé DMP se trouve dans le <code>application.yml</code></p>
<ul>
<li><code>dmpc.url.prefix</code></li>
<li><code>dmpc.smime.p12.path</code></li>
<li><code>dmpc.smime.p12.password</code></li>
<li><code>dmpc.ssl.p12.path</code></li>
<li><code>dmpc.ssl.p12.password</code></li>
<li><code>dmpc.ssl.trust.path</code></li>
</ul>
<p>Exemple de configuration à fournir :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">dmpc</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#8f5902;font-style:italic"># informations relatives au certificat smime</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">smime</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">p12</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> 
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">path</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic">#./smime.p12</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#000">A_renseigner </span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">password</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#000">A_renseigner</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># informations relatives au certificat ssl</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">ssl</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">p12</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">path</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic">#ssl.p12</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#000">A_renseigner</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">password</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#000">A_renseigner</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># Contient les certificats serveurs autorisés pour authentification mutuelle         </span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">trust</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">path</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#000">truststoreIgcSante-EL-ORG.jks</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-de03b1ff0ff2188a68d5d13f0a8489ec">6.7 - Schematron</h1>
    <div class="lead">Validation des CDA générés par la DevBox-Santé DMP lors de l&rsquo;homologation</div>
	<h2 id="validation-manuelle">Validation manuelle</h2>
<h3 id="utilisation-de-lespace-de-tests-de-lans">Utilisation de l&rsquo;espace de tests de l&rsquo;ANS</h3>
<p>Sur le site <a href="https://interop.esante.gouv.fr">interop.esante.gouv.fr</a> ou plus exactement <a href="https://interop.esante.gouv.fr/EVSClient/cda/validator.seam?standard=CDA-ASIP&amp;extension=ASIP">https://interop.esante.gouv.fr/EVSClient/cda/validator.seam?standard=CDA-ASIP&amp;extension=ASIP</a></p>
<p>Une fois sur le site :</p>
<ul>
<li>Il vous faut télécharger votre fichier CDA</li>
<li>Choisir le schematron à valider : &ldquo;Structuration minimale des documents de santé&rdquo; par exemple 
<img src="External_Validation_Service_Front-end_1.png" alt="External Validation Service Front-end_1"></li>
<li>Cliquer sur valider
<img src="External_Validation_Service_Front-end_2.png" alt="External Validation Service Front-end_1"></li>
</ul>
<h2 id="validation-automatique">Validation automatique</h2>
<h3 id="utilisation-des-outils-mis-à-disposition-par-lans">Utilisation des outils mis à disposition par l&rsquo;ANS</h3>
<p>Afin de valider manuellement les CDA générés par la DevBox-Santé DMP il faut utiliser les outils de vérification fournit par l&rsquo;ANS. Ils sont dorénavant héberger sur Github : <a href="https://github.com/ansforge/TestContenuCDA">https://github.com/ansforge/TestContenuCDA</a></p>
<p>La documentation se trouve ici : <a href="https://github.com/ansforge/TestContenuCDA/wiki">https://github.com/ansforge/TestContenuCDA/wiki</a></p>
<h3 id="commentaire-sur-lintégration-des-outils-de-lans-dans-la-devbox-santé">Commentaire sur l&rsquo;intégration des outils de l&rsquo;ANS dans la DevBox-Santé</h3>
<p>La DevBox-santé santé intègre les différents composants du projet github de l&rsquo;ANS, et propose la validation SCHEMATRON automatique par l&rsquo;utilisation des feuilles de style <code>xslt</code> fournies dans le projet <a href="https://github.com/ansforge/TestContenuCDA">https://github.com/ansforge/TestContenuCDA</a> .</p>
<p>Or ces dernières ne sont plus disponibles dans le projet et ne fait plus l&rsquo;objet de livraison. Pour plus d&rsquo;informations sur ce sujet : <a href="https://github.com/ansforge/TestContenuCDA/issues/4">https://github.com/ansforge/TestContenuCDA/issues/4</a> . Les feuilles de style xslt sont donc générés au moment du build de la DevBox-Santé.</p>
<p>Pour apporter les preuves schematrons nécessaires pour les tests d&rsquo;alimentation, vous pouvez retrouver les traces d&rsquo;exécution de cette validation dans les logs.</p>
<p>Exemple de validation pour un document CDAR2 Niveau 1 (structuration minimale) :</p>
<pre tabindex="0"><code>
ANS_CDA_ToolsManager   : load tools from : testContenuCDA-2.40.zip
ANS_CDA_ToolsManager   : directory created : C:\Users\lfo\AppData\Local\Temp\dmpc-api8808336379869609192
ANS_CDA_ToolsManager   : testContenuCDA-2.40.zip unzipped in C:\Users\lfo\AppData\Local\Temp\dmpc-api8808336379869609192\testContenuCDA_20220310_V2.40
DMPCCdaValidator       : validate with schema : C:\Users\lfo\AppData\Local\Temp\dmpc-api8808336379869609192\testContenuCDA_20220310_V2.40\infrastructure\cda\CDA_extended.xsd
DMPCCdaValidator       : validate with schematron : C:\Users\lfo\AppData\Local\Temp\dmpc-api8808336379869609192\testContenuCDA_20220310_V2.40\schematrons\profils\CI-SIS_StructurationMinimale.xsl
DMPCCdaValidator       : 
---------  SCHEMATRON_VALIDATION_RESULT -----  :
&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; standalone=&#34;no&#34;?&gt;
&lt;?xml-stylesheet type=&#34;text/xsl&#34; href=&#34;rapportSchematronToHtml4.xsl&#34;?&gt;&lt;svrl:schematron-output xmlns:cda=&#34;urn:hl7-org:v3&#34; xmlns:iso=&#34;http://purl.oclc.org/dsdl/schematron&#34; xmlns:jdv=&#34;http://esante.gouv.fr&#34; xmlns:lab=&#34;urn:oid:1.3.6.1.4.1.19376.1.3.2&#34; xmlns:saxon=&#34;http://saxon.sf.net/&#34; xmlns:schold=&#34;http://www.ascc.net/xml/schematron&#34; xmlns:svrl=&#34;http://purl.oclc.org/dsdl/svrl&#34; xmlns:svs=&#34;urn:ihe:iti:svs:2008&#34; xmlns:xhtml=&#34;http://www.w3.org/1999/xhtml&#34; xmlns:xs=&#34;http://www.w3.org/2001/XMLSchema&#34; xmlns:xsd=&#34;http://www.w3.org/2001/XMLSchema&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; dateHeure=&#34;6/10/2022 à 14:37:13 (temps UTC+02:00)&#34; document=&#34;&#34; phase=&#34;Struct_minimale&#34; schemaVersion=&#34;CI-SIS_StructurationMinimale.sch&#34; title=&#34;Rapport de conformité du document aux spécifications françaises (en-tête)&#34;&gt;
    &lt;svrl:active-pattern id=&#34;addr&#34;/&gt;
    &lt;svrl:fired-rule context=&#34;cda:addr&#34;/&gt;
    
    ...
    &lt;svrl:active-pattern id=&#34;variablesSM&#34;/&gt;
&lt;/svrl:schematron-output&gt;
---------
</code></pre><p>Il vous suffira d&rsquo;extraire le fichier xml de bonne exécution du schematron.</p>
<p>Pour une NoteVaccination, une deuxième validation est effectuée avec le schematron dédié à ce type de document CDA R2 de Niveau 3 (document structuré) :</p>
<pre tabindex="0"><code>DMPCCdaValidator       : validate with schematron : C:\Users\lfo\AppData\Local\Temp\devbox-sante-dmp4342499872869358088\testContenuCDA_20220310_V2.40\schematrons\CI-SIS_VAC-NOTE_2021.01.xsl
DMPCCdaValidator       : 
---------  SCHEMATRON_VALIDATION_RESULT -----  :
&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; standalone=&#34;no&#34;?&gt;
&lt;?xml-stylesheet type=&#34;text/xsl&#34; href=&#34;rapportSchematronToHtml4.xsl&#34;?&gt;&lt;svrl:schematron-output xmlns:cda=&#34;urn:hl7-org:v3&#34; xmlns:iso=&#34;http://purl.oclc.org/dsdl/schematron&#34; xmlns:jdv=&#34;http://esante.gouv.fr&#34; xmlns:saxon=&#34;http://saxon.sf.net/&#34; xmlns:schold=&#34;http://www.ascc.net/xml/schematron&#34; xmlns:svrl=&#34;http://purl.oclc.org/dsdl/svrl&#34; xmlns:svs=&#34;urn:ihe:iti:svs:2008&#34; xmlns:xhtml=&#34;http://www.w3.org/1999/xhtml&#34; xmlns:xs=&#34;http://www.w3.org/2001/XMLSchema&#34; xmlns:xsd=&#34;http://www.w3.org/2001/XMLSchema&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; dateHeure=&#34;3/11/2022 à 18:22:00 (temps UTC+01:00)&#34; document=&#34;&#34; phase=&#34;CI-SIS_VAC-NOTE_2021.01&#34; schemaVersion=&#34;CI-SIS_VAC-NOTE_2021.01.sch&#34; title=&#34;Vérification de la conformité au modèle Note de vaccination 2021.01&#34;&gt;
    &lt;svrl:active-pattern id=&#34;JDV_UsageDrogues-CISIS&#34;&gt;
        &lt;svrl:text&gt;Conformité d&#39;un élément codé obligatoire par rapport à un jeu de valeurs du CI-SIS&lt;/svrl:text&gt;
    &lt;/svrl:active-pattern&gt;
    &lt;svrl:active-pattern id=&#34;JDV_ProfessionsExposees-CISIS&#34;&gt;
        &lt;svrl:text&gt;Conformité d&#39;un élément codé obligatoire par rapport à un jeu de valeurs du CI-SIS&lt;/svrl:text&gt;
   ...
    &lt;svrl:active-pattern id=&#34;Entete_VAC-NOTE_2021.01&#34;/&gt;
    &lt;svrl:fired-rule context=&#34;cda:ClinicalDocument&#34;/&gt;
    &lt;svrl:fired-rule context=&#34;cda:ClinicalDocument/cda:recordTarget/cda:patientRole/cda:patient&#34;/&gt;
    &lt;svrl:active-pattern id=&#34;variables&#34;/&gt;
    &lt;svrl:fired-rule context=&#34;cda:ClinicalDocument&#34;/&gt;
&lt;/svrl:schematron-output&gt;
----------
</code></pre>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-5108f66151c5bdb9b3237f215debe81d">6.8 - Démo Stellair</h1>
    <div class="lead">Tester les mécanismes Olaqin TAAS (Terminal As A Service) sur l’environnement de démonstration.</div>
	<p>Vous avez accès à l’environnement de démonstration de Stellair d’Olaqin : <a href="https://demo.stellair.fr">https://demo.stellair.fr</a> :</p>
<p><img src="Stellair-accueil-demo.png" alt="Stellair-accueil-demo.png"></p>
<p>Vous pouvez également accéder avec vos terminaux Olaqin compatible aux APIs REST de la DevBox-Santé.</p>
<p>Pour celà, un environnement de démonstration a été mis à votre disposition : <a href="https://demo-stellair.devbox-sante.fr">https://demo-stellair.devbox-sante.fr</a></p>
<h2 id="authentification-et-accès-à-swagger">Authentification et Accès à Swagger</h2>
<p>Depuis l’environnement de démonstration , vous pouvez obtenir un jeton d’identification :</p>
<ol>
<li>
<p><strong>Sur la page d’accueil, accéder à la connexion Stellair :</strong>
<img src="1-devbox-sante-demo-stellair-home.png" alt="1-devbox-sante-demo-stellair-home.png"></p>
</li>
<li>
<p><strong>Après redirection vers le SSO Stellair, connectez-vous avec vos identifiants</strong>
<img src="2-stellair-redirection.png" alt="2-stellair-redirection.png"></p>
</li>
<li>
<p><strong>Une fois authentifié, vous pouvez accéder aux APIs rest via SWAGGER :</strong>
<img src="3-lien-swagger.png" alt="3-lien-swagger.png"></p>
</li>
</ol>
<h2 id="test-dexistence-sur-le-dmp">Test d’existence sur le DMP</h2>
<ol start="4">
<li><strong>POST de la requete http pour un test d’existence DMP :</strong>
<img src="4-POST-td02.png" alt="4-POST-td02.png"></li>
</ol>
<p>En curl :</p>
<pre tabindex="0"><code>curl -X POST &#34;https://demo-stellair.devbox-sante.fr/dmp/td02Exist&#34; -H &#34;accept: */*&#34; -H &#34;Content-Type: application/json&#34; -d &#34;{ \&#34;context\&#34;: { \&#34;author\&#34;: {}, \&#34;insNirAutorite\&#34;: \&#34;TEST\&#34;, \&#34;modeAcces\&#34;: { \&#34;acces\&#34;: \&#34;NORMAL\&#34; } }, \&#34;request\&#34;: { \&#34;ins\&#34;: \&#34;277076322082910\&#34; }}&#34;
</code></pre><p>Où le corps de la requête est :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;context&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;author&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;insNirAutorite&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;TEST&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;modeAcces&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;acces&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;NORMAL&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;request&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;ins&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;277076322082910&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><ol start="5">
<li><strong>Et récupérer la réponse :</strong> 
<img src="5-reponse-POST-td02.png" alt="5-reponse-POST-td02.png">
La réponse étant :</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;patient&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;ins&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;277076322082910&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;insAutorite&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;1.2.250.1.213.1.4.10&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;nomPatronymique&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;NESSI&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;prenom&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;RUTH&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;dateDeNaissance&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;19770714&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;ordreDeNaissance&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;sexe&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;F&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;role&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;STANDARD&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;status&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;ACTIF&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;autorisation&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;NON_EXISTE&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;compteInternetOuvert&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>Ce workflow permet de mettre en évidence l’accès au différentes fonctionnalités de Terminal As A Service d’Olaqin pour accéder au DMP, c’est à dire :</p>
<ul>
<li>La lecture des informationss de la carte CPS</li>
<li>L’accès au certificat d’authentification de la carte CPS</li>
<li>L’accès au mécanisme de signature du lecteur combiné à la carte CPS</li>
</ul>
<p>Pour plus d’informations, sur les transactions du DMP : <a href="/dmp/howtos/transactions">/dmp/howtos/transactions</a></p>
<p>Il est également possible d’accéder à la lecture de la Carte Vitale et au téléservice INSi</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-c2f2ade9ada5510eda41ad4f98eefc3b">6.9 - UniqueIdGenerator</h1>
    <div class="lead">[Alimentation] Génération des UniqueId</div>
	<p>Afin d&rsquo;être totalement conforme à l’exigence EX_2.1-1130.</p>
<blockquote>
<p>Chaque document et lot de document(s) produit par un LPS doit être identifié par un identifiant universel (champ XDS uniqueId au format OID) :</p>
<ul>
<li>
<p>soit le uniqueId est généré à partir d’un UUID (sous la branche OID 2.25), dans ce cas cet OID doit être stocké dans le LPS pour les recherches / remplacements futurs via ce même LPS ;</p>
</li>
<li>
<p>soit le uniqueId est généré à partir d’une racine propre à l’installation du LPS et d’un élément « variable » mais unique vis-à-vis de la racine de l’instance du LPS installée (par exemple horodatage, ou identifiant interne du document dans le LPS) ; il incombe au LPS de pouvoir retrouver ce uniqueId pour les recherches / remplacements futurs via ce même LPS (par exemple en stockant le uniqueId ainsi généré, ou la partie variable uniquement à condition de savoir reconstruire le uniqueId complet).</p>
</li>
</ul>
</blockquote>
<p>La DMPC-API fournit les deux implémentations demandées dans cette exigence. C&rsquo;est à l&rsquo;intégrateur de la choisir.</p>
<h2 id="basé-sur-la-source">Basé sur la Source</h2>
<p>L&rsquo;implémentation par défaut est basée sur les paramètres de la source. Elle est conforme au deuxième point de l&rsquo;exigence :</p>
<p>La source est définie par les deux paramètres de l&rsquo;<code>application.yml</code> :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">dmpc</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:bold">source</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># 1.2.250.1.287 est l&#39;OID de Devcoop</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># 1.2.250.1.287.1 est l&#39;OID correspondant à la DMPC pour Devcoop</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">idRoot</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">1.2.250.1.287.1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">idExtension</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">1234567</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>L&rsquo;implémentation ressemble à cela :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">/**
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">* Implémentation par défaut basé sur les informations du logiciel @see fr.devboxsante.dmp.core.Source
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">*  * un compteur
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">*  * et le temps en ms
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">static</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Default</span> <span style="color:#204a87;font-weight:bold">implements</span> <span style="color:#000">UniqueIdGenerator</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">...</span>
</span></span><span style="display:flex;"><span>        <span style="color:#5c35cc;font-weight:bold">@Override</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">Id</span> <span style="color:#000">generate</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">IdBuilder</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">setRoot</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">source</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">ToOID</span><span style="color:#ce5c00;font-weight:bold">()).</span><span style="color:#c4a000">setExtension</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">currentTimeMillis</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#4e9a06">&#34;.&#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">cpt</span><span style="color:#ce5c00;font-weight:bold">++)).</span><span style="color:#c4a000">toId</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><h2 id="basée-sur-luuid">Basée sur l&rsquo;UUID</h2>
<p>Il est possible d’utiliser une autre implémentation proposée par la DMPC-API pour utiliser l’OID UUID : &ldquo;2.25&rdquo; . Cette implémentation est conforme à la première méthode de l&rsquo;exigence.</p>
<p>Il suffit de configurer un bean implémentant <code>UniqueIdGenerator</code>, de la manière suivante:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span> <span style="color:#5c35cc;font-weight:bold">@Configuration</span>
</span></span><span style="display:flex;"><span> <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">MyOwnDmpcApiConfiguration</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#5c35cc;font-weight:bold">@Bean</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">UniqueIdGenerator</span> <span style="color:#000">idGenerate</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">UniqueIdGenerator</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">WithUuid</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><h2 id="implémentée-par-lintégrateur">Implémentée par l&rsquo;intégrateur</h2>
<p>Il est néanmoins possible de générer ses UniqueId, l&rsquo;intégrateur devra donc proposer sa propre implémentation du <code>UniqueIdGenerator</code> et de l&rsquo;ajouter à sa configuration spring .</p>
<p>Attention : Elle devra être conforme à l&rsquo;une des deux exigences mentionnées ci-dessus.</p>
<p>Exemple :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@Configuration</span>
</span></span><span style="display:flex;"><span> <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">MyOwnDmpcApiConfiguration</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#5c35cc;font-weight:bold">@Bean</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">UniqueIdGenerator</span> <span style="color:#000">idGenerate</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">MyOwnImplementationOfUniqueIdGenerator</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>‌</p>
<p>‌</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-19c3ebeab867e0a03ad82e20cb9db692">6.10 - CNDA : Fiche d&#39;identité du composant DMP</h1>
    
	<h3 id="__nie-devcoop--dev331918__"><strong>NIE DEVCOOP : DEV331918</strong></h3>
<h3 id="description">Description</h3>
<p>La DevBox-Santé DMP est un connecteur EAI homologué V2 par le CNDA qui s’interface avec le DMP.
Elle prend en charge la complexité de l’intégration et facilite ainsi aux éditeurs de logiciel de santé l’intéropérabilité avec le DMP en vous fournissant une API simple à utiliser.</p>
<h3 id="homologation-du-15122022">Homologation du 15/12/2022</h3>
<ul>
<li>Nom du logiciel : <strong>DEVBOX-SANTE DMP</strong></li>
<li>Version : <strong>5.0</strong></li>
<li>NIL : <strong>DEV935997</strong></li>
<li>Type Fonctionnel : <strong>EAI</strong></li>
<li>Homologation package GIE SV : <strong>02.06.00</strong></li>
</ul>
<h4 id="homologation-du-27092021">Homologation du 27/09/2021</h4>
<ul>
<li>Nom du logiciel : <strong>DEVBOX-SANTE DMP</strong></li>
<li>Version : <strong>4.5</strong></li>
<li>NIL : <strong>DEV935997</strong></li>
<li>Type Fonctionnel : <strong>EAI</strong></li>
<li>Homologation package GIE SV : <strong>02.05.00</strong></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-6b9c62d7feaf9fcc9d33c8f6b0be34a8">6.11 - FAQ</h1>
    <div class="lead">Foire aux questions intégrations DMP</div>
	<blockquote>
<p>Le champ <strong>Resource_id</strong> est incorrect : 2770763220829^^^&amp;1.2.250.1.213.1.4.10&amp;ISO^NH</p>
</blockquote>
<p>Vérifier la taille de l’INS, il manque généralement la clé. La bonne valeur de cet INS pour les transactions DMP est : <code>277076322082910</code></p>
<blockquote>
<p>Quel statut d’INS pour l’alimentation DMP ?</p>
</blockquote>
<p>Une INS qualifiée sera nécessaire pour l’alimentation du DMP. A défaut, le DMP ne pourra pas être alimenté.</p>
<p><em><strong>Source : <code>INS_Guide implementation_V2_0.pdf</code></strong></em></p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-64d3be6d24d50e4a4f7033d2c071a34f">7 - Architecture interne des différents composants</h1>
    <div class="lead">Pour les intéressés, l&rsquo;architecture interne des différents composants</div>
	<h2 id="diagramme-de-flux">Diagramme de flux</h2>
<pre tabindex="0"><code class="language-plantuml" data-lang="plantuml">!include https://bitbucket.org/devbox-sante/plantuml/raw/current/themes/theme-devbox-sante.puml
component &#34;DevBox-santé DMP&#34; as DevBoxSanteDMP

cloud &#34;DMP&#34; as DMP
cloud &#34;fr.pool.ntp.org&#34; as NTP

DevBoxSanteDMP --&gt; DMP  : https (TLS 1.2 / IGC Santé)
DevBoxSanteDMP --&gt; NTP : ntp 
</code></pre><h2 id="architecture-interne-des-différents-composants">Architecture interne des différents composants</h2>
<pre tabindex="0"><code class="language-plantuml" data-lang="plantuml">!include https://bitbucket.org/devbox-sante/plantuml/raw/current/themes/theme-devbox-sante.puml
package &#34;DevBox-santé DMP&#34; {
    [dmp-proxy-xxx] 
    [dmp-cda]
    [dmp-cda-tools]
    [dmp-client-impl]
    [dmp-hl7]
    [dmp-security-xxx]
    [dmp-ws-client]
    [dmp-xds-client]
}

node &#34;DMP&#34;
[dmp-proxy-xxx] - [dmp-client-impl] : Proxy REST/SOAP/... du client DMP
[dmp-client-impl] - [dmp-ws-client]
[dmp-client-impl] -d- [dmp-xds-client]

[dmp-xds-client] -d- [dmp-hl7] : format HL7
[dmp-xds-client] -d- [dmp-cda] : génération CDA
[dmp-xds-client] -d- [dmp-cda-tools] : validation CDA
[dmp-xds-client] - [dmp-security-xxx]

[dmp-ws-client] -d- [dmp-security-xxx]
[dmp-security-xxx] - DMP : authentification TLS
[dmp-ws-client] - DMP : WS soap spécifique DMP
[dmp-xds-client] - DMP : requête XDS
</code></pre><h3 id="les-différents-modules-maven-">Les différents modules Maven :</h3>
<ul>
<li><code>dmp-cda</code> : sérialisation des documents dans le standard CDA-R2</li>
<li><code>dmp-cda-tools</code> : contient le code de validation des documents à envoyer au DMP ainsi que la génération html</li>
<li><code>dmp-client-impl</code> : implémentation du client DMPC en mode embedded</li>
<li><code>dmp-cnda-tools</code> : permet de récupérer les fichiers de tests du CNDA</li>
<li><code>dmp-core</code> : contient le code commun a tous les modules</li>
<li><code>dmp-exemples</code> : contient différents exemples de déploiements du DMPC Client</li>
<li><code>dmp-hl7</code> : implémentation standard HL7 utile pour le DMP</li>
<li><code>dmp-homologation</code> : contient le code permettant l&rsquo;homologation de l&rsquo;api</li>
<li><code>dmp-proxy-rest</code> : implémentation du proxy REST du client DMPC</li>
<li><code>dmp-proxy-ws</code> : implémentation du proxy SOAP du client DMPC</li>
<li><code>dmp-schema-gen</code> : contient les outils de génération de code à partir des différents schémas xsd et des wsdls de XDS et des</li>
<li><code>dmp-tool</code> : outil commun à tous les modules.</li>
<li><code>dmp-security-**</code> : contient l&rsquo;implémentation des différents modes de sécurités</li>
<li><code>dmp-ws-client</code> : contient le code des clients au webservices du DMP autre que XDS</li>
<li><code>dmp-xds-client</code> : contient le code des clients au webservices du DMP XDS</li>
</ul>
<h3 id="zoom-sur-la-sécurité">Zoom sur la sécurité</h3>
<p>La Devbox-santé DMP permet de mettre en place des mécanismes de sécurités différents en fonction du contexte :</p>
<ul>
<li><code>CPS</code></li>
<li><code>P12</code></li>
<li><code>CPSAgent</code></li>
</ul>
<p>La sécurité est configurée via les mécanismes d&rsquo;injection de Spring.</p>
<h4 id="securité-via-la-cps">Securité via la CPS</h4>
<h5 id="diagramme-de-composants">Diagramme de composants</h5>
<pre tabindex="0"><code class="language-plantuml" data-lang="plantuml">!include https://bitbucket.org/devbox-sante/plantuml/raw/current/themes/theme-devbox-sante.puml
package &#34;DevBox-santé DMP&#34; {
    [dmp-security-cps] 
    [cps-facade]
}

interface &#34;Cryptolib cps&#34; as cryptolib

[dmp-security-cps] - [cps-facade]
[cps-facade] - cryptolib
</code></pre><h5 id="diagramme-de-classes">Diagramme de classes</h5>
<p>Les différentes classes en charge de la sécurité dans le mode CPS :</p>
<pre tabindex="0"><code class="language-plantuml" data-lang="plantuml">!include https://bitbucket.org/devbox-sante/plantuml/raw/current/themes/theme-devbox-sante.puml

interface CpsOperationProviderSpi

CpsFacade -U-|&gt; CpsOperationProviderSpi

CpsConfigurationAdapter o-- CpsOperationProviderSpi
CpsConfigurationAdapter : AuthenticationKeyManager
CpsConfigurationAdapter : SignatureKeyManager
CpsConfigurationAdapter : PersonnelSantePopulator
CpsConfigurationAdapter o-- CxfEndPointFactory

CxfEndPointFactory : createEndPoint(...)  // point d&#39;accès au service DMP
CxfEndPointFactory : setVIHF(...)  // gestion du jeton SAML
CxfEndPointFactory : setTLS(...)  // gestion du canal TLS
</code></pre><p>La <code>CpsConfiguration</code> permet d&rsquo;initialiser deux <code>KeyManager</code> s&rsquo;appuyant sur la <code>CpsFacade</code> pour y accèder. Ces deux <code>KeyManager</code> permettent d&rsquo;accéder aux différents certificats et d&rsquo;effectuer les opérations de signature disponibles dans la carte CPS.
La <code>CpsConfiguration</code> permet d&rsquo;initialiser la <code>CxfEndPointFactory</code> qui a pour responsabilité la gestion des accès au services du DMP.</p>
<h4 id="securité-via-les-certificats-p12">Securité via les certificats P12</h4>
<h5 id="diagramme-de-composants-1">Diagramme de composants</h5>
<pre tabindex="0"><code class="language-plantuml" data-lang="plantuml">!include https://bitbucket.org/devbox-sante/plantuml/raw/current/themes/theme-devbox-sante.puml
package &#34;DevBox-santé DMP&#34; {
    [dmp-core] 
}

interface fichier.p12
[dmp-core] - fichier.p12 : load
</code></pre><h5 id="diagramme-de-classes-1">Diagramme de classes</h5>
<p>Les différentes classes en charge de la sécurité dans le mode CPS :</p>
<pre tabindex="0"><code class="language-plantuml" data-lang="plantuml">!include https://bitbucket.org/devbox-sante/plantuml/raw/current/themes/theme-devbox-sante.puml


P12Configuration - P12KeyManager : AuthenticationKeyManager
P12Configuration - P12KeyManager : SignatureKeyManager
P12KeyManager - P12KeyLoader
P12Configuration o-- CxfEndPointFactory

CxfEndPointFactory : createEndPoint(...)  // point d&#39;accès au service DMP
CxfEndPointFactory : setVIHF(...)  // gestion du jeton SAML
CxfEndPointFactory : setTLS(...)  // gestion du canal TLS
</code></pre><p>La <code>P12Configuration</code> permet d&rsquo;initialiser deux <code>KeyManager</code> s&rsquo;appuyant sur la <code>P12KeyLoader</code> qui charge les certificats p12 disponibles. Ces deux <code>KeyManager</code> permettent d&rsquo;accéder aux différents certificats et d&rsquo;effectuer les opérations de signature.
La <code>P12Configuration</code> permet d&rsquo;initialiser la <code>CxfEndPointFactory</code> qui a pour responsabilité la gestion des accès au services du DMP.</p>
<h4 id="securité-via-le-cpsagent">Securité via le CPSAgent</h4>
<h5 id="diagramme-de-composants-2">Diagramme de composants</h5>
<pre tabindex="0"><code class="language-plantuml" data-lang="plantuml">!include https://bitbucket.org/devbox-sante/plantuml/raw/current/themes/theme-devbox-sante.puml
package &#34;DevBox-santé DMP&#34; {
    [dmp-security-cps-with-agent] 
    [cps-agent-client]
}

interface CpsProxy

[dmp-security-cps-with-agent] - [cps-agent-client]
[cps-agent-client] - CpsProxy : transaction sur internet 
</code></pre><h5 id="diagramme-de-classes-2">Diagramme de classes</h5>
<p>Les différentes classes en charge de la sécurité dans le mode CPS :</p>
<pre tabindex="0"><code class="language-plantuml" data-lang="plantuml">!include https://bitbucket.org/devbox-sante/plantuml/raw/current/themes/theme-devbox-sante.puml

interface CpsOperationProviderSpi

CpsAgentClient -U-|&gt; CpsOperationProviderSpi

CpsConfigurationAdapter o-- CpsOperationProviderSpi
CpsConfigurationAdapter : AuthenticationKeyManager
CpsConfigurationAdapter : SignatureKeyManager
CpsConfigurationAdapter : PersonnelSantePopulator
CpsConfigurationAdapter o-- CxfEndPointFactory

CxfEndPointFactory : createEndPoint(...)  // point d&#39;accès au service DMP
CxfEndPointFactory : setVIHF(...)  // gestion du jeton SAML
CxfEndPointFactory : setTLS(...)  // gestion du canal TLS
</code></pre><p>La <code>CpsConfiguration</code> permet d&rsquo;initialiser deux <code>KeyManager</code> s&rsquo;appuyant sur la <code>CpsAgentClient</code> pour accèder aux opérations disponibles de la carte CPS au travers le réseau. Ces deux <code>KeyManager</code> permettent de manières transparents d&rsquo;accéder aux différents certificats et d&rsquo;effectuer les opérations de signature disponibles dans la carte CPS.
La <code>CpsConfiguration</code> permet d&rsquo;initialiser la <code>CxfEndPointFactory</code> qui a pour responsabilité la gestion des accès au services du DMP.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-69ab6ec9377fd03e3abc3d45e2fee590">8 - Versions</h1>
    <div class="lead">Note sur les différentes versions de la DevBox-Santé DMP</div>
	<h1 id="versions-5">Versions 5</h1>
<h2 id="version-506-20230331">Version 5.0.6 (2023/03/31)</h2>
<h3 id="story">Story</h3>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-313">DMP-313</a> [CR-BIO] préciser l&rsquo;extension &ldquo;2021-01&rdquo; du templateId XDS_LAB</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-315">DMP-315</a> Intégration dbx-igcsante 1.2.0</p>
<h2 id="version-505-20230328">Version 5.0.5 (2023/03/28)</h2>
<h3 id="bug">Bug</h3>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-304">DMP-304</a> [NoteVaccination] la soumission de la note ne retourne pas l&rsquo;identifiant de la vaccination</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-305">DMP-305</a> [Proxy] conflit registration du LpsInfoFilter INSi et  DMP</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-306">DMP-306</a> [retreiveContent] problème encodage dans le CDA retourné</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-310">DMP-310</a> [NoteVaccination] libelle approachSiteCode erronné</p>
<h3 id="story-1">Story</h3>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-303">DMP-303</a> [CDAExtractor] message plus explicite pour identifiant invalide du patient</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-307">DMP-307</a> [findBYsoumission] parse date exception</p>
<h2 id="version-504">Version 5.0.4</h2>
<h3 id="tâche">Tâche</h3>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-288">DMP-288</a> [creationTime] Check régression dans décalage horaire sur format déprécié</p>
<h3 id="bug-1">Bug</h3>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-292">DMP-292</a> [XDM tools] xdm problème encodage dans environnement docker</p>
<h3 id="story-2">Story</h3>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-274">DMP-274</a> [Structure IdNational] permettre l’idNational juridique en lieu et place de celui de la CPS</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-283">DMP-283</a> [CdaConversion] no_typeId_validation policy (laxiste)</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-286">DMP-286</a> [TD32] rendre la vérification des identifiants de structure et de PS plus laxiste</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-293">DMP-293</a> [DMPCDocument] distinguer le performer parmi les auteurs.</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-302">DMP-302</a> [OpenAPI] migration springfox -&gt; springdoc</p>
<h2 id="version---503-06022023">Version - 5.0.3 (06/02/2023)</h2>
<h3 id="bug-2">Bug</h3>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-290">DMP-290</a> [CDAWrapped] les confidentialities ne sont pas préservés du DMPCDocument</p>
<h3 id="story-3">Story</h3>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-289">DMP-289</a> [DMPCPersonnelSante] priorité au RPPS.</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-294">DMP-294</a> [P12 in header] prise en compte de ce mode d&rsquo;authentification</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-295">DMP-295</a> [ExceptionControllerAdvice] meilleure interception des DMPCException</p>
<h2 id="version---502-20122022">Version - 5.0.2 (20/12/2022)</h2>
<h3 id="bug-3">Bug</h3>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-280">DMP-280</a> [DMP tools] XDS to DMP manque replacement info et destinataires</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-281">DMP-281</a> [UpdateConfidentiality] NPE sur StructureSanteToXONConverter</p>
<h3 id="story-4">Story</h3>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-255">DMP-255</a> [NoteVaccination] Intégrer DV_ImmunizationApproachSiteCode-CISIS et JDV_HL7_ImmunizationRouteCodes-CISIS</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-259">DMP-259</a> [NoteVaccination] controle code sur JDV_HL7_ActSubstanceAdministrationImmunizationCode-CISIS</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-271">DMP-271</a> [NoteVaccination] génération à la volée de l’identifiant de la vaccination</p>
<h2 id="version---501-15122022">Version - 5.0.1 (15/12/2022)</h2>
<h3 id="bug-4">Bug</h3>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-268">DMP-268</a> [Vaccination] NPE sur valeur observation</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-269">DMP-269</a> [CDA] gestion du split sur replacementOf également</p>
<h2 id="story-5">Story</h2>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-276">DMP-276</a> [CDA] Valider le CDA wrapped avant unmarshall document</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-277">DMP-277</a> [Proxy REST] endpoint dmp/to/xdm en base64</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-278">DMP-278</a> [CDAWrapped FLUDT] SAXParseException</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-279">DMP-279</a> [Tools] donner un point d’entrée à la génération de UniqueId.</p>
<h2 id="version-500-18112022">Version 5.0.0 (18/11/2022)</h2>
<h3 id="story-6">Story</h3>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-128">DMP-128</a> [API] DMPCDocument récupérer les codingSchemes des codes</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-183">DMP-183</a> [DMP2.6] Support de la note et historique de vaccination</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-184">DMP-184</a> Suppression définitive de la TD0.0</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-200">DMP-200</a> [DMP 2.6.1] prendre en compte évolutions packages</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-222">DMP-222</a> [DTM] utilisation des ZonedDateTime en interne</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-227">DMP-227</a> [Security P12] Gestion multicertificats</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-228">DMP-228</a> [DMPToCDA] informationRecipient dans le cas d’un envoi vers la messagerie Patient.</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-230">DMP-230</a> [OID] gestion des OID Intégration du projet dbx-oid</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-231">DMP-231</a> [CDA-Wrapped] validation schematron EAI</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-235">DMP-235</a> [CDA Tools] intégration testContenuCDA 2.41</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-237">DMP-237</a> [Validation] supprimer singleton ByAnnotationValidator par le spring LocalValidatorFactoryBean</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-239">DMP-239</a> [Validation] ajout des groupes javax.validation sur les documents</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-240">DMP-240</a> [TD0.4] recherche liste patients</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-241">DMP-241</a> [TD1.5] suppression de la transaction</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-242">DMP-242</a> [Convergence INSi] utilisation du matriculeINS complet dans les requêtes de l&rsquo;API</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-243">DMP-243</a> [Homologation] passage de l’homologation v2.6.1</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-244">DMP-244</a> Contrôle des différents formats des identifiants de Structure (FINESS, SIRET&hellip;) et PS (RPPS, ADELI &hellip;)</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-245">DMP-245</a> [EX_3.1-1015] support de l’exigence historique de remboursement</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-246">DMP-246</a> [Security] ajout de la gestion des CRL des truststore</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-248">DMP-248</a> [TD02] prendre en charge le rattachement ENS</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-250">DMP-250</a> [TD3.2] Gérer la transformation html des CDA autoprésentable</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-254">DMP-254</a> [Actuator] ajout de lpsInfoContributor pour le DMP</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-257">DMP-257</a> [CDA-TOOL] Permettre la gestion de l’email de la Structure Sante (BAL organisationnelle)</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-258">DMP-258</a> [CDA] split de l’ID non géré par DMP contrairement au CI-SIS</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-263">DMP-263</a> [JDV] intégrer 20220729-JDV_DMP_API_V2_XML.zip</p>
<h3 id="sous-tâche">Sous-tâche</h3>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-197">DMP-197</a> [DMP 2.6] Ajout note de vaccination</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-199">DMP-199</a> [DMP 2.6] validation note de vaccination</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-225">DMP-225</a> DMP_0.3c Supprimer  la modification du statut &ldquo;médecin traitant&rdquo;</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-226">DMP-226</a> Gestion des cartes CPF : affectation de la structure en charge de l’éditeur (p.167)</p>
<h3 id="bug-5">Bug</h3>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-220">DMP-220</a> [Erreur VIHF] problème de synchro</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-221">DMP-221</a> [Proxy-rest] TD21 Soumission uniqueId manquant sur le retour</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-234">DMP-234</a> [TD32RetrieveContent] NPE dans CDAHeaderExtractor</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-247">DMP-247</a> [NPE] dans HistoriqueRemboursementRequestValidator</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-251">DMP-251</a> [NTPServer] changement server NTP</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-256">DMP-256</a> [CDAHeaderExtractor] NPE on extractSpecialty</p>
<h1 id="versions-4">Versions 4</h1>
<h2 id="version---4718-20122022">Version - 4.7.18 (20/12/2022)</h2>
<h3 id="bug-6">Bug</h3>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-275">DMP-275</a> [Type Document] manque &ldquo;Projet personnalisé d’accompagnement&rdquo;</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-281">DMP-281</a> [UpdateConfidentiality] NPE sur StructureSanteToXONConverter</p>
<h3 id="story-7">Story</h3>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-263">DMP-263</a> [JDV] intégrer 20220729-JDV_DMP_API_V2_XML.zip</p>
<h2 id="version-4717-22112022">Version 4.7.17 (22/11/2022)</h2>
<h3 id="bug-7">Bug</h3>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-269">DMP-269</a> [CDA] gestion du split sur replacementOf également</p>
<h2 id="version-4716-18112022">Version 4.7.16 (18/11/2022)</h2>
<h3 id="story-8">Story</h3>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-228">DMP-228</a> [DMPToCDA] informationRecipient dans le cas d’un envoi vers la messagerie Patient.</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-257">DMP-257</a> [CDA-TOOL] Permettre la gestion de l’email de la Structure Sante (BAL organisationnelle)</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-258">DMP-258</a> [CDA] split de l’ID non géré par DMP contrairement au CI-SIS</p>
<h2 id="version-4715-26092022">Version 4.7.15 (26/09/2022)</h2>
<h3 id="bug-8">Bug</h3>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-253">DMP-253</a> Document.recipients sans info structuresante.</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-252">DMP-252</a> [DMPCtoCDA] représentation telecom manquante dans certain cas</p>
<h2 id="version-4714-23092022">Version 4.7.14 (23/09/2022)</h2>
<h3 id="bug-9">Bug</h3>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-251">DMP-251</a> [NTPServer] changement server NTP</p>
<h2 id="version-4713-27072022">Version 4.7.13 (27/07/2022)</h2>
<h3 id="bug-10">Bug</h3>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-232">DMP-232</a> [XONConverter] NPE si structure manquante</p>
<h3 id="story-9">Story</h3>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-233">DMP-233</a> [Stellair] externaliser configuration</p>
<h2 id="4712-08072022">4.7.12 (08/07/2022)</h2>
<h3 id="story-10">Story</h3>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-223">DMP-223</a> Homologation DMP-UI 1.0</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-121">DMP-121</a> Supprimer singleton TimeManager ==&gt; en faire un composant injectable.</p>
<h2 id="version-4711-04072022">Version 4.7.11 (04/07/2022)</h2>
<h4 id="bug-11">Bug</h4>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-219">DMP-219</a> [CDAWrapped] remplacement non effectif avec metadonnées json.</p>
<h4 id="story-11">Story</h4>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-224">DMP-224</a> [DMPCtoCDA] versionNumber pour tous les documents</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-218">DMP-218</a> [CDAWrapped] Qualifier SP semble obligatoire pour générer un XDS valide DMP</p>
<h2 id="version-4710-13062022">Version 4.7.10 (13/06/2022)</h2>
<h4 id="bug-12">Bug</h4>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-217">DMP-217</a> [Docker] Problème lecture contenu CDA</p>
<h2 id="version-479-12062022">Version 4.7.9 (12/06/2022)</h2>
<h4 id="bug-13">Bug</h4>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-216">DMP-216</a> [Proxy] manque les content-* dans le header /dmp/to/xdm</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-215">DMP-215</a> [CDA] NPE sur guessType du PersonnelConverter</p>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-214">DMP-214</a> [CDA] MoyenTelConverter no value present</p>
<h2 id="version-478-08062022">Version 4.7.8 (08/06/2022)</h2>
<h4 id="story-12">Story</h4>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-211">DMP-211</a> [XDM to DMPC] Extraire une enveloppe XDM en DMPCSoumission</p>
<h4 id="tâche-1">Tâche</h4>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-195">DMP-195</a> [IHE-XDM-MSS] validation génération XDM via gazelle</p>
<div class="csg-wrapper" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; font-size: 14px; font-weight: 400; line-height: 24px; vertical-align: baseline;"><h1 class="csg-h1" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 23px; line-height: 1.1034; margin-top: 40px; letter-spacing: -0.01em;">Version 4.7.7 (20/05/2022)</h1><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Story</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-207" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-207</a> [INS] Reprendre les différentes implication de l’annexe INS du CI-SIS</p></div>
<div class="csg-wrapper" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; font-size: 14px; font-weight: 400; line-height: 24px; vertical-align: baseline;"><h1 class="csg-h1" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 23px; line-height: 1.1034; margin-top: 40px; letter-spacing: -0.01em;">Version 4.7.6 (13/05/2022)</h1><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Bug</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-202" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-202</a> [XDS Find Documents] Problème lors de la recherche par auteur</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-201" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-201</a> [PDF/A] problème de conformité via le site https://avepdf.com/fr/pdfa-validation</p><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Story</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-209" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-209</a> [XDS / OID] sourcePatientId doit avoir un OID différent.</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-208" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-208</a> [Id.root] distinguer les OID des différents id (id et queryId de la td02)</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-206" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-206</a> [CDA] testContenuCDA sous Github</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-205" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-205</a> [CDA TOOLS] transformation xslt sans nonXmlBody</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-204" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-204</a> [CDA] RNIV : patientRole qualifier "SP" déprécié pour "CL"</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-203" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-203</a> [XDS]  sourcePatientInfo PID-5 conforme au nouveau RNIV</p></div>
<div class="csg-wrapper" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; font-size: 14px; font-weight: 400; line-height: 24px; vertical-align: baseline;"><h1 class="csg-h1" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 23px; line-height: 1.1034; margin-top: 40px; letter-spacing: -0.01em;">Version 4.7.5 (04/05/2022)</h1><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Bug</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-196" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-196</a> [TOOLS PDF/A1] Npe sur conversion</p></div>
<div class="csg-wrapper" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; font-size: 14px; font-weight: 400; line-height: 24px; vertical-align: baseline;"><h1 class="csg-h1" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 23px; line-height: 1.1034; margin-top: 40px; letter-spacing: -0.01em;">Version 4.7.4 (21/04/2022)</h1><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Story</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-194" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-194</a> [Tools] PDF to PDF/A (Ségur)</p></div>
<div class="csg-wrapper" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; font-size: 14px; font-weight: 400; line-height: 24px; vertical-align: baseline;"><h1 class="csg-h1" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 23px; line-height: 1.1034; margin-top: 40px; letter-spacing: -0.01em;">Version 4.7.3 (12/04/2022)</h1><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Bug</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-192" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-192</a> [Proxy] path lpsInfo incorect</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-191" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-191</a> [Proxy] path des endpoints de time incorrects</p></div>
<div class="csg-wrapper" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; font-size: 14px; font-weight: 400; line-height: 24px; vertical-align: baseline;"><h1 class="csg-h1" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 23px; line-height: 1.1034; margin-top: 40px; letter-spacing: -0.01em;">Version 4.7.2 (11/04/2022)</h1><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Bug</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-190" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-190</a> [PSIdNatFormatter] NumberFormatException , améliorer lecture de l’IdNational d</p><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Story</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-189" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-189</a> [XDM] générer les uniqueId et UUID à la volée si ils sont nuls</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-188" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-188</a> CDA : information destinataire moins contraignante</p></div>
<div class="csg-wrapper" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; font-size: 14px; font-weight: 400; line-height: 24px; vertical-align: baseline;"><h1 class="csg-h1" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 23px; line-height: 1.1034; margin-top: 40px; letter-spacing: -0.01em;">Version 4.7.1 (01/04/2022)</h1><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Bug</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-187" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-187</a> [DMPCClientImp] validation intempestive du document lors du retrieve.</p><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Story</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-185" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-185</a> [DMPCDocument] introduire la notion de destinataire (informationRecipient)</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-182" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-182</a> [XDM] Permettre la génération d'une enveloppe XDM</p></div>
<div class="csg-wrapper" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; font-size: 14px; font-weight: 400; line-height: 24px; vertical-align: baseline;"><h1 class="csg-h1" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 23px; line-height: 1.1034; margin-top: 40px; letter-spacing: -0.01em;">Version 4.7.0 (02/03/2022)</h1><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Story</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-181" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-181</a> Gestion de la surcharge du creationTime d'un DMPCDocument</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-176" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-176</a> [Alimentation] CDAWrapped Document</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-174" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-174</a> [DMPC-API] permettre le positionnement de l'autorite INS dans le patient.</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-173" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-173</a> [CDAResource] Fournir un premier endpoint DMPCDocunet to CDA et vice versa</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-142" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-142</a> [Stellair] fournir ce mode d'authentification pour le DMP.</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-136" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-136</a> [SECURITY] ajout de l'authentification Directe avec le CpsAgent</p></div>
<div class="csg-wrapper" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; font-size: 14px; font-weight: 400; line-height: 24px; vertical-align: baseline;"><h1 class="csg-h1" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 23px; line-height: 1.1034; margin-top: 40px; letter-spacing: -0.01em;">Version 4.6.6 (09/02/2022)</h1><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Bug</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-178" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-178</a> [Schematron] validation du CDA en remplacement pose problème sur l'identifiant root</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-175" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-175</a> TD02 : ins ne remonte pas cas corse</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-171" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-171</a> Document des secrets mal formattés en cas de nom patronymique null.</p><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Story</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-179" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-179</a> [TD09] prendre en compte les nouvelles baseUrl et format ins / autorite</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-177" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-177</a> [ConfidentialityCode] le code INVISIBLE_ ne doit pas être seul, améliorer le message d'erreur</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-172" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-172</a> [Soummission] ajout de code de validation lors de la soumission de documents.</p></div>
<div class="csg-wrapper" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; font-size: 14px; font-weight: 400; line-height: 24px; vertical-align: baseline;"><h1 class="csg-h1" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 23px; line-height: 1.1034; margin-top: 40px; letter-spacing: -0.01em;">Version 4.6.5 (03/01/2022)</h1><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Bug</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-169" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-169</a> [RetrieveContent] NPE lors d'une récupération de contenu</p><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Story</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-170" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-170</a> [CDA Validation] remonter le message d'erreur du schematron</p></div>
<div class="csg-wrapper" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; font-size: 14px; font-weight: 400; line-height: 24px; vertical-align: baseline;"><h1 class="csg-h1" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 23px; line-height: 1.1034; margin-top: 40px; letter-spacing: -0.01em;">Version 4.6.4 (15/12/2021)</h1><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Bug</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-168" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-168</a> Incompatibilité avec INSI 2.5 pour injection CpsFacade</p></div>
<div class="csg-wrapper" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; font-size: 14px; font-weight: 400; line-height: 24px; vertical-align: baseline;"><h1 class="csg-h1" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 23px; line-height: 1.1034; margin-top: 40px; letter-spacing: -0.01em;">Version 4.6.3 (14/12/2021)</h1><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Bug</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-165" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-165</a> [ITI18]     _findDocumentsAndContentsWithAssociations problème lors d'une recherche vide</p><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Story</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-166" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-166</a> [SECURITY] migration log4J 2.15</p></div>
<div class="csg-wrapper" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; font-size: 14px; font-weight: 400; line-height: 24px; vertical-align: baseline;"><h1 class="csg-h1" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 23px; line-height: 1.1034; margin-top: 40px; letter-spacing: -0.01em;">Version 4.6.2 (01/12/2021)</h1><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Bug</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-162" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-162</a> [ITI18] parameterName=$XDSDocumentEntryUniqueId;Le format du paramètre est incorrect</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-161" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-161</a> serviceStopTime est requis si connu.</p></div>
<div class="csg-wrapper" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; font-size: 14px; font-weight: 400; line-height: 24px; vertical-align: baseline;"><h1 class="csg-h1" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 23px; line-height: 1.1034; margin-top: 40px; letter-spacing: -0.01em;">Version 4.6.1 (02/11/2021)</h1><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Story</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-155" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-155</a> Créer identifiant d'installation à la volée si non renseigné (lpsInfo.id et source.idExtension)</p></div>
<div class="csg-wrapper" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; font-size: 14px; font-weight: 400; line-height: 24px; vertical-align: baseline;"><h1 class="csg-h1" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 23px; line-height: 1.1034; margin-top: 40px; letter-spacing: -0.01em;">Version 4.6 (21/10/2021)</h1><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Story</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-158" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-158</a> [Proxy] remonter les LPSInfos par le proxy</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-157" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-157</a> [Proxy] donner la possibilité d'accéder à l'heure encoder en ISO</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-156" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-156</a> Ajout d'une méthode utilitaire permettant d'indexer les typeCodes des documents par leur classCodes</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-145" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-145</a> [Proxy] permettre la surcharge des LpsInfo dans le header.</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-144" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-144</a> [CPS] Meilleur gestion de l'activité</p></div>
<div class="csg-wrapper" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; font-size: 14px; font-weight: 400; line-height: 24px; vertical-align: baseline;"><h1 class="csg-h1" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 23px; line-height: 1.1034; margin-top: 40px; letter-spacing: -0.01em;">DMP - Version 4.5 (07/10/2021)</h1>
<h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Version compatible `SEL-MP-037 DMPi v2.5.0` validé sur `Package GIE SV 02.05.00` </h3>
<h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Story</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-152" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-152</a> [CDA] valider document structuration minimale sur la version 2.34</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-150" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-150</a> Migration DMP LPS Schemas v2.01.02</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-149" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-149</a> [EX-3.2-1030] Manque la récupération du CDAHeader dans le proxy</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-148" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-148</a> [TD11] dépreciée/suppression de la transaction de création DMP (version 2.4 spec)</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-147" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-147</a> [TD00] dépréciée la méthode (spec 2.4)</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-106" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-106</a> [WSDL_SCHEMA] mettre à jour les schémas et WSDL vers la version courant du DMP</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-104" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-104</a> [Validation] prendre en charge la dernière version du contenu CDA</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-100" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-100</a> [DMPCWsClientException] Gestion des logs</p><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Tâche</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-153" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-153</a> Homologation v2.5</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-90" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-90</a> [nomenclature] mise à jour des jeux de valeurs</p></div>
<div class="csg-wrapper" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; font-size: 14px; font-weight: 400; line-height: 24px; vertical-align: baseline;"><h1 class="csg-h1" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 23px; line-height: 1.1034; margin-top: 40px; letter-spacing: -0.01em;">Version 4.0.2  (07/07/2021)</h1><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Bug</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-146" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-146</a> [TD31Find] erreur lors d'un retour vide :  [XDSStoredQueryMissingParam] parameterName=$uuid</p></div>
<div class="csg-wrapper" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; font-size: 14px; font-weight: 400; line-height: 24px; vertical-align: baseline;"><h1 class="csg-h1" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 23px; line-height: 1.1034; margin-top: 40px; letter-spacing: -0.01em;">Version 4.0.1  (21/06/2021)</h1><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Bug</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-141" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-141</a> [Proxy] Probleme conversion de la réponse TD33</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-138" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-138</a> [TD31] DMPCClient find converter ne remonte pas le typeCode</p><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Story</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-140" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-140</a> [TD31] findDocumentsBySubmissionTime</p></div>
<div class="csg-wrapper" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; font-size: 14px; font-weight: 400; line-height: 24px; vertical-align: baseline;"><h1 class="csg-h1" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 23px; line-height: 1.1034; margin-top: 40px; letter-spacing: -0.01em;">Version 4.0  (03/05/2021)</h1>
<h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Version compatible `SEL-MP-037 DMPi v2.3.0` validé sur `PDV_HOM_20210129_v2.3.0` </h3>
<h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Bug</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-135" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-135</a> Problème version bouncycastle</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-132" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-132</a> L'autorite du personneldesante dans le cas CPS est celui de la structure</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-127" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-127</a> [Consultation] permettre la remontée de document avec des entryUuids qui n'en sont pas</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-124" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-124</a> [TLS] session TLS reste ouvert sur carte CPS</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-116" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-116</a> [REST] remonter les exceptions correctement au client</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-108" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-108</a> [REST] td32 retrieveContent</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-105" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-105</a> [CPS] chargement de la carte CPS au démarrage du proxy.</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-102" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-102</a> [HL7V25] typeCode SP inconnu</p><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Story</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-143" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-143</a> [SHA1] deprecated</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-133" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-133</a> [TD32] le find ne renvoit pas d'erreur si non retrouvé</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-131" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-131</a> [Indirect] Le P12AuthenticationContextHandler ne doit s'intéresser à des identifiants internes</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-130" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-130</a> [TD09] prendre en compte l'ex_0.9-1030</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-129" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-129</a> [OpenSaml] migrer vers la version 3.4</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-126" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-126</a> [Nomenclature] mettre à jour jdV</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-125" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-125</a> [UniqueIdGenerator] le num séquence de fin sur un modulo</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-123" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-123</a> [FindDocuments] changer la cardinalité dans les filtres des codes</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-120" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-120</a> TimeManager : policy of retry</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-119" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-119</a> DmpParameterManager : innutile de le charger au démarrage</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-118" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-118</a> [Configuration] dmpc -&gt; devbox-sante.dmp</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-117" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-117</a> [Maven enforcer ] incohérence de certaines dépendances</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-115" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-115</a> [URL web] intégration PDT-INF-547</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-114" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-114</a> VIHF expiré</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-113" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-113</a> TD3.3d : archiver / désarchiver un document</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-112" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-112</a> TD3.3b : rendre un document visible au patient ou à ses representants légaux</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-111" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-111</a> TD3.3a : masquer / démasquer un document aux PS</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-110" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-110</a> [TD0.9] permettre l'obtention des infos de redirect</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-109" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-109</a> [TD31 listener] ajout d'un listener de recherche</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-107" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-107</a> [CXF.version] mise à jour de la version Cxf avec celle du bom</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-103" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-103</a> [Validation] DMPCContexte sans auteur Id en authentification indirecte</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-101" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-101</a> [DMPC-API] ajout des annotations json swagger</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-98" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-98</a> Mise en place de Lombok</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-97" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-97</a> [Consultation] DMP_3.2 : consulter des documents dans le DMP d’un patient (via TD3.2)</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-96" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-96</a> Renomage des modules es packages en fr.devboxsante.dmp</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-91" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-91</a> JDK11 migration</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-79" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-79</a> [Technique] Migration spring boot 2 , utilisation du bom devbox-sante</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-75" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-75</a> [TD31] support de la recherche de documents</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-45" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-45</a> Charger le cda.validator.toolPath depuis le classpath</p><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Tâche</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-122" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-122</a> [Homologation] passage homologation DEVCOOP consultation</p><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-80" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-80</a> [test] migration vers springboot test abandon testng</p></div>
<h1 id="versions-32">Versions 3.2</h1>
<h2 id="version-323-15062022">Version 3.2.3 (15/06/2022)</h2>
<h4 id="bug-14">Bug</h4>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-212">DMP-212</a> [eventCodes] peut être vide</p>
<h2 id="version-322-10022022">Version 3.2.2 (10/02/2022)</h2>
<h4 id="story-13">Story</h4>
<p><a href="https://devbox-sante.atlassian.net/browse/DMP-180">DMP-180</a> [3.2]_backport Génération d&rsquo;un CDA à partir d&rsquo;un DMPCDocument</p>
<div class="csg-wrapper" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; font-size: 14px; font-weight: 400; line-height: 24px; vertical-align: baseline;"><h1 class="csg-h1" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 23px; line-height: 1.1034; margin-top: 40px; letter-spacing: -0.01em;">Version 3.2.1 (21/01/2022)</h1><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Bug</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-175" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-175</a> TD02 : ins ne remonte pas cas corse</p><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Tâche</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-167" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-167</a> Baisser le niveau de log de  DMPCWSClientException  à info</p></div>
<div class="csg-wrapper" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; font-size: 14px; font-weight: 400; line-height: 24px; vertical-align: baseline;"><h1 class="csg-h1" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 23px; line-height: 1.1034; margin-top: 40px; letter-spacing: -0.01em;">Version 3.2.0 (06/10/2021)</h1><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Story</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-154" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-154</a> Mettre à jour les jeux de valeurs du 24/09/2021</p><h3 class="csg-h3" style="font-style: inherit; color: #172B4D; font-weight: 600; margin-bottom: 0; font-size: 16px; line-height: 1.2; margin-top: 32px; font-weight: 500; letter-spacing: -0.008em;">Tâche</h3><p class="csg-p" style="margin: 0; padding: 0px; margin-bottom: 7px; padding-top: 7px; mso-line-height-rule: exactly; line-height: 24px; font-size: 14px;"><a href="https://devbox-sante.atlassian.net/browse/DMP-86" class="csg-mark-link" style="border: none; background: transparent; color: #0052cc; text-decoration: none;">DMP-86</a> Mise À jour testContenuCDA_20200609_V2.25.zip</p></div>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-482b0512e4c9a4797a314eeb3121c84a">9 - DMP UI</h1>
    <div class="lead">Une interface utilisateur pour le DMP</div>
	<h2 id="intégrer-en-marque-blanche-lihm-devbox-santé-dmp-ui">Intégrer en marque blanche l’IHM DevBox-Santé DMP UI</h2>
<p>Nous avons fait l’exercice : intégré et homologué la DevBox-santé DMP en mode REST, et sommes en mesure de vous la faire partager à vos clients.</p>
<h2 id="quelques-impressions-sur-nos-tests-dhomologation">Quelques impressions sur nos tests d&rsquo;homologation</h2>

</div>



    
      
  
  
  
  

  
  

  

    
	
  



          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="www.devbox-sante.fr" aria-label="www.devbox-sante.fr">
    <a class="text-white" target="_blank" rel="noopener" href="https://www.devbox-sante.fr" aria-label="www.devbox-sante.fr">
      <i class="icon iconFoot icon-devbox"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="BitBucket" aria-label="BitBucket">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/google/docsy" aria-label="BitBucket">
      <i class="fab fa-bitbucket"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Contactez-nous" aria-label="Contactez-nous">
    <a class="text-white" target="_blank" rel="noopener" href="mailto://devbox-sante@devcoop.fr" aria-label="Contactez-nous">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2023 DevBox Santé Tous droits réservés</small>
        <small class="ml-1"><a href="https://www.devbox-sante.fr/mentions" target="_blank" rel="noopener">Politique de confidentialité</a></small>
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src='/js/deflate.js'></script>
<script src="/js/main.min.3a0c127c91c19bb5bc28c5e9f8b735520cf339dd08bc90d296bd27e9cfd53e3d.js" integrity="sha256-OgwSfJHBm7W8KMXp&#43;Lc1UgzzOd0IvJDSlr0n6c/VPj0=" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>


  </body>
</html>
